
<!-- === R2R Scale Override (v1) ========================================= -->
<script>
(function () {
  // Public API
  window.R2R_SCALE = {
    /** Set a profile by name ('auto' | '4k_jaszdot' | custom) */
    set(profileName) {
      const p = PROFILES[profileName] || PROFILES.auto;
      applyProfile(p);
      try { localStorage.setItem(LS_KEY, profileName); } catch(_) {}
      updateToggleLabel();
    },
    /** Read the active profile name */
    get current() { return document.documentElement.getAttribute('data-scale') || 'auto'; },
  };

  // -------- Profiles you can tweak in one place ----------
  const PROFILES = {
    auto: {
      name: 'auto',
      rootVars: {
        '--frame-scale': '96vmin',
        '--frame-max'  : '1280px',
        '--hudH'       : '96px',
        '--headerH'    : '96px',
        '--logoH'      : '100px',
      },
      htmlClasses: ['scale-auto']
    },

    // Tuned for: Jaszdot 65" 4K panel + Android 13 WebView
    // Bigger HUD/headers, larger frame allowance, no CSS transform blur.
    '4k_jaszdot': {
      name: '4k_jaszdot',
      rootVars: {
        '--frame-scale': '130vmin',
        '--frame-max'  : '2160px',
        '--hudH'       : '160px',
        '--headerH'    : '140px',
        '--logoH'      : '140px'
      },
      htmlClasses: ['scale-4k']
    }
  };

  const LS_KEY = 'r2r.scaleProfile';

  function applyProfile(profile) {
    const root = document.documentElement;
    root.setAttribute('data-scale', profile.name);

    // set CSS custom properties
    for (const [k, v] of Object.entries(profile.rootVars)) {
      root.style.setProperty(k, v);
    }

    // manage helper classes
    Object.values(PROFILES).forEach(p =>
      p.htmlClasses?.forEach(c => root.classList.remove(c))
    );
    profile.htmlClasses?.forEach(c => root.classList.add(c));
  }

  function initialProfile() {
    const url = new URL(location.href);
    const urlScale = url.searchParams.get('scale'); // e.g. ?scale=4k_jaszdot
    if (urlScale && PROFILES[urlScale]) return urlScale;

    try {
      const saved = localStorage.getItem(LS_KEY);
      if (saved && PROFILES[saved]) return saved;
    } catch (_) {}

    // Heuristic: favor 4k_jaszdot on large, high-DPI displays
    const w = Math.max(screen.width, screen.height);
    const h = Math.min(screen.width, screen.height);
    const dpr = window.devicePixelRatio || 1;
    if (w >= 3000 && h >= 1600 && dpr >= 1.5) return '4k_jaszdot';

    return 'auto';
  }

  // Toggle UI injection (non-destructive)
  function injectScaleToggle() {
    if (document.getElementById('r2r-scale-toggle')) return;

    const btn = document.createElement('button');
    btn.id = 'r2r-scale-toggle';
    btn.type = 'button';
    btn.style.marginLeft = '8px';
    btn.style.whiteSpace = 'nowrap';
    btn.className = 'r2r-chip r2r-chip-scale'; // allow local CSS to target
    btn.addEventListener('click', () => {
      const next = (window.R2R_SCALE.current === '4k_jaszdot') ? 'auto' : '4k_jaszdot';
      window.R2R_SCALE.set(next);
    });

    function tryAttachTo(el) {
      if (!el) return false;
      try { el.appendChild(btn); return true; } catch { return false; }
    }

    const candidates = [
      '#rs-config', '#configBar', '#rs-float-header', '#toolbar',
      '.rs-config', '.config-bar', '.toolbar', '.rs-float-header'
    ];
    let attached = false;
    for (const sel of candidates) {
      const el = document.querySelector(sel);
      if (tryAttachTo(el)) { attached = true; break; }
    }

    if (!attached) {
      // Fallback: unobtrusive fixed chip near top-right
      btn.style.position = 'fixed';
      btn.style.top = '8px';
      btn.style.right = '8px';
      btn.style.zIndex = '9999';
      document.body.appendChild(btn);
    }

    updateToggleLabel();
  }

  function updateToggleLabel() {
    const btn = document.getElementById('r2r-scale-toggle');
    if (!btn) return;
    const cur = window.R2R_SCALE.current;
    btn.textContent = (cur === '4k_jaszdot') ? 'Scale: 4K Jaszdot' : 'Scale: Auto';
    btn.setAttribute('aria-pressed', cur === '4k_jaszdot' ? 'true' : 'false');
    btn.title = 'Toggle display scale profile';
  }

  // Init now
  const start = initialProfile();
  applyProfile(PROFILES[start]);

  // Re-apply on orientation/resize (WebView quirks)
  function reapplyActiveProfile() {
    const activeName = document.documentElement.getAttribute('data-scale') || start;
    const profile = PROFILES[activeName] || PROFILES[start] || PROFILES.auto;
    applyProfile(profile);
  }

  window.addEventListener('orientationchange', reapplyActiveProfile);
  window.addEventListener('resize',            reapplyActiveProfile);

  // Make a convenience global
  window.setScaleProfile = (name) => window.R2R_SCALE.set(name);

  // Inject the toggle as soon as possible, but safely
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', injectScaleToggle);
  } else {
    injectScaleToggle();
  }
})();
</script>
<style>
  /* Optional minimal styles for the toggle "chip" without altering your base */
  #r2r-scale-toggle {
    font: inherit;
    line-height: 1;
    padding: 6px 10px;
    border-radius: 999px;
    border: 1px solid currentColor;
    background: transparent;
    cursor: pointer;
    opacity: 0.9;
  }
  #r2r-scale-toggle:hover { opacity: 1; }
</style>
<!-- ==================================================================== -->

<!DOCTYPE html>

<html lang="en">

<!-- R2R PATCH v4: Early HUD hide flag -->
<script>
  (function(){ try{ document.documentElement.classList.add('hud-hidden'); }catch(e){} })();
</script>

<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Reel to Real — In‑Frame Exit (Pause + Try Again / Quit)</title>
<style>/* === Inlined from style.css === */
/* === MERGED FINAL STYLE (Base + Modal Overlay) === */


/* ===== MERGED FROM: style.css ===== */

/* === Reel2Real: POP base + Theme v3 (merged) === */
/* === Reel2Real: left-stack v1.2 + pure palette theme (merged) === */
/* === Reel2Real merged stylesheet === */
/* Sink font */
@font-face {
  font-family: 'SinkFont';
  src: url('fonts/Sink.woff2') format('woff2');
  font-display: swap;
}


/* Advercase Regular */
@font-face {
  font-family: 'AdvercaseRegular';
  src: url('fonts/AdvercaseFont-Demo-Regular.woff2') format('woff2');
  font-display: swap;
}

/* Advercase Bold */
@font-face {
  font-family: 'AdvercaseBold';
  src: url('fonts/AdvercaseFont-Demo-Bold.woff2') format('woff2');
  font-display: swap;
}

    :root {
      --grade: contrast(1.06) brightness(.96) saturate(.9) sepia(.08);
      --frame-max:1280px;
      --frame-scale:96vmin;
      --border:#444;
      color-scheme: dark;
    }
    html, body { margin:0; height:100%; background:#000; color:#e6e6e6; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif }

    /* League Gothic (expects fonts/LeagueGothic.woff2 in your project) */
    /* LeagueGothic font disabled to avoid missing file 404
@font-face{
      font-family: 'LeagueGothic';
      src: url('fonts/LeagueGothic.woff2') format('woff2');
      font-display: swap;
    }
*/

    /* ===== SPLASH OVERLAY ===== */
    #splashOverlay { position: fixed; inset: 0; background: #000; z-index: 1000; display: none; overflow:hidden; filter: var(--grade); }
    #splashOverlay.show { display: block; }
    #splashOverlay .bgvid { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:.92; }
    #splashOverlay .logo {
      position:absolute; inset:0; margin:auto; width:auto; height:min(36vh, 420px); max-width:90vw;
      object-fit:contain; filter: drop-shadow(0 8px 24px #000C); pointer-events:none;
    }
    #splashOverlay .tap {
      position:absolute; left:50%; bottom:12vh; transform:translateX(-50%);
      color:#EDEDED; text-shadow:0 2px 10px #000C; font-weight:800; letter-spacing:.06em;
      font-size:min(9vmin, 64px); opacity:.94; pointer-events:none; animation: tapPulse 1.6s ease-in-out infinite;
    }
    @keyframes tapPulse { 0%,100%{ transform:translateX(-50%) scale(1)} 50%{ transform:translateX(-50%) scale(1.02)} }
    .vignette, .light-leaks, .dirt, .shutter-flicker, .grain { position:absolute; inset:0; pointer-events:none; }
    .vignette { background: radial-gradient(120% 120% at 50% 50%, transparent 60%, rgba(0,0,0,.35) 85%, rgba(0,0,0,.75) 100%); mix-blend-mode:multiply; }
    .light-leaks::after { content:""; position:absolute; inset:-10%; background:
        linear-gradient(90deg, transparent 0%, rgba(255,200,0,.06) 30%, transparent 60%, rgba(255,0,64,.06) 85%, transparent 100%);
      animation: leaks 9s ease-in-out infinite; mix-blend-mode:screen; opacity:.6; }
    @keyframes leaks { 0%{transform:translateX(-10%) scale(1.02); opacity:.5} 50%{transform:translateX(10%) scale(1.02); opacity:.7} 100%{transform:translateX(-10%) scale(1.02); opacity:.5} }
    .shutter-flicker { animation: shutter 1.2s steps(2) infinite; }
    @keyframes shutter { 0%,100%{opacity:.9} 50%{opacity:1} }
    .grain::after {
      content:""; width:110%; height:110%; position:absolute; top:-5%; left:-5%; opacity:.18;
      background-image:
        repeating-conic-gradient(#FFF8 0%, transparent .0003%, transparent .0075%, transparent .0085%),
        repeating-conic-gradient(#FFF 0%, transparent 0.0005%, transparent 0.0015%, transparent 0.065%);
      animation: grain 0.5s steps(1) infinite; mix-blend-mode:overlay;
    }
    @keyframes grain { 0%{transform:translate(0,0)} 100%{transform:translate(-1%,1%)} }
    .dirt::after {
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(circle at 15% 20%, rgba(255,255,255,.05) 0 1px, transparent 2px) 0 0/140px 140px,
        radial-gradient(circle at 80% 70%, rgba(255,255,255,.05) 0 1px, transparent 2px) 0 0/170px 170px,
        radial-gradient(circle at 30% 85%, rgba(255,255,255,.04) 0 1px, transparent 2px) 0 0/200px 200px;
      opacity:.35; filter: blur(.2px); mix-blend-mode: screen;
    }

    /* Hide app UI until splashstart */
    body[data-state="splash"] .wrap,
    body[data-state="splash"] .topbar,
    body[data-state="splash"] #exitButton { display:none !important; }

    /* ===== QUIZ APP LAYOUT ===== */
    .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center}
    .exit-btn{position:fixed;top:20px;right:20px;width:120px;cursor:pointer;z-index:3000;user-select:none}
    .exit-btn img{width:100%;height:auto;display:block}
    .topbar{position:fixed;left:20px;top:20px;z-index:3000;display:flex;gap:8px;align-items:center}
    .navbtn, .btn-start, .next{background:#111;border:1px solid #999;color:#ddd;padding:8px 12px;cursor:pointer;text-transform:uppercase;font-size:12px;letter-spacing:.08em}
    .btn-start{display:none}
    .badge{background:#222;border:1px solid #555;color:#bbb;padding:4px 8px;font-size:12px}

    .stage{width:clamp(360px,var(--frame-scale),var(--frame-max));height:calc(clamp(360px,var(--frame-scale),var(--frame-max))*9/16);
            margin-top:60px;position:relative;overflow:hidden;background:#111;border:4px solid var(--border);box-shadow:0 0 40px #000}
    .stage:after{content:"";position:absolute;inset:0;background:repeating-linear-gradient(0deg,rgba(255,255,255,.03) 0 1px,transparent 1px 3px);mix-blend-mode:overlay;pointer-events:none}
    .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.15;filter:contrast(.9) brightness(.9)}

    .location-figure{position:relative;margin:0;display:block;z-index:1;background:transparent;}
    .location-image{display:block;width:100%;height:auto;object-fit:cover;}
    .location-caption{position:absolute;left:0;right:0;bottom:0;display:block;text-align:center;font-size:12px;color:#eee;background:linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.65));padding:6px 8px;backdrop-filter:blur(1px);pointer-events:none;}

    .score-anim{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;z-index:3;display:none}

    .prompt-timer{width:clamp(360px,var(--frame-scale),var(--frame-max));display:flex;justify-content:space-between;align-items:center;gap:12px;margin:12px 0 0}
    .question-text { font-family: 'AdvercaseBold', sans-serif !important; font-size: clamp(14px, 3.2vmin, 18px); flex: 1; }
    .time-area{display:flex;align-items:center;gap:10px}
    .time-text{opacity:.9}
    .second{font-weight:700}
    .time-line-wrap{width:clamp(360px,var(--frame-scale),var(--frame-max));height:6px;background:#1a1a1a;border:1px solid #333;margin-top:8px}
    .time-line{position:relative;height:100%;width:100%;background:#1a1a1a;overflow:hidden}
    .time-fill{position:absolute;left:0;top:0;bottom:0;width:0%;background:#dcdcdc;transition:width .02s linear}

    .option-list{width:clamp(360px,var(--frame-scale),var(--frame-max));display:grid;grid-template-columns:1fr;gap:12px;margin:12px 0 28px}
    @media (min-width:700px){ .option-list{grid-template-columns:1fr 1fr} }
    .option {
  font-family: 'AdvercaseRegular', sans-serif !important;
  background:#111;
  border:2px solid #dcdcdc;
  color:#f5f5f5;
  padding:12px 14px;
  font-size:clamp(14px,3.6vmin,20px);
  letter-spacing:.04em;
  text-transform:uppercase;
  cursor:pointer;
  box-shadow:0 6px 24px rgba(0,0,0,.35), inset 0 0 18px rgba(255,255,255,.03);
}
    .option:hover{background:#141414}
    .option.correct{border-color:#5ad175}
    .option.incorrect{border-color:#d15a5a}
    .option.disabled{pointer-events:none;opacity:.7}
    .icon{float:right;margin-left:8px;opacity:.9}

    .quiz-box{display:none;flex-direction:column;align-items:center}
    .quiz-box.active{display:flex}

    /* Loader overlay */
    .loading{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);z-index:4500}
    .loading.show{display:flex}
    .spinner{width:56px;height:56px;border:4px solid #bdbdbd;border-top-color:#fff;border-radius:50%;animation:spin 0.8s linear infinite;filter:drop-shadow(0 0 8px rgba(255,255,255,.35));}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* In-frame EXIT overlay */
    .screen-overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:4000}
    .screen-overlay.show{display:flex}
    .screen-overlay .panel{position:relative;width:100%;height:100%;overflow:hidden;background:#000}
    .screen-overlay .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    .cta-row{
      position:absolute;left:50%;top:48%;transform:translate(-50%,-50%);
      display:flex;gap:10%;align-items:center;justify-content:center;width:min(80%,960px)
    }
    .inter-btn{background:none;border:none;padding:0;margin:0;cursor:pointer}
    .inter-btn img{height:clamp(9vmin,11vmin,120px);width:auto;display:block;filter:drop-shadow(0 2px 6px #0008)}
  
    /* Big countdown number outside the frame (top-center) */
    .big-count {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'LeagueGothic', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-size: clamp(36px, 12vmin, 120px);
      line-height: 1;
      letter-spacing: .02em;
      color: #ededed;
      text-shadow: 0 6px 24px rgba(0,0,0,.85);
      z-index: 4800;
      display: none;
      pointer-events: none;
      user-select: none;
    }
    
    /* ===== RESULT OVERLAY (CORRECT / WRONG) ===== */
    .result-overlay{
      position:absolute; inset:0;
      background:rgba(0,0,0,.72);
      display:none; align-items:center; justify-content:center;
      z-index:3500; /* above stage content, below exit/intermission */
      pointer-events:none; /* allow tap-anywhere listener to still work */
    }
    .result-overlay.show{ display:flex; }
    .result-overlay .result-text{
      font-family: 'LeagueGothic', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-size: clamp(42px, 12vmin, 160px);
      letter-spacing: .06em;
      color:#ffffff;
      text-shadow: 0 10px 32px rgba(0,0,0,.8);
      user-select:none;
    }
    .result-overlay.correct .result-text{ color:#5ad175; }
    .result-overlay.wrong .result-text{ color:#d15a5a; }

/* ===== Result overlay subtext + fades ===== */
.result-overlay .result-sub{
  margin-top: clamp(8px, 1.8vmin, 16px);
  max-width: min(90%, 920px);
  margin-left: auto; margin-right: auto;
  text-align: center;
  font-size: clamp(12px, 2.4vmin, 18px);
  line-height: 1.25;
  color: #e7e7e7;
  text-shadow: 0 6px 20px rgba(0,0,0,.7);
  user-select: none;
}
.result-overlay .result-text,
.result-overlay .result-sub { opacity: 0; transition: opacity 0.8s ease-in; }
.result-overlay.show .result-text,
.result-overlay.show .result-sub { opacity: 1; }
.result-overlay { opacity: 0; transition: opacity 0.5s ease; }
.result-overlay.show { opacity: 1; }
.result-overlay.hiding { opacity: 0; }

/* __HEADLINE_FALLBACK__ */
:root {
  --headline-font: 'LeagueGothic', Impact, 'Anton', 'Arial Black', system-ui, sans-serif;
}
.result-overlay .result-text,
.result-overlay .result-sub,
h1, .big-title {
  font-family: var(--headline-font);
}

/* __RESULT_TEXT_IMAGE__ */
.result-overlay .result-text{
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  width: 100%;
  height: 30vmin;
  text-indent: -9999px;
}


#timer{position:absolute;top:-40px;left:50%;transform:translateX(-50%);font-size:20px;font-weight:bold;color:#fff;background:rgba(0,0,0,0.6);padding:4px 10px;border-radius:6px;z-index:10;}

#camera-body,
#reel-1,
#reel-2 {
  fill: #D9A521;
  fill-opacity: 0.95;
  stroke: none;
}

#camera-loader {
  display: block;
  margin: auto;
}


.stage-loader {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.65); /* optional dark overlay */
  z-index: 5000;
}
.stage-loader svg {
  width: 120px;
  height: auto;
}


.next-count{
  position:absolute;
  top:8px;
  right:10px;
  background:rgba(0,0,0,0.6);
  color:#fff;
  padding:4px 10px;
  border:1px solid #333;
  border-radius:6px;
  font-weight:700;
  font-size:14px;
  letter-spacing:.02em;
  z-index:5001; /* above stage content, below intermission overlay */
}
@media (min-width: 900px){
  .next-count{ font-size:16px; padding:6px 12px; }
}


/* === Designed question badge (clapperboard style) === */
.qbadge{
  position:absolute;
  top:10px; left:10px;
  z-index:3200;
  transform: rotate(-2deg);
  user-select:none;
}
.qbadge-top{
  height:14px; width:100%;
  background: repeating-linear-gradient(135deg, #fff 0 12px, #000 12px 24px);
  border:1px solid #222;
  border-bottom:none;
  box-shadow:0 3px 10px rgba(0,0,0,.35);
}
.qbadge-body{
  min-width:120px;
  padding:8px 12px;
  background:#0b0b0b;
  color:#f2f2f2;
  border:1px solid #222;
  font-family: var(--headline-font, system-ui, sans-serif);
  font-weight:800;
  letter-spacing:.06em;
  text-align:center;
  box-shadow:0 8px 22px rgba(0,0,0,.45), inset 0 0 18px rgba(255,255,255,.04);
}
.qbadge .qnum{ font-size: clamp(14px, 3.2vmin, 22px); }

/* Top ribbon progress integrated into frame */
.qprogress{
  position:absolute;
  inset:0 auto auto 0;
  height:6px;
  width:100%;
  background: rgba(255,255,255,0.04);
  border-bottom:1px solid rgba(255,255,255,0.08);
  z-index: 3100;
}
.qprogress-fill{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, #e7e7e7, #bdbdbd);
  box-shadow: 0 0 14px rgba(255,255,255,.25);
  transition: width .25s ease;
}

/* Hide old top-left badge and the whole .topbar for kiosk */
.topbar{ display:none !important; }


.quiz-logo {
  margin-top: 5px;
  margin-bottom: 0px;
  display: flex;
  justify-content: center;
  width: 100%;
  z-index: 2000;
}
.quiz-logo img {
  max-height: 180px;
  width: auto;
  object-fit: contain;
  filter: drop-shadow(0 4px 12px #000a);
}


/* === Two-column overlay layout (Short left, Did You Know right) === */
#resultOverlay .cols{display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:start}
@media(max-width:800px){#resultOverlay .cols{grid-template-columns:1fr}}
#resultOverlay .col{min-width:0}
#resultOverlay #result-fact{white-space:pre-line;font-size:clamp(12px,2.2vmin,18px);line-height:1.35}
#resultOverlay .dky-header{display:block;width:100%;max-width:360px;height:auto;margin:0 0 12px 0;opacity:.95}
#resultOverlay .result-sub{white-space:pre-line}


/* === Overlay typography polish: justify and tighten spacing === */
#resultOverlay .col-left .result-title,
#resultOverlay .col-left .result-text { margin: 0 0 6px 0 !important; }

#resultOverlay .col-right .dky-header { margin: 0 0 6px 0 !important; }

#resultOverlay .result-sub,
#resultOverlay #result-fact {
  margin-top: 0 !important;
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
  line-height: 1.35;
  font-size: clamp(13px, 2.2vmin, 18px);
}

/* Keep columns visually aligned */
#resultOverlay .cols { align-items: start; }


/* Timer font styles */
.time-text {
  font-family: 'AdvercaseRegular', sans-serif !important;
}

.second {
  font-family: 'AdvercaseBold', sans-serif !important;
}


.qbadge .qnum {
  font-family: 'SinkFont', sans-serif !important;
}


/* Alignment fix for CUT! and Did You Know? */
#resultOverlay .cols {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  align-items: start;
}
#resultOverlay .col-left .result-text,
#resultOverlay .col-left .result-sub,
#resultOverlay .col-right .dky-header,
#resultOverlay .col-right #result-fact {
  margin-top: 0 !important;
}


/* Balance CUT! and Did You Know? columns */
#resultOverlay .col-left,
#resultOverlay .col-right {
  padding: 20px;
  box-sizing: border-box;
}
#resultOverlay .col-left {
  background-color: transparent !important;
}
#resultOverlay .col-right {
  background-color: black !important;
}


/* Top right controls: logo above exit */
#topRightControls {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  position: absolute;
  top: 10px;
  right: 10px;
}
#topRightControls #reelLogo {
  order: 0;
}
#topRightControls #exitButton {
  order: 1;
}


/* === Top-right logo + Exit stacking (explicit) === */
:root { --logoH: 140px; }

.quiz-logo {
  position: fixed !important;
  top: 10px !important;
  right: 10px !important;
  left: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  width: auto !important;
  display: flex !important;
  justify-content: flex-end !important;
  align-items: flex-start !important;
  z-index: 4000 !important;
  pointer-events: none; /* logo is decorative; remove if you need clicks */
}
.quiz-logo img {
  max-height: var(--logoH) !important;
  height: var(--logoH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
  pointer-events: auto; /* allow clicks on exit below without blocking */
}

/* removed legacy global #exitButton.exit-btn rule to allow HUD stack */


/* === Top-left logo, top-right exit === */
.quiz-logo {
  position: fixed !important;
  top: 10px !important;
  left: 10px !important;
  right: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  width: auto !important;
  display: flex !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
  z-index: 4000 !important;
}
.quiz-logo img {
  max-height: 100px !important;
  height: auto !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* removed legacy global #exitButton.exit-btn rule to allow HUD stack */


@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#scoreDisplay, .score-text {
  font-family: 'StandingRoomOnlyNF', sans-serif !important;
  font-size: 22px;
  letter-spacing: 1px;
}


@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('./fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#scoreDisplay,
.score-text,
div[id*="score"],
p[id*="score"] {
  font-family: 'StandingRoomOnlyNF', sans-serif !important;
  font-size: 28px !important;
  color: #f5d75c !important; /* vintage gold */
  text-shadow: 2px 2px 0px #000, -1px -1px 0px #000;
  letter-spacing: 1px;
  text-align: center;
}


/* --- Force StandingRoomOnlyNF for Score --- */
@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('font/StandingRoomOnlyNF.woff2') format('woff2'),
       url('./font/StandingRoomOnlyNF.woff2') format('woff2'),
       url('fonts/StandingRoomOnlyNF.woff2') format('woff2'),
       url('./fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* Very high-specificity selectors to override any existing font-family */
html body #scoreDisplay,
html body .score-text,
html body #finalScore,
html body .final-score,
html body .score,
html body [id*="score"],
html body [id*="Score"],
html body [class*="score"],
html body [class*="Score"] {
  font-family: 'StandingRoomOnlyNF' !important;
  font-size: 30px !important;
  color: #f5d75c !important;
  text-shadow: 2px 2px 0 #000, -1px -1px 0 #000 !important;
  letter-spacing: 0.5px !important;
}


/* --- Make Score font 3x bigger --- */
html body #scoreDisplay,
html body .score-text,
html body #finalScore,
html body .final-score,
html body .score,
html body [id*="score"],
html body [id*="Score"],
html body [class*="score"],
html body [class*="Score"] {
  font-size: 90px !important; /* 3x bigger */
  font-family: 'StandingRoomOnlyNF' !important;
  color: #f5d75c !important;
  text-shadow: 3px 3px 0 #000, -2px -2px 0 #000 !important;
  letter-spacing: 1px !important;
}


/* === Position final score under the screen frame === */
.final-score-out {
  width: clamp(360px, var(--frame-scale), var(--frame-max));
  margin: 24px auto 0 auto; /* top padding + centered */
  text-align: center;
}


/* === Position score midway between frame bottom and window bottom === */
.final-score-out {
  width: clamp(360px, var(--frame-scale), var(--frame-max));
  margin: 0 auto;               /* center horizontally */
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  top: 50%;                     /* move halfway down remaining space */
  transform: translateY(-50%);  /* adjust offset to center properly */
}


@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#splashOverlay .tap {
  font-family: 'StandingRoomOnlyNF', sans-serif !important;
  font-size: min(9vmin, 64px);
  color: #f5d75c;
  text-shadow: 2px 2px 0px #000, -1px -1px 0px #000;
  letter-spacing: 0.06em;
  font-weight: normal !important;
}


/* === Instructions Modal (pre-quiz) === */
#instrModalOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none; /* shown programmatically */
  align-items: center;
  justify-content: center;
  z-index: 5000;
}

#instrModal {
  background: #111;
  border: 2px solid #333;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  border-radius: 14px;
  max-width: min(720px, 92vw);
  width: 92vw;
  padding: clamp(16px, 3.5vmin, 28px);
  color: #f5d75c;
  font-family: 'StandingRoomOnlyNF', sans-serif;
  text-align: center;
  position: relative;
}

#instrModal h2 {
  font-size: clamp(22px, 3vmax, 34px);
  margin: 0 0 8px 0;
  letter-spacing: 0.04em;
  text-shadow: 2px 2px 0 #000;
}

#instrModal p {
  font-size: clamp(16px, 2.2vmax, 22px);
  line-height: 1.35;
  color: #ffeaa0;
  margin: 8px 0 0 0;
  text-shadow: 1px 1px 0 #000;
}

#instrClose {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: #f5d75c;
  color: #000;
  border: none;
  font-weight: bold;
  font-family: inherit;
  cursor: pointer;
  box-shadow: 2px 2px 0 #000;
}
#instrClose:active { transform: translateY(1px); }


@font-face {
  font-family: 'AdvercaseBold';
  src: url('fonts/AdvercaseFont-Demo-Bold.woff2') format('woff2');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'AdvercaseRegular';
  src: url('fonts/AdvercaseFont-Demo-Regular.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#instrModal h2 {
  font-family: 'AdvercaseBold', sans-serif !important;
  font-size: clamp(22px, 3vmax, 34px);
  margin: 0 0 8px 0;
  letter-spacing: 0.04em;
  text-shadow: 2px 2px 0 #000;
}

#instrModal p {
  font-family: 'AdvercaseRegular', sans-serif !important;
  font-size: clamp(16px, 2.2vmax, 22px);
  line-height: 1.35;
  color: #ffeaa0;
  margin: 8px 0 0 0;
  text-shadow: 1px 1px 0 #000;
}

#instrClose {
  font-family: 'AdvercaseBold', sans-serif !important;
  font-size: 22px;
}


.help-link {
  font-family: 'AdvercaseRegular', sans-serif;
  font-size: 14px;
  color: #f5d75c;
  text-shadow: 1px 1px 0 #000;
  margin-top: 6px;
  cursor: pointer;
  text-align: left;
}
.help-link:hover {
  text-decoration: underline;
}


/* === Help/Instructions Modal mirrors main instructions modal === */
#instrHelpOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 5000;
}
#instrHelpModal {
  background: #111;
  border: 2px solid #333;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  border-radius: 14px;
  max-width: min(720px, 92vw);
  width: 92vw;
  padding: clamp(16px, 3.5vmin, 28px);
  color: #f5d75c;
  font-family: 'AdvercaseRegular', sans-serif;
  text-align: center;
  position: relative;
}
#instrHelpModal h2 {
  font-family: 'AdvercaseBold', sans-serif;
  font-size: clamp(22px, 3vmax, 34px);
  margin: 0 0 8px 0;
  letter-spacing: 0.04em;
  text-shadow: 2px 2px 0 #000;
}
#instrHelpModal p {
  font-family: 'AdvercaseRegular', sans-serif;
  font-size: clamp(16px, 2.2vmax, 22px);
  line-height: 1.35;
  color: #ffeaa0;
  margin: 8px 0 0 0;
  text-shadow: 1px 1px 0 #000;
}
#instrHelpClose {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: #f5d75c;
  color: #000;
  border: none;
  font-weight: bold;
  font-family: 'AdvercaseBold', sans-serif;
  cursor: pointer;
  box-shadow: 2px 2px 0 #000;
}
#instrHelpClose:active { transform: translateY(1px); }


/* Hide Help/Instructions link */
#helpLink { display: none !important; }


/* Use image for Tap to Start */
#splashOverlay .tap { display:flex; align-items:center; justify-content:center; }
#splashOverlay .tap .tap-img { display:block; max-width:min(70vw, 520px); width:100%; height:auto; }


/* Style for How to Play image */
.howto-img {
  display: block;
  max-width: min(70%, 520px);
  width: 100%;
  height: auto;
  margin: 0 auto 12px auto;
}


/* --- ReelX close button (responsive) --- */
#instrClose, #instrHelpClose, #instructionsClose, #exitClose, .close-btn-img {
  position: absolute !important;
  top: 12px !important;
  right: 16px !important;
  background: none !important;
  border: none !important;
  padding: 0 !important;
  cursor: pointer !important;
  width: clamp(28px, 5vw, 40px) !important;
  height: clamp(28px, 5vw, 40px) !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  color: transparent !important;
  font-size: 0 !important;
}
#instrClose img, #instrHelpClose img, #instructionsClose img, #exitClose img, .close-btn-img img {
  display: block !important;
  width: 100% !important;
  height: auto !important;
}


/* Help Instructions button at top center */
#helpButtonContainer {
  position: absolute;
  top: 15px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
}
#helpButton {
  width: clamp(120px, 18vw, 200px);
  height: auto;
  cursor: pointer;
}


/* Score color matches loader yellow */
#score, .scoreText {
  color: #D9A521 !important;
}


/* === Header bar & layout spacing === */
:root { --header-h: 96px; }

#globalHeader{
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--header-h);
  background: linear-gradient(180deg, rgba(0,0,0,0.75) 0%, rgba(0,0,0,0.55) 60%, rgba(0,0,0,0) 100%);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  z-index: 450;   /* sits behind controls but above bg */
  pointer-events: none; /* do not block clicks on buttons */
}

/* Move quiz "screen" and Q/A down so they clear the header */
#screenFrame,
#question-container,
#options {
  margin-top: calc(var(--header-h) - 24px);
}

/* Keep existing top buttons within the visual header */
#helpButtonContainer { top: 12px; z-index: 1000; }
#exitButton, #exitBtn, #exit { top: 12px; } /* fallbacks if used */


/* === Header spacing fix: push entire page content below header === */
:root { --header-h: 96px; } /* keep in sync with header height */

/* Push everything down uniformly so the screen frame can't overlap */
body { padding-top: var(--header-h); }

/* Neutralize previous per-section margins to avoid double spacing */
#screenFrame, #question-container, #options {
  margin-top: 0 !important;
}

/* Keep header non-blocking */
#globalHeader { pointer-events: none; z-index: 450; }

/* ===== Next <style> block ===== */

.back-arrow {
    position: absolute;
    top: 2.5%;
    left: 2.8%;
    width: 42px;
    height: 42px;
    border: none;
    background: #0000;
    color: #fff;
    cursor: pointer;
    font-size: 28px;
    line-height: 1;
    z-index: 4601; /* above intermission bg */
  }
  .back-arrow:after {
    content: "←";
    font-weight: bold;
    text-shadow: 0 2px 8px rgba(0,0,0,.7);
  }

/* __RESULT_TEXT_IMAGE__ */
.result-overlay .result-text{
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  width: 100%;
  height: 30vmin;
  text-indent: -9999px;
}

/* ===== Next <style> block ===== */

/* Fullscreen black backdrop */
  #idleOverlay {
    position: fixed; inset: 0;
    background: #000;
    display: none; align-items: center; justify-content: center;
    z-index: 7000;
  }
  #idleOverlay.show { display: flex; }

  /* Center dialog (keepgoing.png) */
  #idleDialog {
    position: relative;
    width: min(70vw, 560px);
    max-width: 80vw;
    aspect-ratio: 720 / 972;
  }
  #idleDialog img.keepgoing {
    position: absolute; inset: 0;
    width: 100%; height: 100%; object-fit: contain;
    filter: drop-shadow(0 8px 24px rgba(0,0,0,.45));
    pointer-events: none;
  }
  /* Countdown text on dialog */
  #idleCountdown {
    position: absolute; bottom: 6%; left: 50%; transform: translateX(-50%);
    font-family: 'LeagueGothic', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    font-size: clamp(34px, 10vmin, 96px);
    letter-spacing: .02em;
    color: #111; -webkit-text-stroke: 1.5px #fff; text-shadow: 0 3px 18px rgba(0,0,0,.6);
    pointer-events: none;
  }

  /* TAP ANYWHERE bottom-right (slow blink) */
  #idleTap {
    position: fixed;
    right: clamp(12px, 4vw, 28px);
    bottom: clamp(12px, 4vw, 28px);
    width: min(28vw, 320px);
    height: auto;
    pointer-events: none;
    z-index: 7100;
    filter: drop-shadow(0 6px 18px rgba(0,0,0,.65));
    animation: tapBlink 1.6s ease-in-out infinite;
    opacity: .85;
  }
  @keyframes tapBlink { 0%,100% { opacity:.25 } 50% { opacity:.9 } }

/* __RESULT_TEXT_IMAGE__ */
.result-overlay .result-text{
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  width: 100%;
  height: 30vmin;
  text-indent: -9999px;
}


/* Did You Know fact block */
#resultOverlay .result-fact, .result-overlay .result-fact {
  color: #fff;
  font: 400 1.05rem/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  margin-top: 8px;
  text-wrap: balance;
}
#resultOverlay .col-right, .result-overlay .col-right { text-align: center; }
#resultOverlay .col-right .dky-header, .result-overlay .col-right .dky-header {
  max-width: 60%;
  height: auto;
  display: block;
  margin: 0 auto 8px auto;
  object-fit: contain;
}


/* === Advercase webfont integration === */
@font-face{
  font-family: "Advercase";
  src: url("fonts/AdvercaseFont-Demo-Regular.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face{
  font-family: "Advercase";
  src: url("fonts/AdvercaseFont-Demo-Bold.woff2") format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* Unify SHORT + DID YOU KNOW text styles (vintage ad feel) */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif;
  font-weight: 400;
  letter-spacing: 0.02em;
  font-size: clamp(20px, 2.8vmin, 34px);
  line-height: 1.55;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: justify;
  text-wrap: pretty;
}

/* Center the DID YOU KNOW header image and size it sensibly */
#resultOverlay .col-right .dky-header,
.result-overlay .col-right .dky-header {
  display: block;
  margin: 0 auto 10px auto;
  max-width: 55%;
  height: auto;
  object-fit: contain;
}

/* Basic two-column overlay layout compatibility */
#resultOverlay .col,
.result-overlay .col { box-sizing: border-box; padding: 0 1rem; }
#resultOverlay .col-right,
.result-overlay .col-right { text-align: center; }


/* Adjust text alignment and spacing */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact {
  text-align: left;     /* justified left */
}

#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact {
  padding-right: 2rem;  /* add right padding */
}


/* === Split font styling for Short vs Did You Know === */

/* SHORT text column (left) */
#resultOverlay .result-sub,
.result-overlay .result-sub {
  font-family: Georgia, "Times New Roman", serif;
  font-weight: 400;
  font-size: clamp(20px, 2.4vmin, 30px);
  line-height: 1.5;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

/* DID YOU KNOW text column (right) */
#resultOverlay .result-fact,
.result-overlay .result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif;
  font-weight: 400;
  font-size: clamp(20px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
  padding-right: 2rem;
}


/* === Unified Advercase styling for both Short + Did You Know === */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif;
  font-weight: 400;
  font-size: clamp(22px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact {
  padding-right: 2rem;
}


/* === Force Advercase font on both Short + Did You Know text === */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif !important;
  font-weight: 400;
  font-size: clamp(22px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  padding-right: 2rem;
}


/* === Corrected unified Advercase styling === */

/* Shared styling for both text columns */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif !important;
  font-weight: 400;
  font-size: clamp(22px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

/* Only add right padding on the DID YOU KNOW fact (right column) */
#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  padding-right: 2rem;
}


/* Right column solid black background */
#resultOverlay .col-right,
.result-overlay .col-right {
  background: #000;
  border-radius: 0 20px 20px 0; /* rounded only on right edge if container is rounded */
  padding: 2rem;
  box-sizing: border-box;
}


/* Align both columns' text to the top */
#resultOverlay .col-left,
#resultOverlay .col-right,
.result-overlay .col-left,
.result-overlay .col-right {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

/* ===== Next <style> block ===== */

.howto-img {
  display: block;
  max-width: min(70%, 520px);
  width: 100%;
  height: auto;
  margin: 0 auto 12px auto;
}

/* === Inline style patch (auto-extracted) === */
/* Extracted from inline style="..." attributes */
.inline1 {position:relative;display:inline-block;width:100%;}
.inline2 {width:0%}
.inline3 {display:none}
.inline4 {display:none}
.inline5 {display:none}
.inline6 {display:none;}



/* === Header image normalization === */
:root { --headerH: 96px; } /* tweak this once to change all header image heights */

.quiz-logo img,
#exitButton img,
#helpButton {
  height: var(--headerH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* keep header elements clear of each other and aligned */
.quiz-logo {
  position: fixed !important;
  top: 10px !important;
  left: 10px !important;
  z-index: 4000 !important;
}

/* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

#helpButtonContainer {
  position: fixed !important;
  top: 10px !important;
  right: calc(10px + var(--headerH) + 12px) !important; /* push left of exit button */
  z-index: 4000 !important;
}

/* optional: responsive shrink for smaller viewports */
@media (max-width: 640px) {
  :root { --headerH: 72px; }
}

/* === Header bar rules merged in === */
/* === Header bar layout === */
:root { --headerH: 96px; } /* adjust once for all three */

.header-bar {
  position: fixed;
  top: 10px;
  left: 10px;
  right: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 4000;
}

.header-bar img {
  height: var(--headerH);
  width: auto;
  object-fit: contain;
  display: block;
}

.header-actions {
  display: flex;
  gap: 12px;
  align-items: center;
}

/* === HUD Stack (top-right: Logo, HI, Exit) === */
:root { --hudH: 96px; } /* shared height for stack items */

.hud-stack {
  position: fixed;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  z-index: 5000;
}

/* neutralize previous fixed positions inside the stack */
.hud-stack .quiz-logo,
.hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* ensure consistent height for images */
.hud-stack img {
  height: var(--hudH);
  width: auto;
  object-fit: contain;
  display: block;
}

/* optional: make Exit button not stretch */
.hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* responsive tweak */
@media (max-width: 640px) {
  :root { --hudH: 72px; }
}


/* === Force Exit to participate in the HUD stack (wins over legacy fixed rules) === */
body .hud-stack #exitButton.exit-btn,
body .hud-stack #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  top: auto !important;
  right: auto !important;
  bottom: auto !important;
  left: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

body .hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */


/* === HUD Stack v3: force column order + nuke legacy positioning === */
body .hud-stack { display:flex !important; flex-direction:column !important; align-items:flex-end !important; gap:8px !important; }
body .hud-stack .quiz-logo,
body .hud-stack #helpButton,
body .hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* explicit order: 1 Logo, 2 HI, 3 Exit */
body .hud-stack .quiz-logo { order: 1 !important; }
body .hud-stack #helpButton { order: 2 !important; }
body .hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* reset positioning on all descendants so nothing fights the stack */
body .hud-stack .quiz-logo,
body .hud-stack .quiz-logo *,
body .hud-stack #helpButton,
body .hud-stack #exitButton.exit-btn,
body .hud-stack #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  top: auto !important; right: auto !important; bottom: auto !important; left: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

/* guarantee uniform height */
:root { --hudH: 96px; }
body .hud-stack img { height: var(--hudH) !important; width: auto !important; object-fit: contain !important; display: block !important; }



/* Ensure Exit participates in the HUD stack */
.hud-stack #exitButton.exit-btn {
  position: static;
  top: auto; right: auto; bottom: auto; left: auto;
  margin: 0;
}

/* === HUD stack v4: force elements into the stack and neutralize legacy positioning === */
.hud-stack {
  position: fixed;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  z-index: 5000;
}

.hud-stack .quiz-logo,
.hud-stack .quiz-logo *,
.hud-stack #helpButton,
.hud-stack #exitButton.exit-btn,
.hud-stack #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  top: auto !important; right: auto !important; bottom: auto !important; left: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

:root { --hudH: 96px; }
.hud-stack img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* explicit ordering */
.hud-stack .quiz-logo { order: 1 !important; }
.hud-stack #helpButton { order: 2 !important; }
.hud-stack #exitButton.exit-btn { order: 3 !important; }

/* === HUD: Left (logo) + Right stack (Exit → HI) === */
:root { --hudH: 96px; --hudGap: 8px; }

/* Left logo (top-left) */
.hud-left {
  position: fixed;
  top: 10px;
  left: 10px;
  display: flex;
  align-items: flex-start;
  z-index: 5000;
}
.hud-left .quiz-logo,
.hud-left .quiz-logo * {
  position: static !important;
  inset: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}
.hud-left .quiz-logo img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* Right column: Exit on top, HI below */
.hud-right /* deprecated in left-stack */ {
  position: fixed;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: var(--hudGap);
  z-index: 5000;
}

.hud-right /* deprecated in left-stack */ #exitButton.exit-btn,
.hud-right /* deprecated in left-stack */ #exitButton.exit-btn *,
.hud-right /* deprecated in left-stack */ #helpButton {
  position: static !important;
  inset: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

.hud-right /* deprecated in left-stack */ img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* Explicit vertical order: Exit (1) → HI (2) */
.hud-right /* deprecated in left-stack */ #exitButton.exit-btn { order: 1 !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; padding: 0 !important; background: transparent !important; border: 0 !important; }
.hud-right /* deprecated in left-stack */ #helpButton { order: 2 !important; cursor: pointer; }

@media (max-width: 640px) {
  :root { --hudH: 78px; }
  .hud-left { top: 8px; left: 8px; }
  .hud-right /* deprecated in left-stack */ { top: 8px; right: 8px; }
}


/* === v1.1: HI half the size === */
.hud-right /* deprecated in left-stack */ #helpButton {
  height: calc(var(--hudH) * 0.5) !important;
  width: auto !important;
  align-self: flex-end;
}


/* === v1.2: Hide logo (left) and HI during Splash === */
body.splash-active .hud-left { display: none !important; }
body.splash-active .hud-right /* deprecated in left-stack */ #helpButton { display: none !important; }

/* === HUD: Left single stack (Logo → HI → Exit) === */
:root { --hudH: 96px; --hudGap: 10px; }

/* Left stack container at top-left */
.hud-left {
  position: fixed;
  top: 10px;
  left: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--hudGap);
  z-index: 5000;
}

/* Ensure all three items participate in flow with no legacy positioning */
.hud-left .quiz-logo,
.hud-left .quiz-logo *,
.hud-left #helpButton,
.hud-left #exitButton.exit-btn,
.hud-left #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

/* Image sizing */
.hud-left img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* Order: logo (1) → HI (2) → Exit (3) */
.hud-left .quiz-logo { order: 1 !important; }
.hud-left #helpButton { order: 2 !important; }
.hud-left #exitButton.exit-btn { order: 3 !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; padding: 0 !important; background: transparent !important; border: 0 !important; }

/* Hide HI and logo during splash (keep Exit visible) */
body.splash-active .hud-left .quiz-logo,
body.splash-active .hud-left #helpButton { display: none !important; }

/* Optional: small-screen reduction */
@media (max-width: 640px) {
  :root { --hudH: 78px; --hudGap: 8px; }
  .hud-left { top: 8px; left: 8px; }
}


/* === v1.1: Order Logo → Exit → HI === */
.hud-left .quiz-logo { order: 1 !important; }
.hud-left #exitButton.exit-btn { order: 2 !important; }
.hud-left #helpButton { order: 3 !important; }


/* === v1.2: Keep left stack explicit and guard against duplicates visually */
.hud-left { display: flex; flex-direction: column; align-items: flex-start; }

/* === Pure Palette Theme === */
/* Reel to Real — Theme (Pure Palette Only)
   Uses ONLY your six colors and is tuned to sit nicely next to external purple or yellow‑orange elements
   without introducing new hues.
   Palette:
     Golden Yellow  #e3a73a
     Dark Brown     #2a211a
     Deep Teal      #2e4a3e
     Mustard        #b98a23
     Burnt Orange   #c2582e
     Cream          #f3e1b5
*/

:root {
  /* Base tokens */
  --golden:  #e3a73a;
  --brown:   #2a211a;
  --teal:    #2e4a3e;
  --mustard: #b98a23;
  --orange:  #c2582e;
  --cream:   #f3e1b5;

  /* App semantics (no new hues) */
  --bg:        var(--brown);
  --fg:        var(--cream);
  --link:      var(--teal);
  --accent:    var(--golden);  /* primary UI highlight */
  --accent-2:  var(--mustard); /* hover/secondary */
  --accent-3:  var(--orange);  /* warning/active */
  --surface:   #32271f;        /* brown + ~8% */
  --surface-2: #3b2e24;        /* brown + ~14% */
  --border:    #5a4a3c;        /* brown + ~30% */
  --shadow:    rgba(0,0,0,.33);
}

html, body {
  background: var(--bg);
  color: var(--fg);
}

/* Links stay teal to avoid warm-on-warm conflict next to yellow/orange neighbors */
a { color: var(--link); text-decoration-thickness: 2px; text-underline-offset: 2px; }
a:hover { color: var(--accent); }

/* Buttons — warm, but controlled */
button, .btn {
  background: var(--accent);
  color: #1b130e;
  border: 1px solid var(--border);
  padding: .6rem 1rem;
  border-radius: .55rem;
  box-shadow: 0 8px 18px var(--shadow);
  transition: transform .08s ease, background-color .12s ease;
}
button:hover, .btn:hover { background: var(--accent-2); }
button:active, .btn:active { background: var(--orange); transform: translateY(1px); }

/* Cards / panels */
.card, .panel, .surface {
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--fg);
  border-radius: 12px;
  box-shadow: 0 12px 28px var(--shadow);
}

/* HUD imagery */
.hud-left img, .hud-right img, .hud-stack img {
  filter: drop-shadow(0 2px 9px var(--shadow));
}

/* Splash stays black but gets a subtle warm vignette using ONLY your palette */
#splashOverlay {
  background:
    radial-gradient(1000px 520px at 20% 20%, rgba(227,167,58,0.12), transparent 60%),
    radial-gradient(1000px 520px at 80% 25%, rgba(194,88,46,0.10), transparent 60%),
    #000;
}

/* --- Utilities (pure palette) --- */
.bg-brown   { background: var(--brown)   !important; }
.bg-cream   { background: var(--cream)   !important; color: #1b130e !important; }
.bg-teal    { background: var(--teal)    !important; }
.bg-golden  { background: var(--golden)  !important; color: #1b130e !important; }
.bg-mustard { background: var(--mustard) !important; color: #1b130e !important; }
.bg-orange  { background: var(--orange)  !important; }

.text-brown   { color: var(--brown)   !important; }
.text-cream   { color: var(--cream)   !important; }
.text-teal    { color: var(--teal)    !important; }
.text-golden  { color: var(--golden)  !important; }
.text-mustard { color: var(--mustard) !important; }
.text-orange  { color: var(--orange)  !important; }

.border-brown   { border-color: var(--brown)   !important; }
.border-cream   { border-color: var(--cream)   !important; }
.border-teal    { border-color: var(--teal)    !important; }
.border-golden  { border-color: var(--golden)  !important; }
.border-mustard { border-color: var(--mustard) !important; }
.border-orange  { border-color: var(--orange)  !important; }

/* --- When adjacent to purple or yellow-orange (external elements) ---
   Use these helpers to keep separation purely with your palette.
*/
.separate-soft { box-shadow: 0 0 0 2px var(--surface), 0 10px 24px var(--shadow); } /* soft ring + shadow */
.separate-hard { box-shadow: 0 0 0 3px var(--border), 0 12px 28px var(--shadow); }  /* stronger ring */
.pad-cream     { background: var(--cream); color: #1b130e; padding: .4rem .6rem; border-radius: .4rem; }
.pad-brown     { background: var(--surface); padding: .4rem .6rem; border-radius: .4rem; }


/* === Reel2Real POP PACK (pure palette only) ===
   Goal: more contrast, more “pop”, still using only your six colors.
   Controls:
     --popShadow: overall shadow strength
     --popGlow:   neon-ish glow for accents
     --popSpeed:  animation timing
*/
:root {
  --popShadow: rgba(0,0,0,.55);
  --popGlow:   rgba(227, 167, 58, 0.55); /* golden glow */
  --popSpeed:  .16s;
}

/* Typography punch: subtle text-shadow on big headings */
h1, h2, .title, .headline {
  text-shadow: 0 2px 0 rgba(0,0,0,.25), 0 8px 22px var(--popShadow);
}

/* Links: bolder teal + animated underline in golden */
a {
  color: var(--teal);
  position: relative;
  text-decoration: none;
}
a::after {
  content: "";
  position: absolute;
  left: 0; bottom: -2px;
  width: 0%; height: 2px;
  background: var(--golden);
  transition: width var(--popSpeed) ease;
}
a:hover { color: var(--golden); }
a:hover::after { width: 100%; }

/* Buttons: glossy warm gradient + glow on hover */
button, .btn {
  background: linear-gradient(180deg, color-mix(in srgb, var(--golden) 92%, black), color-mix(in srgb, var(--mustard) 88%, black));
  color: #1b130e;
  border: 1px solid color-mix(in srgb, var(--mustard) 70%, black);
  box-shadow: 0 10px 26px var(--popShadow), inset 0 1px 0 rgba(255,255,255,.12);
  transform: translateZ(0);
  transition: transform var(--popSpeed) ease, box-shadow var(--popSpeed) ease, background-color var(--popSpeed) ease;
}
button:hover, .btn:hover {
  background: linear-gradient(180deg, var(--golden), var(--mustard));
  box-shadow: 0 14px 32px var(--popShadow), 0 0 0 3px rgba(227,167,58,0.18);
}
button:active, .btn:active {
  transform: translateY(1px);
  background: linear-gradient(180deg, var(--mustard), var(--orange));
}

/* Callout / chips: crisp cream pad with brown text (great on dark video) */
.pad-cream {
  background: var(--cream);
  color: #1b130e;
  border: 1px solid color-mix(in srgb, var(--cream) 45%, black);
  box-shadow: 0 8px 22px var(--popShadow);
}

/* Panels: deepen shadows and lift borders for contrast */
.card, .panel, .surface {
  background: var(--surface);
  border: 1px solid color-mix(in srgb, var(--border) 80%, var(--golden) 20%);
  box-shadow: 0 16px 36px var(--popShadow);
}

/* HUD: crisper edges with double shadow (inner highlight + outer drop) */
.hud-left img, .hud-right img, .hud-stack img {
  filter:
    drop-shadow(0 1px 0 rgba(255,255,255,.06))
    drop-shadow(0 10px 28px var(--popShadow));
}

/* Exit & HI: focus visibility and hover affordance without new colors */
#exitButton.exit-btn, #helpButton {
  outline: 0;
  transition: filter var(--popSpeed) ease, transform var(--popSpeed) ease;
}
#exitButton.exit-btn:hover, #helpButton:hover {
  filter: drop-shadow(0 0 0 rgba(0,0,0,0))
          drop-shadow(0 0 14px var(--popGlow))
          drop-shadow(0 12px 28px var(--popShadow));
  transform: translateY(-1px);
}

/* Splash: slightly brighter warm vignettes (no new hues) */
#splashOverlay {
  background:
    radial-gradient(1100px 560px at 18% 18%, rgba(227,167,58,0.18), transparent 62%),
    radial-gradient(1100px 560px at 78% 26%, rgba(194,88,46,0.14), transparent 62%),
    #000;
}

/* Decorative separators for section headings (pure palette) */
.rule-warm {
  height: 3px;
  background: linear-gradient(90deg, var(--orange), var(--golden) 55%, var(--mustard));
  border-radius: 2px;
  box-shadow: 0 6px 18px var(--popShadow);
  margin: .75rem 0 1.25rem;
}

/* Toggle “extra pop” via a class on <body>

<!-- R2R CONSOLIDATION: Unified HUD root -->
<div id="HUDRoot" data-hud></div>
 if desired */
body.pop-min a::after { display: none; }
body.pop-min button, body.pop-min .btn { box-shadow: 0 8px 20px var(--popShadow); }

/* === Theme v3 (new palette) === */
/* Reel to Real — Theme v3 (New Palette)
   From image: #DFAF2D #C24D39 #3E7784 #2C535C #1D1D1D
   Note: palette has no light swatch; using off‑white for text for contrast.
*/

:root {
  --sun:      #DFAF2D;
  --burnt:    #C24D39;
  --teal:     #3E7784;
  --deepteal: #2C535C;
  --ink:      #1D1D1D;

  /* semantics */
  --bg:     var(--ink);
  --fg:     #f6f3ee;         /* soft paper white for readable text */
  --link:   var(--teal);
  --accent: var(--sun);
  --accent-2: var(--burnt);
  --accent-3: var(--deepteal);
  --surface: #232323;        /* ink + ~6% */
  --surface-2: #2a2a2a;      /* ink + ~12% */
  --border:  #414141;
  --shadow:  rgba(0,0,0,.5);
}

html, body { background: var(--bg); color: var(--fg); }

a { color: var(--link); }
a:hover { color: var(--accent); }

button, .btn {
  background: linear-gradient(180deg, var(--accent), color-mix(in srgb, var(--accent) 75%, black));
  color: #1a1a1a;
  border: 1px solid color-mix(in srgb, var(--accent) 55%, black);
}
button:hover, .btn:hover { background: linear-gradient(180deg, var(--accent), var(--accent-2)); }
button:active, .btn:active { background: linear-gradient(180deg, var(--accent-2), var(--deepteal)); }

.card, .panel, .surface {
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--fg);
}

.hud-left img, .hud-right img, .hud-stack img {
  filter: drop-shadow(0 2px 10px var(--shadow));
}


/* === DID YOU KNOW wrapping fix === */
.dky-wrap {
  display: block;
  max-width: 100%;
}

.dky-header {
  float: left;
  width: clamp(180px, 30vmin, 420px);
  margin: 0 20px 14px 0;
  shape-outside: inset(0 round 8px);
  shape-margin: 6px;
}

.dky-wrap::after {
  content: "";
  display: block;
  clear: both;
}

#result-fact {
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
  font-size: clamp(16px, 2.5vmin, 22px);
  line-height: 1.4;
  color: #f7f7f7;
}


/* === Poster style for DID YOU KNOW? panel (teal/cream/rust) === */
:root {
  --poster-cream: #c24d39;
  --poster-rust: #B6532F;
  --poster-teal: #2B8076;
  --poster-ink: #1A1614;
}

/* Right-side panel styled like the reference poster */
#resultOverlay .col-right {
  background: #c24d39;
  color: #1d1d1d;
  padding: clamp(16px, 3vmin, 28px);
  width: min(38ch, 42vw);
  margin-left: auto;
  margin-right: clamp(16px, 6vw, 64px);
  box-shadow: 0 10px 28px rgba(0,0,0,.35);
}

/* Remove float wrapping for now; use poster block layout */
#resultOverlay .col-right .dky-header {
  float: none;
  display: block;
  width: 100%;
  max-width: none;
  margin: 0 0 clamp(10px, 2.2vmin, 16px) 0;
}

/* Fact text typography */
#resultOverlay #result-fact {
  color: #1d1d1d;
  font-family: 'AdvercaseRegular', Georgia, serif;
  font-size: clamp(18px, 2.6vmin, 26px);
  line-height: 1.25;
  letter-spacing: 0.01em;
}

/* Optional: left block in cream like poster */
#resultOverlay .col-left,
#resultOverlay .left-content {
  background: var(--poster-cream);
  color: var(--poster-ink);
}

/* Optional: headline color complement */
#resultOverlay .result-text {
  color: var(--poster-teal);
  text-shadow: none;
}


/* === CUT/PRINTIT left-half style === */
#resultOverlay .col-left,
#resultOverlay .left-content {
  background: rgba(249, 237, 219, 0.5);
  color: #1d1d1d;
}

#resultOverlay .col-left *,
#resultOverlay .left-content * {
  color: #1d1d1d;
}


/* ===== MERGED FROM: reel2real-hud-left-stack.pop.v2.poster.css ===== */

/* === Reel2Real: POP base + Theme v3 (merged) === */
/* === Reel2Real: left-stack v1.2 + pure palette theme (merged) === */
/* === Reel2Real merged stylesheet === */
/* Sink font */
@font-face {
  font-family: 'SinkFont';
  src: url('fonts/Sink.woff2') format('woff2');
  font-display: swap;
}


/* Advercase Regular */
@font-face {
  font-family: 'AdvercaseRegular';
  src: url('fonts/AdvercaseFont-Demo-Regular.woff2') format('woff2');
  font-display: swap;
}

/* Advercase Bold */
@font-face {
  font-family: 'AdvercaseBold';
  src: url('fonts/AdvercaseFont-Demo-Bold.woff2') format('woff2');
  font-display: swap;
}

    :root {
      --grade: contrast(1.06) brightness(.96) saturate(.9) sepia(.08);
      --frame-max:1280px;
      --frame-scale:96vmin;
      --border:#444;
      color-scheme: dark;
    }
    html, body { margin:0; height:100%; background:#000; color:#e6e6e6; font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif }

    /* League Gothic (expects fonts/LeagueGothic.woff2 in your project) */
    /* LeagueGothic font disabled to avoid missing file 404
@font-face{
      font-family: 'LeagueGothic';
      src: url('fonts/LeagueGothic.woff2') format('woff2');
      font-display: swap;
    }
*/

    /* ===== SPLASH OVERLAY ===== */
    #splashOverlay { position: fixed; inset: 0; background: #000; z-index: 1000; display: none; overflow:hidden; filter: var(--grade); }
    #splashOverlay.show { display: block; }
    #splashOverlay .bgvid { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; opacity:.92; }
    #splashOverlay .logo {
      position:absolute; inset:0; margin:auto; width:auto; height:min(36vh, 420px); max-width:90vw;
      object-fit:contain; filter: drop-shadow(0 8px 24px #000C); pointer-events:none;
    }
    #splashOverlay .tap {
      position:absolute; left:50%; bottom:12vh; transform:translateX(-50%);
      color:#EDEDED; text-shadow:0 2px 10px #000C; font-weight:800; letter-spacing:.06em;
      font-size:min(9vmin, 64px); opacity:.94; pointer-events:none; animation: tapPulse 1.6s ease-in-out infinite;
    }
    @keyframes tapPulse { 0%,100%{ transform:translateX(-50%) scale(1)} 50%{ transform:translateX(-50%) scale(1.02)} }
    .vignette, .light-leaks, .dirt, .shutter-flicker, .grain { position:absolute; inset:0; pointer-events:none; }
    .vignette { background: radial-gradient(120% 120% at 50% 50%, transparent 60%, rgba(0,0,0,.35) 85%, rgba(0,0,0,.75) 100%); mix-blend-mode:multiply; }
    .light-leaks::after { content:""; position:absolute; inset:-10%; background:
        linear-gradient(90deg, transparent 0%, rgba(255,200,0,.06) 30%, transparent 60%, rgba(255,0,64,.06) 85%, transparent 100%);
      animation: leaks 9s ease-in-out infinite; mix-blend-mode:screen; opacity:.6; }
    @keyframes leaks { 0%{transform:translateX(-10%) scale(1.02); opacity:.5} 50%{transform:translateX(10%) scale(1.02); opacity:.7} 100%{transform:translateX(-10%) scale(1.02); opacity:.5} }
    .shutter-flicker { animation: shutter 1.2s steps(2) infinite; }
    @keyframes shutter { 0%,100%{opacity:.9} 50%{opacity:1} }
    .grain::after {
      content:""; width:110%; height:110%; position:absolute; top:-5%; left:-5%; opacity:.18;
      background-image:
        repeating-conic-gradient(#FFF8 0%, transparent .0003%, transparent .0075%, transparent .0085%),
        repeating-conic-gradient(#FFF 0%, transparent 0.0005%, transparent 0.0015%, transparent 0.065%);
      animation: grain 0.5s steps(1) infinite; mix-blend-mode:overlay;
    }
    @keyframes grain { 0%{transform:translate(0,0)} 100%{transform:translate(-1%,1%)} }
    .dirt::after {
      content:""; position:absolute; inset:0;
      background:
        radial-gradient(circle at 15% 20%, rgba(255,255,255,.05) 0 1px, transparent 2px) 0 0/140px 140px,
        radial-gradient(circle at 80% 70%, rgba(255,255,255,.05) 0 1px, transparent 2px) 0 0/170px 170px,
        radial-gradient(circle at 30% 85%, rgba(255,255,255,.04) 0 1px, transparent 2px) 0 0/200px 200px;
      opacity:.35; filter: blur(.2px); mix-blend-mode: screen;
    }

    /* Hide app UI until splashstart */
    body[data-state="splash"] .wrap,
    body[data-state="splash"] .topbar,
    body[data-state="splash"] #exitButton { display:none !important; }

    /* ===== QUIZ APP LAYOUT ===== */
    .wrap{min-height:100vh;display:flex;flex-direction:column;align-items:center}
    .exit-btn{position:fixed;top:20px;right:20px;width:120px;cursor:pointer;z-index:3000;user-select:none}
    .exit-btn img{width:100%;height:auto;display:block}
    .topbar{position:fixed;left:20px;top:20px;z-index:3000;display:flex;gap:8px;align-items:center}
    .navbtn, .btn-start, .next{background:#111;border:1px solid #999;color:#ddd;padding:8px 12px;cursor:pointer;text-transform:uppercase;font-size:12px;letter-spacing:.08em}
    .btn-start{display:none}
    .badge{background:#222;border:1px solid #555;color:#bbb;padding:4px 8px;font-size:12px}

    .stage{width:clamp(360px,var(--frame-scale),var(--frame-max));height:calc(clamp(360px,var(--frame-scale),var(--frame-max))*9/16);
            margin-top:60px;position:relative;overflow:hidden;background:#111;border:4px solid var(--border);box-shadow:0 0 40px #000}
    .stage:after{content:"";position:absolute;inset:0;background:repeating-linear-gradient(0deg,rgba(255,255,255,.03) 0 1px,transparent 1px 3px);mix-blend-mode:overlay;pointer-events:none}
    .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;opacity:.15;filter:contrast(.9) brightness(.9)}

    .location-figure{position:relative;margin:0;display:block;z-index:1;background:transparent;}
    .location-image{display:block;width:100%;height:auto;object-fit:cover;}
    .location-caption{position:absolute;left:0;right:0;bottom:0;display:block;text-align:center;font-size:12px;color:#eee;background:linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.65));padding:6px 8px;backdrop-filter:blur(1px);pointer-events:none;}

    .score-anim{position:absolute;inset:0;width:100%;height:100%;object-fit:contain;z-index:3;display:none}

    .prompt-timer{width:clamp(360px,var(--frame-scale),var(--frame-max));display:flex;justify-content:space-between;align-items:center;gap:12px;margin:12px 0 0}
    .question-text { font-family: 'AdvercaseBold', sans-serif !important; font-size: clamp(14px, 3.2vmin, 18px); flex: 1; }
    .time-area{display:flex;align-items:center;gap:10px}
    .time-text{opacity:.9}
    .second{font-weight:700}
    .time-line-wrap{width:clamp(360px,var(--frame-scale),var(--frame-max));height:6px;background:#1a1a1a;border:1px solid #333;margin-top:8px}
    .time-line{position:relative;height:100%;width:100%;background:#1a1a1a;overflow:hidden}
    .time-fill{position:absolute;left:0;top:0;bottom:0;width:0%;background:#dcdcdc;transition:width .02s linear}

    .option-list{width:clamp(360px,var(--frame-scale),var(--frame-max));display:grid;grid-template-columns:1fr;gap:12px;margin:12px 0 28px}
    @media (min-width:700px){ .option-list{grid-template-columns:1fr 1fr} }
    .option {
  font-family: 'AdvercaseRegular', sans-serif !important;
  background:#111;
  border:2px solid #dcdcdc;
  color:#f5f5f5;
  padding:12px 14px;
  font-size:clamp(14px,3.6vmin,20px);
  letter-spacing:.04em;
  text-transform:uppercase;
  cursor:pointer;
  box-shadow:0 6px 24px rgba(0,0,0,.35), inset 0 0 18px rgba(255,255,255,.03);
}
    .option:hover{background:#141414}
    .option.correct{border-color:#5ad175}
    .option.incorrect{border-color:#d15a5a}
    .option.disabled{pointer-events:none;opacity:.7}
    .icon{float:right;margin-left:8px;opacity:.9}

    .quiz-box{display:none;flex-direction:column;align-items:center}
    .quiz-box.active{display:flex}

    /* Loader overlay */
    .loading{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.55);z-index:4500}
    .loading.show{display:flex}
    .spinner{width:56px;height:56px;border:4px solid #bdbdbd;border-top-color:#fff;border-radius:50%;animation:spin 0.8s linear infinite;filter:drop-shadow(0 0 8px rgba(255,255,255,.35));}
    @keyframes spin{to{transform:rotate(360deg)}}

    /* In-frame EXIT overlay */
    .screen-overlay{position:absolute;inset:0;display:none;align-items:center;justify-content:center;z-index:4000}
    .screen-overlay.show{display:flex}
    .screen-overlay .panel{position:relative;width:100%;height:100%;overflow:hidden;background:#000}
    .screen-overlay .bg{position:absolute;inset:0;width:100%;height:100%;object-fit:cover}
    .cta-row{
      position:absolute;left:50%;top:48%;transform:translate(-50%,-50%);
      display:flex;gap:10%;align-items:center;justify-content:center;width:min(80%,960px)
    }
    .inter-btn{background:none;border:none;padding:0;margin:0;cursor:pointer}
    .inter-btn img{height:clamp(9vmin,11vmin,120px);width:auto;display:block;filter:drop-shadow(0 2px 6px #0008)}
  
    /* Big countdown number outside the frame (top-center) */
    .big-count {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      font-family: 'LeagueGothic', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-size: clamp(36px, 12vmin, 120px);
      line-height: 1;
      letter-spacing: .02em;
      color: #ededed;
      text-shadow: 0 6px 24px rgba(0,0,0,.85);
      z-index: 4800;
      display: none;
      pointer-events: none;
      user-select: none;
    }
    
    /* ===== RESULT OVERLAY (CORRECT / WRONG) ===== */
    .result-overlay{
      position:absolute; inset:0;
      background:rgba(0,0,0,.72);
      display:none; align-items:center; justify-content:center;
      z-index:3500; /* above stage content, below exit/intermission */
      pointer-events:none; /* allow tap-anywhere listener to still work */
    }
    .result-overlay.show{ display:flex; }
    .result-overlay .result-text{
      font-family: 'LeagueGothic', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
      font-size: clamp(42px, 12vmin, 160px);
      letter-spacing: .06em;
      color:#ffffff;
      text-shadow: 0 10px 32px rgba(0,0,0,.8);
      user-select:none;
    }
    .result-overlay.correct .result-text{ color:#5ad175; }
    .result-overlay.wrong .result-text{ color:#d15a5a; }

/* ===== Result overlay subtext + fades ===== */
.result-overlay .result-sub{
  margin-top: clamp(8px, 1.8vmin, 16px);
  max-width: min(90%, 920px);
  margin-left: auto; margin-right: auto;
  text-align: center;
  font-size: clamp(12px, 2.4vmin, 18px);
  line-height: 1.25;
  color: #e7e7e7;
  text-shadow: 0 6px 20px rgba(0,0,0,.7);
  user-select: none;
}
.result-overlay .result-text,
.result-overlay .result-sub { opacity: 0; transition: opacity 0.8s ease-in; }
.result-overlay.show .result-text,
.result-overlay.show .result-sub { opacity: 1; }
.result-overlay { opacity: 0; transition: opacity 0.5s ease; }
.result-overlay.show { opacity: 1; }
.result-overlay.hiding { opacity: 0; }

/* __HEADLINE_FALLBACK__ */
:root {
  --headline-font: 'LeagueGothic', Impact, 'Anton', 'Arial Black', system-ui, sans-serif;
}
.result-overlay .result-text,
.result-overlay .result-sub,
h1, .big-title {
  font-family: var(--headline-font);
}

/* __RESULT_TEXT_IMAGE__ */
.result-overlay .result-text{
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  width: 100%;
  height: 30vmin;
  text-indent: -9999px;
}


#timer{position:absolute;top:-40px;left:50%;transform:translateX(-50%);font-size:20px;font-weight:bold;color:#fff;background:rgba(0,0,0,0.6);padding:4px 10px;border-radius:6px;z-index:10;}

#camera-body,
#reel-1,
#reel-2 {
  fill: #D9A521;
  fill-opacity: 0.95;
  stroke: none;
}

#camera-loader {
  display: block;
  margin: auto;
}


.stage-loader {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.65); /* optional dark overlay */
  z-index: 5000;
}
.stage-loader svg {
  width: 120px;
  height: auto;
}


.next-count{
  position:absolute;
  top:8px;
  right:10px;
  background:rgba(0,0,0,0.6);
  color:#fff;
  padding:4px 10px;
  border:1px solid #333;
  border-radius:6px;
  font-weight:700;
  font-size:14px;
  letter-spacing:.02em;
  z-index:5001; /* above stage content, below intermission overlay */
}
@media (min-width: 900px){
  .next-count{ font-size:16px; padding:6px 12px; }
}


/* === Designed question badge (clapperboard style) === */
.qbadge{
  position:absolute;
  top:10px; left:10px;
  z-index:3200;
  transform: rotate(-2deg);
  user-select:none;
}
.qbadge-top{
  height:14px; width:100%;
  background: repeating-linear-gradient(135deg, #fff 0 12px, #000 12px 24px);
  border:1px solid #222;
  border-bottom:none;
  box-shadow:0 3px 10px rgba(0,0,0,.35);
}
.qbadge-body{
  min-width:120px;
  padding:8px 12px;
  background:#0b0b0b;
  color:#f2f2f2;
  border:1px solid #222;
  font-family: var(--headline-font, system-ui, sans-serif);
  font-weight:800;
  letter-spacing:.06em;
  text-align:center;
  box-shadow:0 8px 22px rgba(0,0,0,.45), inset 0 0 18px rgba(255,255,255,.04);
}
.qbadge .qnum{ font-size: clamp(14px, 3.2vmin, 22px); }

/* Top ribbon progress integrated into frame */
.qprogress{
  position:absolute;
  inset:0 auto auto 0;
  height:6px;
  width:100%;
  background: rgba(255,255,255,0.04);
  border-bottom:1px solid rgba(255,255,255,0.08);
  z-index: 3100;
}
.qprogress-fill{
  height:100%;
  width:0%;
  background: linear-gradient(90deg, #e7e7e7, #bdbdbd);
  box-shadow: 0 0 14px rgba(255,255,255,.25);
  transition: width .25s ease;
}

/* Hide old top-left badge and the whole .topbar for kiosk */
.topbar{ display:none !important; }


.quiz-logo {
  margin-top: 5px;
  margin-bottom: 0px;
  display: flex;
  justify-content: center;
  width: 100%;
  z-index: 2000;
}
.quiz-logo img {
  max-height: 180px;
  width: auto;
  object-fit: contain;
  filter: drop-shadow(0 4px 12px #000a);
}


/* === Two-column overlay layout (Short left, Did You Know right) === */
#resultOverlay .cols{display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:start}
@media(max-width:800px){#resultOverlay .cols{grid-template-columns:1fr}}
#resultOverlay .col{min-width:0}
#resultOverlay #result-fact{white-space:pre-line;font-size:clamp(12px,2.2vmin,18px);line-height:1.35}
#resultOverlay .dky-header{display:block;width:100%;max-width:360px;height:auto;margin:0 0 12px 0;opacity:.95}
#resultOverlay .result-sub{white-space:pre-line}


/* === Overlay typography polish: justify and tighten spacing === */
#resultOverlay .col-left .result-title,
#resultOverlay .col-left .result-text { margin: 0 0 6px 0 !important; }

#resultOverlay .col-right .dky-header { margin: 0 0 6px 0 !important; }

#resultOverlay .result-sub,
#resultOverlay #result-fact {
  margin-top: 0 !important;
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
  line-height: 1.35;
  font-size: clamp(13px, 2.2vmin, 18px);
}

/* Keep columns visually aligned */
#resultOverlay .cols { align-items: start; }


/* Timer font styles */
.time-text {
  font-family: 'AdvercaseRegular', sans-serif !important;
}

.second {
  font-family: 'AdvercaseBold', sans-serif !important;
}


.qbadge .qnum {
  font-family: 'SinkFont', sans-serif !important;
}


/* Alignment fix for CUT! and Did You Know? */
#resultOverlay .cols {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
  align-items: start;
}
#resultOverlay .col-left .result-text,
#resultOverlay .col-left .result-sub,
#resultOverlay .col-right .dky-header,
#resultOverlay .col-right #result-fact {
  margin-top: 0 !important;
}


/* Balance CUT! and Did You Know? columns */
#resultOverlay .col-left,
#resultOverlay .col-right {
  padding: 20px;
  box-sizing: border-box;
}
#resultOverlay .col-left {
  background-color: transparent !important;
}
#resultOverlay .col-right {
  background-color: black !important;
}


/* Top right controls: logo above exit */
#topRightControls {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  position: absolute;
  top: 10px;
  right: 10px;
}
#topRightControls #reelLogo {
  order: 0;
}
#topRightControls #exitButton {
  order: 1;
}


/* === Top-right logo + Exit stacking (explicit) === */
:root { --logoH: 140px; }

.quiz-logo {
  position: fixed !important;
  top: 10px !important;
  right: 10px !important;
  left: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  width: auto !important;
  display: flex !important;
  justify-content: flex-end !important;
  align-items: flex-start !important;
  z-index: 4000 !important;
  pointer-events: none; /* logo is decorative; remove if you need clicks */
}
.quiz-logo img {
  max-height: var(--logoH) !important;
  height: var(--logoH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
  pointer-events: auto; /* allow clicks on exit below without blocking */
}

/* removed legacy global #exitButton.exit-btn rule to allow HUD stack */


/* === Top-left logo, top-right exit === */
.quiz-logo {
  position: fixed !important;
  top: 10px !important;
  left: 10px !important;
  right: auto !important;
  margin: 0 !important;
  padding: 0 !important;
  width: auto !important;
  display: flex !important;
  justify-content: flex-start !important;
  align-items: flex-start !important;
  z-index: 4000 !important;
}
.quiz-logo img {
  max-height: 100px !important;
  height: auto !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* removed legacy global #exitButton.exit-btn rule to allow HUD stack */


@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#scoreDisplay, .score-text {
  font-family: 'StandingRoomOnlyNF', sans-serif !important;
  font-size: 22px;
  letter-spacing: 1px;
}


@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('./fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#scoreDisplay,
.score-text,
div[id*="score"],
p[id*="score"] {
  font-family: 'StandingRoomOnlyNF', sans-serif !important;
  font-size: 28px !important;
  color: #f5d75c !important; /* vintage gold */
  text-shadow: 2px 2px 0px #000, -1px -1px 0px #000;
  letter-spacing: 1px;
  text-align: center;
}


/* --- Force StandingRoomOnlyNF for Score --- */
@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('font/StandingRoomOnlyNF.woff2') format('woff2'),
       url('./font/StandingRoomOnlyNF.woff2') format('woff2'),
       url('fonts/StandingRoomOnlyNF.woff2') format('woff2'),
       url('./fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

/* Very high-specificity selectors to override any existing font-family */
html body #scoreDisplay,
html body .score-text,
html body #finalScore,
html body .final-score,
html body .score,
html body [id*="score"],
html body [id*="Score"],
html body [class*="score"],
html body [class*="Score"] {
  font-family: 'StandingRoomOnlyNF' !important;
  font-size: 30px !important;
  color: #f5d75c !important;
  text-shadow: 2px 2px 0 #000, -1px -1px 0 #000 !important;
  letter-spacing: 0.5px !important;
}


/* --- Make Score font 3x bigger --- */
html body #scoreDisplay,
html body .score-text,
html body #finalScore,
html body .final-score,
html body .score,
html body [id*="score"],
html body [id*="Score"],
html body [class*="score"],
html body [class*="Score"] {
  font-size: 90px !important; /* 3x bigger */
  font-family: 'StandingRoomOnlyNF' !important;
  color: #f5d75c !important;
  text-shadow: 3px 3px 0 #000, -2px -2px 0 #000 !important;
  letter-spacing: 1px !important;
}


/* === Position final score under the screen frame === */
.final-score-out {
  width: clamp(360px, var(--frame-scale), var(--frame-max));
  margin: 24px auto 0 auto; /* top padding + centered */
  text-align: center;
}


/* === Position score midway between frame bottom and window bottom === */
.final-score-out {
  width: clamp(360px, var(--frame-scale), var(--frame-max));
  margin: 0 auto;               /* center horizontally */
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  top: 50%;                     /* move halfway down remaining space */
  transform: translateY(-50%);  /* adjust offset to center properly */
}


@font-face {
  font-family: 'StandingRoomOnlyNF';
  src: url('fonts/StandingRoomOnlyNF.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#splashOverlay .tap {
  font-family: 'StandingRoomOnlyNF', sans-serif !important;
  font-size: min(9vmin, 64px);
  color: #f5d75c;
  text-shadow: 2px 2px 0px #000, -1px -1px 0px #000;
  letter-spacing: 0.06em;
  font-weight: normal !important;
}


/* === Instructions Modal (pre-quiz) === */
#instrModalOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none; /* shown programmatically */
  align-items: center;
  justify-content: center;
  z-index: 5000;
}

#instrModal {
  background: #111;
  border: 2px solid #333;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  border-radius: 14px;
  max-width: min(720px, 92vw);
  width: 92vw;
  padding: clamp(16px, 3.5vmin, 28px);
  color: #f5d75c;
  font-family: 'StandingRoomOnlyNF', sans-serif;
  text-align: center;
  position: relative;
}

#instrModal h2 {
  font-size: clamp(22px, 3vmax, 34px);
  margin: 0 0 8px 0;
  letter-spacing: 0.04em;
  text-shadow: 2px 2px 0 #000;
}

#instrModal p {
  font-size: clamp(16px, 2.2vmax, 22px);
  line-height: 1.35;
  color: #ffeaa0;
  margin: 8px 0 0 0;
  text-shadow: 1px 1px 0 #000;
}

#instrClose {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: #f5d75c;
  color: #000;
  border: none;
  font-weight: bold;
  font-family: inherit;
  cursor: pointer;
  box-shadow: 2px 2px 0 #000;
}
#instrClose:active { transform: translateY(1px); }


@font-face {
  font-family: 'AdvercaseBold';
  src: url('fonts/AdvercaseFont-Demo-Bold.woff2') format('woff2');
  font-weight: bold;
  font-style: normal;
}

@font-face {
  font-family: 'AdvercaseRegular';
  src: url('fonts/AdvercaseFont-Demo-Regular.woff2') format('woff2');
  font-weight: normal;
  font-style: normal;
}

#instrModal h2 {
  font-family: 'AdvercaseBold', sans-serif !important;
  font-size: clamp(22px, 3vmax, 34px);
  margin: 0 0 8px 0;
  letter-spacing: 0.04em;
  text-shadow: 2px 2px 0 #000;
}

#instrModal p {
  font-family: 'AdvercaseRegular', sans-serif !important;
  font-size: clamp(16px, 2.2vmax, 22px);
  line-height: 1.35;
  color: #ffeaa0;
  margin: 8px 0 0 0;
  text-shadow: 1px 1px 0 #000;
}

#instrClose {
  font-family: 'AdvercaseBold', sans-serif !important;
  font-size: 22px;
}


.help-link {
  font-family: 'AdvercaseRegular', sans-serif;
  font-size: 14px;
  color: #f5d75c;
  text-shadow: 1px 1px 0 #000;
  margin-top: 6px;
  cursor: pointer;
  text-align: left;
}
.help-link:hover {
  text-decoration: underline;
}


/* === Help/Instructions Modal mirrors main instructions modal === */
#instrHelpOverlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 5000;
}
#instrHelpModal {
  background: #111;
  border: 2px solid #333;
  box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  border-radius: 14px;
  max-width: min(720px, 92vw);
  width: 92vw;
  padding: clamp(16px, 3.5vmin, 28px);
  color: #f5d75c;
  font-family: 'AdvercaseRegular', sans-serif;
  text-align: center;
  position: relative;
}
#instrHelpModal h2 {
  font-family: 'AdvercaseBold', sans-serif;
  font-size: clamp(22px, 3vmax, 34px);
  margin: 0 0 8px 0;
  letter-spacing: 0.04em;
  text-shadow: 2px 2px 0 #000;
}
#instrHelpModal p {
  font-family: 'AdvercaseRegular', sans-serif;
  font-size: clamp(16px, 2.2vmax, 22px);
  line-height: 1.35;
  color: #ffeaa0;
  margin: 8px 0 0 0;
  text-shadow: 1px 1px 0 #000;
}
#instrHelpClose {
  position: absolute;
  top: 8px;
  right: 10px;
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: #f5d75c;
  color: #000;
  border: none;
  font-weight: bold;
  font-family: 'AdvercaseBold', sans-serif;
  cursor: pointer;
  box-shadow: 2px 2px 0 #000;
}
#instrHelpClose:active { transform: translateY(1px); }


/* Hide Help/Instructions link */
#helpLink { display: none !important; }


/* Use image for Tap to Start */
#splashOverlay .tap { display:flex; align-items:center; justify-content:center; }
#splashOverlay .tap .tap-img { display:block; max-width:min(70vw, 520px); width:100%; height:auto; }


/* Style for How to Play image */
.howto-img {
  display: block;
  max-width: min(70%, 520px);
  width: 100%;
  height: auto;
  margin: 0 auto 12px auto;
}


/* --- ReelX close button (responsive) --- */
#instrClose, #instrHelpClose, #instructionsClose, #exitClose, .close-btn-img {
  position: absolute !important;
  top: 12px !important;
  right: 16px !important;
  background: none !important;
  border: none !important;
  padding: 0 !important;
  cursor: pointer !important;
  width: clamp(28px, 5vw, 40px) !important;
  height: clamp(28px, 5vw, 40px) !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  color: transparent !important;
  font-size: 0 !important;
}
#instrClose img, #instrHelpClose img, #instructionsClose img, #exitClose img, .close-btn-img img {
  display: block !important;
  width: 100% !important;
  height: auto !important;
}


/* Help Instructions button at top center */
#helpButtonContainer {
  position: absolute;
  top: 15px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
}
#helpButton {
  width: clamp(120px, 18vw, 200px);
  height: auto;
  cursor: pointer;
}


/* Score color matches loader yellow */
#score, .scoreText {
  color: #D9A521 !important;
}


/* === Header bar & layout spacing === */
:root { --header-h: 96px; }

#globalHeader{
  position: fixed;
  top: 0; left: 0; right: 0;
  height: var(--header-h);
  background: linear-gradient(180deg, rgba(0,0,0,0.75) 0%, rgba(0,0,0,0.55) 60%, rgba(0,0,0,0) 100%);
  border-bottom: 1px solid rgba(255,255,255,0.08);
  z-index: 450;   /* sits behind controls but above bg */
  pointer-events: none; /* do not block clicks on buttons */
}

/* Move quiz "screen" and Q/A down so they clear the header */
#screenFrame,
#question-container,
#options {
  margin-top: calc(var(--header-h) - 24px);
}

/* Keep existing top buttons within the visual header */
#helpButtonContainer { top: 12px; z-index: 1000; }
#exitButton, #exitBtn, #exit { top: 12px; } /* fallbacks if used */


/* === Header spacing fix: push entire page content below header === */
:root { --header-h: 96px; } /* keep in sync with header height */

/* Push everything down uniformly so the screen frame can't overlap */
body { padding-top: var(--header-h); }

/* Neutralize previous per-section margins to avoid double spacing */
#screenFrame, #question-container, #options {
  margin-top: 0 !important;
}

/* Keep header non-blocking */
#globalHeader { pointer-events: none; z-index: 450; }

/* ===== Next <style> block ===== */

.back-arrow {
    position: absolute;
    top: 2.5%;
    left: 2.8%;
    width: 42px;
    height: 42px;
    border: none;
    background: #0000;
    color: #fff;
    cursor: pointer;
    font-size: 28px;
    line-height: 1;
    z-index: 4601; /* above intermission bg */
  }
  .back-arrow:after {
    content: "←";
    font-weight: bold;
    text-shadow: 0 2px 8px rgba(0,0,0,.7);
  }

/* __RESULT_TEXT_IMAGE__ */
.result-overlay .result-text{
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  width: 100%;
  height: 30vmin;
  text-indent: -9999px;
}

/* ===== Next <style> block ===== */

/* Fullscreen black backdrop */
  #idleOverlay {
    position: fixed; inset: 0;
    background: #000;
    display: none; align-items: center; justify-content: center;
    z-index: 7000;
  }
  #idleOverlay.show { display: flex; }

  /* Center dialog (keepgoing.png) */
  #idleDialog {
    position: relative;
    width: min(70vw, 560px);
    max-width: 80vw;
    aspect-ratio: 720 / 972;
  }
  #idleDialog img.keepgoing {
    position: absolute; inset: 0;
    width: 100%; height: 100%; object-fit: contain;
    filter: drop-shadow(0 8px 24px rgba(0,0,0,.45));
    pointer-events: none;
  }
  /* Countdown text on dialog */
  #idleCountdown {
    position: absolute; bottom: 6%; left: 50%; transform: translateX(-50%);
    font-family: 'LeagueGothic', Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;
    font-size: clamp(34px, 10vmin, 96px);
    letter-spacing: .02em;
    color: #111; -webkit-text-stroke: 1.5px #fff; text-shadow: 0 3px 18px rgba(0,0,0,.6);
    pointer-events: none;
  }

  /* TAP ANYWHERE bottom-right (slow blink) */
  #idleTap {
    position: fixed;
    right: clamp(12px, 4vw, 28px);
    bottom: clamp(12px, 4vw, 28px);
    width: min(28vw, 320px);
    height: auto;
    pointer-events: none;
    z-index: 7100;
    filter: drop-shadow(0 6px 18px rgba(0,0,0,.65));
    animation: tapBlink 1.6s ease-in-out infinite;
    opacity: .85;
  }
  @keyframes tapBlink { 0%,100% { opacity:.25 } 50% { opacity:.9 } }

/* __RESULT_TEXT_IMAGE__ */
.result-overlay .result-text{
  background-repeat: no-repeat;
  background-position: center;
  background-size: contain;
  width: 100%;
  height: 30vmin;
  text-indent: -9999px;
}


/* Did You Know fact block */
#resultOverlay .result-fact, .result-overlay .result-fact {
  color: #fff;
  font: 400 1.05rem/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  margin-top: 8px;
  text-wrap: balance;
}
#resultOverlay .col-right, .result-overlay .col-right { text-align: center; }
#resultOverlay .col-right .dky-header, .result-overlay .col-right .dky-header {
  max-width: 60%;
  height: auto;
  display: block;
  margin: 0 auto 8px auto;
  object-fit: contain;
}


/* === Advercase webfont integration === */
@font-face{
  font-family: "Advercase";
  src: url("fonts/AdvercaseFont-Demo-Regular.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}
@font-face{
  font-family: "Advercase";
  src: url("fonts/AdvercaseFont-Demo-Bold.woff2") format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

/* Unify SHORT + DID YOU KNOW text styles (vintage ad feel) */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif;
  font-weight: 400;
  letter-spacing: 0.02em;
  font-size: clamp(20px, 2.8vmin, 34px);
  line-height: 1.55;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: justify;
  text-wrap: pretty;
}

/* Center the DID YOU KNOW header image and size it sensibly */
#resultOverlay .col-right .dky-header,
.result-overlay .col-right .dky-header {
  display: block;
  margin: 0 auto 10px auto;
  max-width: 55%;
  height: auto;
  object-fit: contain;
}

/* Basic two-column overlay layout compatibility */
#resultOverlay .col,
.result-overlay .col { box-sizing: border-box; padding: 0 1rem; }
#resultOverlay .col-right,
.result-overlay .col-right { text-align: center; }


/* Adjust text alignment and spacing */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact {
  text-align: left;     /* justified left */
}

#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact {
  padding-right: 2rem;  /* add right padding */
}


/* === Split font styling for Short vs Did You Know === */

/* SHORT text column (left) */
#resultOverlay .result-sub,
.result-overlay .result-sub {
  font-family: Georgia, "Times New Roman", serif;
  font-weight: 400;
  font-size: clamp(20px, 2.4vmin, 30px);
  line-height: 1.5;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

/* DID YOU KNOW text column (right) */
#resultOverlay .result-fact,
.result-overlay .result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif;
  font-weight: 400;
  font-size: clamp(20px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
  padding-right: 2rem;
}


/* === Unified Advercase styling for both Short + Did You Know === */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif;
  font-weight: 400;
  font-size: clamp(22px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact {
  padding-right: 2rem;
}


/* === Force Advercase font on both Short + Did You Know text === */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif !important;
  font-weight: 400;
  font-size: clamp(22px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  padding-right: 2rem;
}


/* === Corrected unified Advercase styling === */

/* Shared styling for both text columns */
#resultOverlay .result-sub,
#resultOverlay .result-fact,
.result-overlay .result-sub,
.result-overlay .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  font-family: "Advercase", Georgia, "Times New Roman", serif !important;
  font-weight: 400;
  font-size: clamp(22px, 2.8vmin, 34px);
  line-height: 1.55;
  letter-spacing: 0.02em;
  color: #fff;
  max-width: 92%;
  margin: 12px auto 0 auto;
  text-align: left;
}

/* Only add right padding on the DID YOU KNOW fact (right column) */
#resultOverlay .col-right .result-fact,
.result-overlay .col-right .result-fact,
#resultOverlay #result-fact,
.result-overlay #result-fact {
  padding-right: 2rem;
}


/* Right column solid black background */
#resultOverlay .col-right,
.result-overlay .col-right {
  background: #000;
  border-radius: 0 20px 20px 0; /* rounded only on right edge if container is rounded */
  padding: 2rem;
  box-sizing: border-box;
}


/* Align both columns' text to the top */
#resultOverlay .col-left,
#resultOverlay .col-right,
.result-overlay .col-left,
.result-overlay .col-right {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

/* ===== Next <style> block ===== */

.howto-img {
  display: block;
  max-width: min(70%, 520px);
  width: 100%;
  height: auto;
  margin: 0 auto 12px auto;
}

/* === Inline style patch (auto-extracted) === */
/* Extracted from inline style="..." attributes */
.inline1 {position:relative;display:inline-block;width:100%;}
.inline2 {width:0%}
.inline3 {display:none}
.inline4 {display:none}
.inline5 {display:none}
.inline6 {display:none;}



/* === Header image normalization === */
:root { --headerH: 96px; } /* tweak this once to change all header image heights */

.quiz-logo img,
#exitButton img,
#helpButton {
  height: var(--headerH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* keep header elements clear of each other and aligned */
.quiz-logo {
  position: fixed !important;
  top: 10px !important;
  left: 10px !important;
  z-index: 4000 !important;
}

/* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

#helpButtonContainer {
  position: fixed !important;
  top: 10px !important;
  right: calc(10px + var(--headerH) + 12px) !important; /* push left of exit button */
  z-index: 4000 !important;
}

/* optional: responsive shrink for smaller viewports */
@media (max-width: 640px) {
  :root { --headerH: 72px; }
}

/* === Header bar rules merged in === */
/* === Header bar layout === */
:root { --headerH: 96px; } /* adjust once for all three */

.header-bar {
  position: fixed;
  top: 10px;
  left: 10px;
  right: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  z-index: 4000;
}

.header-bar img {
  height: var(--headerH);
  width: auto;
  object-fit: contain;
  display: block;
}

.header-actions {
  display: flex;
  gap: 12px;
  align-items: center;
}

/* === HUD Stack (top-right: Logo, HI, Exit) === */
:root { --hudH: 96px; } /* shared height for stack items */

.hud-stack {
  position: fixed;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  z-index: 5000;
}

/* neutralize previous fixed positions inside the stack */
.hud-stack .quiz-logo,
.hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* ensure consistent height for images */
.hud-stack img {
  height: var(--hudH);
  width: auto;
  object-fit: contain;
  display: block;
}

/* optional: make Exit button not stretch */
.hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* responsive tweak */
@media (max-width: 640px) {
  :root { --hudH: 72px; }
}


/* === Force Exit to participate in the HUD stack (wins over legacy fixed rules) === */
body .hud-stack #exitButton.exit-btn,
body .hud-stack #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  top: auto !important;
  right: auto !important;
  bottom: auto !important;
  left: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

body .hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */


/* === HUD Stack v3: force column order + nuke legacy positioning === */
body .hud-stack { display:flex !important; flex-direction:column !important; align-items:flex-end !important; gap:8px !important; }
body .hud-stack .quiz-logo,
body .hud-stack #helpButton,
body .hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* explicit order: 1 Logo, 2 HI, 3 Exit */
body .hud-stack .quiz-logo { order: 1 !important; }
body .hud-stack #helpButton { order: 2 !important; }
body .hud-stack /* removed legacy global #exitButton.exit-btn rule to allow HUD stack */

/* reset positioning on all descendants so nothing fights the stack */
body .hud-stack .quiz-logo,
body .hud-stack .quiz-logo *,
body .hud-stack #helpButton,
body .hud-stack #exitButton.exit-btn,
body .hud-stack #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  top: auto !important; right: auto !important; bottom: auto !important; left: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

/* guarantee uniform height */
:root { --hudH: 96px; }
body .hud-stack img { height: var(--hudH) !important; width: auto !important; object-fit: contain !important; display: block !important; }



/* Ensure Exit participates in the HUD stack */
.hud-stack #exitButton.exit-btn {
  position: static;
  top: auto; right: auto; bottom: auto; left: auto;
  margin: 0;
}

/* === HUD stack v4: force elements into the stack and neutralize legacy positioning === */
.hud-stack {
  position: fixed;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 8px;
  z-index: 5000;
}

.hud-stack .quiz-logo,
.hud-stack .quiz-logo *,
.hud-stack #helpButton,
.hud-stack #exitButton.exit-btn,
.hud-stack #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  top: auto !important; right: auto !important; bottom: auto !important; left: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

:root { --hudH: 96px; }
.hud-stack img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* explicit ordering */
.hud-stack .quiz-logo { order: 1 !important; }
.hud-stack #helpButton { order: 2 !important; }
.hud-stack #exitButton.exit-btn { order: 3 !important; }

/* === HUD: Left (logo) + Right stack (Exit → HI) === */
:root { --hudH: 96px; --hudGap: 8px; }

/* Left logo (top-left) */
.hud-left {
  position: fixed;
  top: 10px;
  left: 10px;
  display: flex;
  align-items: flex-start;
  z-index: 5000;
}
.hud-left .quiz-logo,
.hud-left .quiz-logo * {
  position: static !important;
  inset: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}
.hud-left .quiz-logo img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* Right column: Exit on top, HI below */
.hud-right /* deprecated in left-stack */ {
  position: fixed;
  top: 10px;
  right: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: var(--hudGap);
  z-index: 5000;
}

.hud-right /* deprecated in left-stack */ #exitButton.exit-btn,
.hud-right /* deprecated in left-stack */ #exitButton.exit-btn *,
.hud-right /* deprecated in left-stack */ #helpButton {
  position: static !important;
  inset: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

.hud-right /* deprecated in left-stack */ img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* Explicit vertical order: Exit (1) → HI (2) */
.hud-right /* deprecated in left-stack */ #exitButton.exit-btn { order: 1 !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; padding: 0 !important; background: transparent !important; border: 0 !important; }
.hud-right /* deprecated in left-stack */ #helpButton { order: 2 !important; cursor: pointer; }

@media (max-width: 640px) {
  :root { --hudH: 78px; }
  .hud-left { top: 8px; left: 8px; }
  .hud-right /* deprecated in left-stack */ { top: 8px; right: 8px; }
}


/* === v1.1: HI half the size === */
.hud-right /* deprecated in left-stack */ #helpButton {
  height: calc(var(--hudH) * 0.5) !important;
  width: auto !important;
  align-self: flex-end;
}


/* === v1.2: Hide logo (left) and HI during Splash === */
body.splash-active .hud-left { display: none !important; }
body.splash-active .hud-right /* deprecated in left-stack */ #helpButton { display: none !important; }

/* === HUD: Left single stack (Logo → HI → Exit) === */
:root { --hudH: 96px; --hudGap: 10px; }

/* Left stack container at top-left */
.hud-left {
  position: fixed;
  top: 10px;
  left: 10px;
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: var(--hudGap);
  z-index: 5000;
}

/* Ensure all three items participate in flow with no legacy positioning */
.hud-left .quiz-logo,
.hud-left .quiz-logo *,
.hud-left #helpButton,
.hud-left #exitButton.exit-btn,
.hud-left #exitButton.exit-btn * {
  position: static !important;
  inset: auto !important;
  margin: 0 !important;
  z-index: auto !important;
}

/* Image sizing */
.hud-left img {
  height: var(--hudH) !important;
  width: auto !important;
  object-fit: contain !important;
  display: block !important;
}

/* Order: logo (1) → HI (2) → Exit (3) */
.hud-left .quiz-logo { order: 1 !important; }
.hud-left #helpButton { order: 2 !important; }
.hud-left #exitButton.exit-btn { order: 3 !important; display: inline-flex !important; align-items: center !important; justify-content: center !important; padding: 0 !important; background: transparent !important; border: 0 !important; }

/* Hide HI and logo during splash (keep Exit visible) */
body.splash-active .hud-left .quiz-logo,
body.splash-active .hud-left #helpButton { display: none !important; }

/* Optional: small-screen reduction */
@media (max-width: 640px) {
  :root { --hudH: 78px; --hudGap: 8px; }
  .hud-left { top: 8px; left: 8px; }
}


/* === v1.1: Order Logo → Exit → HI === */
.hud-left .quiz-logo { order: 1 !important; }
.hud-left #exitButton.exit-btn { order: 2 !important; }
.hud-left #helpButton { order: 3 !important; }


/* === v1.2: Keep left stack explicit and guard against duplicates visually */
.hud-left { display: flex; flex-direction: column; align-items: flex-start; }

/* === Pure Palette Theme === */
/* Reel to Real — Theme (Pure Palette Only)
   Uses ONLY your six colors and is tuned to sit nicely next to external purple or yellow‑orange elements
   without introducing new hues.
   Palette:
     Golden Yellow  #e3a73a
     Dark Brown     #2a211a
     Deep Teal      #2e4a3e
     Mustard        #b98a23
     Burnt Orange   #c2582e
     Cream          #f3e1b5
*/

:root {
  /* Base tokens */
  --golden:  #e3a73a;
  --brown:   #2a211a;
  --teal:    #2e4a3e;
  --mustard: #b98a23;
  --orange:  #c2582e;
  --cream:   #f3e1b5;

  /* App semantics (no new hues) */
  --bg:        var(--brown);
  --fg:        var(--cream);
  --link:      var(--teal);
  --accent:    var(--golden);  /* primary UI highlight */
  --accent-2:  var(--mustard); /* hover/secondary */
  --accent-3:  var(--orange);  /* warning/active */
  --surface:   #32271f;        /* brown + ~8% */
  --surface-2: #3b2e24;        /* brown + ~14% */
  --border:    #5a4a3c;        /* brown + ~30% */
  --shadow:    rgba(0,0,0,.33);
}

html, body {
  background: var(--bg);
  color: var(--fg);
}

/* Links stay teal to avoid warm-on-warm conflict next to yellow/orange neighbors */
a { color: var(--link); text-decoration-thickness: 2px; text-underline-offset: 2px; }
a:hover { color: var(--accent); }

/* Buttons — warm, but controlled */
button, .btn {
  background: var(--accent);
  color: #1b130e;
  border: 1px solid var(--border);
  padding: .6rem 1rem;
  border-radius: .55rem;
  box-shadow: 0 8px 18px var(--shadow);
  transition: transform .08s ease, background-color .12s ease;
}
button:hover, .btn:hover { background: var(--accent-2); }
button:active, .btn:active { background: var(--orange); transform: translateY(1px); }

/* Cards / panels */
.card, .panel, .surface {
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--fg);
  border-radius: 12px;
  box-shadow: 0 12px 28px var(--shadow);
}

/* HUD imagery */
.hud-left img, .hud-right img, .hud-stack img {
  filter: drop-shadow(0 2px 9px var(--shadow));
}

/* Splash stays black but gets a subtle warm vignette using ONLY your palette */
#splashOverlay {
  background:
    radial-gradient(1000px 520px at 20% 20%, rgba(227,167,58,0.12), transparent 60%),
    radial-gradient(1000px 520px at 80% 25%, rgba(194,88,46,0.10), transparent 60%),
    #000;
}

/* --- Utilities (pure palette) --- */
.bg-brown   { background: var(--brown)   !important; }
.bg-cream   { background: var(--cream)   !important; color: #1b130e !important; }
.bg-teal    { background: var(--teal)    !important; }
.bg-golden  { background: var(--golden)  !important; color: #1b130e !important; }
.bg-mustard { background: var(--mustard) !important; color: #1b130e !important; }
.bg-orange  { background: var(--orange)  !important; }

.text-brown   { color: var(--brown)   !important; }
.text-cream   { color: var(--cream)   !important; }
.text-teal    { color: var(--teal)    !important; }
.text-golden  { color: var(--golden)  !important; }
.text-mustard { color: var(--mustard) !important; }
.text-orange  { color: var(--orange)  !important; }

.border-brown   { border-color: var(--brown)   !important; }
.border-cream   { border-color: var(--cream)   !important; }
.border-teal    { border-color: var(--teal)    !important; }
.border-golden  { border-color: var(--golden)  !important; }
.border-mustard { border-color: var(--mustard) !important; }
.border-orange  { border-color: var(--orange)  !important; }

/* --- When adjacent to purple or yellow-orange (external elements) ---
   Use these helpers to keep separation purely with your palette.
*/
.separate-soft { box-shadow: 0 0 0 2px var(--surface), 0 10px 24px var(--shadow); } /* soft ring + shadow */
.separate-hard { box-shadow: 0 0 0 3px var(--border), 0 12px 28px var(--shadow); }  /* stronger ring */
.pad-cream     { background: var(--cream); color: #1b130e; padding: .4rem .6rem; border-radius: .4rem; }
.pad-brown     { background: var(--surface); padding: .4rem .6rem; border-radius: .4rem; }


/* === Reel2Real POP PACK (pure palette only) ===
   Goal: more contrast, more “pop”, still using only your six colors.
   Controls:
     --popShadow: overall shadow strength
     --popGlow:   neon-ish glow for accents
     --popSpeed:  animation timing
*/
:root {
  --popShadow: rgba(0,0,0,.55);
  --popGlow:   rgba(227, 167, 58, 0.55); /* golden glow */
  --popSpeed:  .16s;
}

/* Typography punch: subtle text-shadow on big headings */
h1, h2, .title, .headline {
  text-shadow: 0 2px 0 rgba(0,0,0,.25), 0 8px 22px var(--popShadow);
}

/* Links: bolder teal + animated underline in golden */
a {
  color: var(--teal);
  position: relative;
  text-decoration: none;
}
a::after {
  content: "";
  position: absolute;
  left: 0; bottom: -2px;
  width: 0%; height: 2px;
  background: var(--golden);
  transition: width var(--popSpeed) ease;
}
a:hover { color: var(--golden); }
a:hover::after { width: 100%; }

/* Buttons: glossy warm gradient + glow on hover */
button, .btn {
  background: linear-gradient(180deg, color-mix(in srgb, var(--golden) 92%, black), color-mix(in srgb, var(--mustard) 88%, black));
  color: #1b130e;
  border: 1px solid color-mix(in srgb, var(--mustard) 70%, black);
  box-shadow: 0 10px 26px var(--popShadow), inset 0 1px 0 rgba(255,255,255,.12);
  transform: translateZ(0);
  transition: transform var(--popSpeed) ease, box-shadow var(--popSpeed) ease, background-color var(--popSpeed) ease;
}
button:hover, .btn:hover {
  background: linear-gradient(180deg, var(--golden), var(--mustard));
  box-shadow: 0 14px 32px var(--popShadow), 0 0 0 3px rgba(227,167,58,0.18);
}
button:active, .btn:active {
  transform: translateY(1px);
  background: linear-gradient(180deg, var(--mustard), var(--orange));
}

/* Callout / chips: crisp cream pad with brown text (great on dark video) */
.pad-cream {
  background: var(--cream);
  color: #1b130e;
  border: 1px solid color-mix(in srgb, var(--cream) 45%, black);
  box-shadow: 0 8px 22px var(--popShadow);
}

/* Panels: deepen shadows and lift borders for contrast */
.card, .panel, .surface {
  background: var(--surface);
  border: 1px solid color-mix(in srgb, var(--border) 80%, var(--golden) 20%);
  box-shadow: 0 16px 36px var(--popShadow);
}

/* HUD: crisper edges with double shadow (inner highlight + outer drop) */
.hud-left img, .hud-right img, .hud-stack img {
  filter:
    drop-shadow(0 1px 0 rgba(255,255,255,.06))
    drop-shadow(0 10px 28px var(--popShadow));
}

/* Exit & HI: focus visibility and hover affordance without new colors */
#exitButton.exit-btn, #helpButton {
  outline: 0;
  transition: filter var(--popSpeed) ease, transform var(--popSpeed) ease;
}
#exitButton.exit-btn:hover, #helpButton:hover {
  filter: drop-shadow(0 0 0 rgba(0,0,0,0))
          drop-shadow(0 0 14px var(--popGlow))
          drop-shadow(0 12px 28px var(--popShadow));
  transform: translateY(-1px);
}

/* Splash: slightly brighter warm vignettes (no new hues) */
#splashOverlay {
  background:
    radial-gradient(1100px 560px at 18% 18%, rgba(227,167,58,0.18), transparent 62%),
    radial-gradient(1100px 560px at 78% 26%, rgba(194,88,46,0.14), transparent 62%),
    #000;
}

/* Decorative separators for section headings (pure palette) */
.rule-warm {
  height: 3px;
  background: linear-gradient(90deg, var(--orange), var(--golden) 55%, var(--mustard));
  border-radius: 2px;
  box-shadow: 0 6px 18px var(--popShadow);
  margin: .75rem 0 1.25rem;
}

/* Toggle “extra pop” via a class on <body>

<!-- R2R CONSOLIDATION: Unified HUD root -->
<div id="HUDRoot" data-hud></div>
 if desired */
body.pop-min a::after { display: none; }
body.pop-min button, body.pop-min .btn { box-shadow: 0 8px 20px var(--popShadow); }

/* === Theme v3 (new palette) === */
/* Reel to Real — Theme v3 (New Palette)
   From image: #DFAF2D #C24D39 #3E7784 #2C535C #1D1D1D
   Note: palette has no light swatch; using off‑white for text for contrast.
*/

:root {
  --sun:      #DFAF2D;
  --burnt:    #C24D39;
  --teal:     #3E7784;
  --deepteal: #2C535C;
  --ink:      #1D1D1D;

  /* semantics */
  --bg:     var(--ink);
  --fg:     #f6f3ee;         /* soft paper white for readable text */
  --link:   var(--teal);
  --accent: var(--sun);
  --accent-2: var(--burnt);
  --accent-3: var(--deepteal);
  --surface: #232323;        /* ink + ~6% */
  --surface-2: #2a2a2a;      /* ink + ~12% */
  --border:  #414141;
  --shadow:  rgba(0,0,0,.5);
}

html, body { background: var(--bg); color: var(--fg); }

a { color: var(--link); }
a:hover { color: var(--accent); }

button, .btn {
  background: linear-gradient(180deg, var(--accent), color-mix(in srgb, var(--accent) 75%, black));
  color: #1a1a1a;
  border: 1px solid color-mix(in srgb, var(--accent) 55%, black);
}
button:hover, .btn:hover { background: linear-gradient(180deg, var(--accent), var(--accent-2)); }
button:active, .btn:active { background: linear-gradient(180deg, var(--accent-2), var(--deepteal)); }

.card, .panel, .surface {
  background: var(--surface);
  border: 1px solid var(--border);
  color: var(--fg);
}

.hud-left img, .hud-right img, .hud-stack img {
  filter: drop-shadow(0 2px 10px var(--shadow));
}


/* === DID YOU KNOW wrapping fix === */
.dky-wrap {
  display: block;
  max-width: 100%;
}

.dky-header {
  float: left;
  width: clamp(180px, 30vmin, 420px);
  margin: 0 20px 14px 0;
  shape-outside: inset(0 round 8px);
  shape-margin: 6px;
}

.dky-wrap::after {
  content: "";
  display: block;
  clear: both;
}

#result-fact {
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
  font-size: clamp(16px, 2.5vmin, 22px);
  line-height: 1.4;
  color: #f7f7f7;
}


/* === Poster style for DID YOU KNOW? panel (teal/cream/rust) === */
:root {
  --poster-cream: #EFE5CF;
  --poster-rust: #B6532F;
  --poster-teal: #2B8076;
  --poster-ink: #1A1614;
}

/* Right-side panel styled like the reference poster */
#resultOverlay .col-right {
  background: var(--poster-rust);
  color: var(--poster-cream);
  padding: clamp(16px, 3vmin, 28px);
  width: min(38ch, 42vw);
  margin-left: auto;
  margin-right: clamp(16px, 6vw, 64px);
  box-shadow: 0 10px 28px rgba(0,0,0,.35);
}

/* Remove float wrapping for now; use poster block layout */
#resultOverlay .col-right .dky-header {
  float: none;
  display: block;
  width: 100%;
  max-width: none;
  margin: 0 0 clamp(10px, 2.2vmin, 16px) 0;
}

/* Fact text typography */
#resultOverlay #result-fact {
  color: var(--poster-cream);
  font-family: 'AdvercaseRegular', Georgia, serif;
  font-size: clamp(18px, 2.6vmin, 26px);
  line-height: 1.25;
  letter-spacing: 0.01em;
}

/* Optional: left block in cream like poster */
#resultOverlay .col-left,
#resultOverlay .left-content {
  background: var(--poster-cream);
  color: var(--poster-ink);
}

/* Optional: headline color complement */
#resultOverlay .result-text {
  color: var(--poster-teal);
  text-shadow: none;
}


/* ===== MERGED FROM: reel2real-match-vintage.css ===== */


/* === Reel2Real "Vintage Match" layer (uses theme v3 variables) ===
   Target look: teal canvas, gold double-frame, outlined buttons, warm question bar.
   Non-destructive: utilities + soft defaults that rely on existing markup.
*/

/* Canvas: teal wash with a subtle vignette */
body {
  background:
    radial-gradient(1400px 700px at 50% -10%, rgba(223,175,45,0.06), transparent 60%),
    linear-gradient(180deg, color-mix(in srgb, var(--deepteal) 80%, black), var(--teal));
}

/* Gold frame utility (add to the media/question container) */
.frame-gold {
  background: var(--ink);
  border: 2px solid var(--accent);               /* sun */
  box-shadow:
    inset 0 0 0 2px var(--ink),                  /* inner dark keyline */
    0 0 0 4px var(--accent),                     /* outer gold ring */
    0 8px 22px rgba(0,0,0,.45);
  border-radius: 4px;
}

/* If the inner media needs breathing room */
.frame-gold .media, .frame-gold img, .frame-gold video, .frame-gold canvas {
  display: block;
  border: 1px solid color-mix(in srgb, var(--accent) 35%, black);
}

/* Question bar: gold text on teal strip with thin gold keylines */
.question-bar {
  background: color-mix(in srgb, var(--deepteal) 70%, black);
  color: var(--accent);
  border-top: 2px solid var(--accent);
  border-bottom: 2px solid var(--accent);
  padding: .5rem .75rem;
  font-weight: 600;
  letter-spacing: .15px;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}
.question-bar .timer,
.question-bar .meta { color: var(--accent); opacity: .95; }

/* Option buttons: dark teal fill, gold outline, uppercase condensed vibe */
.btn-option, .answer, .choice, .option-btn {
  background: color-mix(in srgb, var(--deepteal) 82%, black);
  color: var(--fg);
  border: 2px solid var(--accent);
  border-radius: 4px;
  padding: .75rem 1rem;
  text-transform: uppercase;
  letter-spacing: .6px;
  font-weight: 700;
  box-shadow: 0 6px 16px rgba(0,0,0,.45);
  transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease;
}
.btn-option:hover, .answer:hover, .choice:hover, .option-btn:hover {
  background: color-mix(in srgb, var(--deepteal) 70%, var(--teal) 30%);
  box-shadow: 0 10px 24px rgba(0,0,0,.5), 0 0 0 3px rgba(223,175,45,.18);
  transform: translateY(-1px);
}
.btn-option:active, .answer:active, .choice:active, .option-btn:active {
  transform: translateY(0);
  background: color-mix(in srgb, var(--deepteal) 60%, black);
}

/* Small clapper badge / step counter */
.badge-clapper, .step-badge {
  background: var(--ink);
  color: var(--fg);
  border: 2px solid var(--accent);
  border-radius: 3px;
  padding: .2rem .45rem;
  font-weight: 700;
  letter-spacing: .5px;
  text-shadow: 0 1px 0 rgba(0,0,0,.35);
}

/* Thin gold separators */
.rule-gold { height: 2px; background: var(--accent); opacity: .9; }

/* If answers are in rows, give vertical rhythm */
.answers, .options, .choices { display: grid; gap: .75rem; }

/* Helper to nudge line-height like the mock */
.compact { line-height: 1.15; }

/* Keep HUD shadows intact */
.hud-left img, .hud-right img, .hud-stack img {
  filter: drop-shadow(0 1px 0 rgba(255,255,255,.04)) drop-shadow(0 12px 28px rgba(0,0,0,.5));
}




#resultOverlay .col-right,
.result-overlay .col-right {
  background: #c24d39 !important;
  color: #1d1d1d !important;
}


/* === DID YOU KNOW color fix (all text dark) === */
#resultOverlay .col-right,
.result-overlay .col-right {
  background: #c24d39 !important;
  color: #1d1d1d !important;
}

#resultOverlay .col-right *,
.result-overlay .col-right * {
  color: #1d1d1d !important;
}


/* === DID YOU KNOW box rounded left side === */
#resultOverlay .col-right,
.result-overlay .col-right {
  background: #c24d39 !important;
  color: #1d1d1d !important;
  border-top-left-radius: 20px;
  border-bottom-left-radius: 20px;
  overflow: hidden;
}

#resultOverlay .col-right *,
.result-overlay .col-right * {
  color: #1d1d1d !important;
}


/* === CUT! left-half headline styling (dark on cream) === */
#resultOverlay .col-left,
.result-overlay .col-left,
#resultOverlay .left-content,
.result-overlay .left-content {
  background: rgba(249, 237, 219, 0.5) !important; /* #f9eddb @ 50% */
  color: #1d1d1d !important;
}

/* Make the big CUT! word dark, no glow */
#resultOverlay .col-left .cut-title,
.result-overlay .col-left .cut-title,
#resultOverlay .left-content .cut-title,
.result-overlay .left-content .cut-title,
#resultOverlay .col-left h1,
.result-overlay .col-left h1,
#resultOverlay .left-content h1,
.result-overlay .left-content h1,
#resultOverlay .col-left .result-text,
.result-overlay .col-left .result-text {
  color: #1d1d1d !important;
  text-shadow: none !important;
  -webkit-text-stroke: 0 !important;
}

/* If CUT! is rendered as SVG text, force fill */
#resultOverlay .col-left svg text,
.result-overlay .col-left svg text,
#resultOverlay .left-content svg text,
.result-overlay .left-content svg text {
  fill: #1d1d1d !important;
  stroke: none !important;
}





/* === Left half background + body text color === */
#resultOverlay .col-left,
.result-overlay .col-left,
#resultOverlay .left-content,
.result-overlay .left-content {
  background: rgba(29, 29, 29, 0.5) !important; /* #1d1d1d @ 50% */
}

/* Body/caption text in cream on left side */
#resultOverlay .col-left .result-sub,
.result-overlay .col-left .result-sub,
#resultOverlay .left-content .result-sub,
.result-overlay .left-content .result-sub,
#resultOverlay .col-left p,
.result-overlay .col-left p,
#resultOverlay .left-content p,
.result-overlay .left-content p {
  color: #f9eddb !important;
}



#resultOverlay {
  position: relative;
}

#resultOverlay .col-left,
.result-overlay .col-left,
#resultOverlay .left-content,
.result-overlay .left-content {
  background: rgba(29, 29, 29, 0.5) !important; /* #1d1d1d @ 50% */
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* Ensure DID YOU KNOW panel sits above the background layer */
#resultOverlay .col-right,
.result-overlay .col-right {
  position: relative;
  z-index: 1;
}


/* === SAFE full-frame background behind DID YOU KNOW (using ::before) === */
#resultOverlay,
.result-overlay {
  position: absolute !important;
  inset: 0 !important;
  z-index: 3500 !important; /* ensure overlay sits above stage */
}

#resultOverlay::before,
.result-overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(29,29,29,0.5); /* #1d1d1d @ 50% */
  z-index: 0;              /* sits under text/panels */
  pointer-events: none;    /* never intercept clicks */
}

/* Ensure both sides render above the dark overlay */
#resultOverlay .col-left,
.result-overlay .col-left,
#resultOverlay .left-content,
.result-overlay .left-content,
#resultOverlay .col-right,
.result-overlay .col-right {
  position: relative;
  z-index: 1;
}

/* Right panel still above and rounded on left side */
#resultOverlay .col-right,
.result-overlay .col-right {
  background: #c24d39 !important;
  color: #1d1d1d !important;
  border-top-left-radius: 20px;
  border-bottom-left-radius: 20px;
  overflow: hidden;
}

/* Return left column background to transparent so the global overlay shows through */
#resultOverlay .col-left,
.result-overlay .col-left,
#resultOverlay .left-content,
.result-overlay .left-content {
  background: transparent !important;
}

/* Keep left-side body text as cream */
#resultOverlay .col-left .result-sub,
.result-overlay .col-left .result-sub,
#resultOverlay .left-content .result-sub,
.result-overlay .left-content .result-sub,
#resultOverlay .col-left p,
.result-overlay .col-left p,
#resultOverlay .left-content p,
.result-overlay .left-content p {
  color: #f9eddb !important;
}



/* === MODAL OVERLAY FIX === */


/* ===== Modal Overlay Cleanup (arrow + text links, 95% dim) ===== */

/* Ensure overlay is above content and can host a dimmer layer */
#resultOverlay,
.result-overlay {
  position: absolute !important;
  inset: 0 !important;
  z-index: 3500 !important;
}

/* 95% black dimming behind modal content */
#resultOverlay::before,
.result-overlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background: #000;
  opacity: 0.95;
  z-index: 0;
  pointer-events: none;
}

/* Place overlay contents above the dimmer */
#resultOverlay > *,
.result-overlay > * {
  position: relative;
  z-index: 1;
}

/* Remove "button" look for all modal buttons (TRY AGAIN / QUIT) */
#resultOverlay button,
.result-overlay button,
#resultOverlay .btn,
.result-overlay .btn,
#resultOverlay .answer,
.result-overlay .answer,
#resultOverlay .option-btn,
.result-overlay .option-btn {
  background: none !important;
  border: 0 !important;
  box-shadow: none !important;
  filter: none !important;
  padding: 0 !important;
  margin: 0 2.5rem !important; /* spacing between the two actions */
  color: #f0c04c !important;   /* keep the gold title color for the words */
  text-transform: uppercase;
  letter-spacing: 0.02em;
  line-height: 1;
  cursor: pointer;
}

/* Large, poster-like type for the actions */
#resultOverlay .result-actions,
.result-overlay .result-actions {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4rem;
  width: 100%;
  text-align: center;
  margin-top: clamp(12vh, 22vmin, 28vh);
  font-family: "AdvercaseBold", Impact, "League Gothic", system-ui, sans-serif;
  font-size: clamp(44px, 10vmin, 120px);
  text-shadow: none !important;
}

/* Back arrow: show icon only (no rounded box) */
#resultOverlay .back,
.result-overlay .back,
#resultOverlay #backButton,
.result-overlay #backButton,
#resultOverlay .back-btn,
.result-overlay .back-btn {
  background: none !important;
  box-shadow: none !important;
  border: 0 !important;
  width: auto !important;
  height: auto !important;
  padding: 0 !important;
  backdrop-filter: none !important;
}

/* Optional hover focus minimal affordances */
#resultOverlay button:hover,
.result-overlay button:hover {
  transform: scale(1.02);
}
#resultOverlay button:focus-visible,
.result-overlay button:focus-visible {
  outline: 2px solid rgba(255,255,255,.25);
  outline-offset: 4px;
}

/* If your markup has a container for the two actions, normalize it */
#resultOverlay .again-quit,
.result-overlay .again-quit {
  composes: result-actions;
}

/* In case the overlay had a dark box background, remove it */
#resultOverlay .modal-card,
.result-overlay .modal-card,
#resultOverlay .result-card,
.result-overlay .result-card {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}



/* === EXIT MODAL: remove button chrome + apply 95% dim === */

/* Common exit/confirm overlay roots */
#exitOverlay,
.exit-overlay,
#exitModal,
.exit-modal,
.confirm-overlay,
#confirmOverlay {
  position: absolute !important;
  inset: 0 !important;
  z-index: 3500 !important;
}

/* 95% dim background for exit/confirm overlays */
#exitOverlay::before,
.exit-overlay::before,
#exitModal::before,
.exit-modal::before,
.confirm-overlay::before,
#confirmOverlay::before {
  content: "";
  position: absolute;
  inset: 0;
  background: #000;
  opacity: 0.95;
  z-index: 0;
  pointer-events: none;
}

/* Make all content render above the dimmer */
#exitOverlay > *,
.exit-overlay > *,
#exitModal > *,
.exit-modal > *,
.confirm-overlay > *,
#confirmOverlay > * {
  position: relative;
  z-index: 1;
}

/* Strip the "button" look on TRY AGAIN / QUIT / YES / NO etc. */
#exitOverlay button,
.exit-overlay button,
#exitModal button,
.exit-modal button,
.confirm-overlay button,
#confirmOverlay button,
#exitOverlay .btn,
.exit-overlay .btn,
#exitModal .btn,
.exit-modal .btn,
.confirm-overlay .btn,
#confirmOverlay .btn,
#exitOverlay .answer,
.exit-overlay .answer,
#exitModal .answer,
.exit-modal .answer,
.confirm-overlay .answer,
#confirmOverlay .answer,
#exitOverlay .option-btn,
.exit-overlay .option-btn,
#exitModal .option-btn,
.exit-modal .option-btn,
.confirm-overlay .option-btn,
#confirmOverlay .option-btn {
  background: none !important;
  border: 0 !important;
  box-shadow: none !important;
  filter: none !important;
  padding: 0 !important;
  margin: 0 2.5rem !important;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  line-height: 1;
  cursor: pointer;
}

/* Large type treatment for exit actions */
#exitOverlay .result-actions,
.exit-overlay .result-actions,
#exitModal .result-actions,
.exit-modal .result-actions,
.confirm-overlay .result-actions,
#confirmOverlay .result-actions {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4rem;
  width: 100%;
  text-align: center;
  margin-top: clamp(12vh, 22vmin, 28vh);
  font-family: "AdvercaseBold", Impact, "League Gothic", system-ui, sans-serif;
  font-size: clamp(44px, 10vmin, 120px);
  text-shadow: none !important;
  color: #f0c04c;
}

/* Back arrow in exit modal: icon only, no chrome */
#exitOverlay .back,
.exit-overlay .back,
#exitModal .back,
.exit-modal .back,
#exitOverlay #backButton,
.exit-overlay #backButton,
#exitModal #backButton,
.exit-modal #backButton,
#exitOverlay .back-btn,
.exit-overlay .back-btn,
#exitModal .back-btn,
.exit-modal .back-btn {
  background: none !important;
  box-shadow: none !important;
  border: 0 !important;
  width: auto !important;
  height: auto !important;
  padding: 0 !important;
  backdrop-filter: none !important;
}


/* === STRIP BUTTON CHROME IN EXIT/CONFIRM OVERLAYS (strong override) === */

/* Target the action row if present */
#resultOverlay .result-actions button,
.result-overlay .result-actions button,
#exitOverlay .result-actions button,
.exit-overlay .result-actions button,
#exitModal .result-actions button,
.exit-modal .result-actions button,
.confirm-overlay .result-actions button,
#confirmOverlay .result-actions button,

/* Fallback: any buttons in these overlays */
#resultOverlay button,
.result-overlay button,
#exitOverlay button,
.exit-overlay button,
#exitModal button,
.exit-modal button,
.confirm-overlay button,
#confirmOverlay button {
  appearance: none !important;
  -webkit-appearance: none !important;
  background: none !important;
  background-image: none !important;
  border: 0 !important;
  border-radius: 0 !important;
  box-shadow: none !important;
  filter: none !important;
  text-shadow: none !important;
  padding: 0 !important;
  margin: 0 2.5rem !important; /* spacing between TRY AGAIN / QUIT */
  color: #f0c04c !important;
  font-family: "AdvercaseBold", Impact, "League Gothic", system-ui, sans-serif !important;
  font-size: clamp(44px, 10vmin, 120px) !important;
  line-height: 1 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.02em !important;
  background-clip: initial !important;
}

/* Kill any decorative pseudo-elements from the button skin */
#resultOverlay button::before, #resultOverlay button::after,
.result-overlay button::before, .result-overlay button::after,
#exitOverlay button::before, #exitOverlay button::after,
.exit-overlay button::before, .exit-overlay button::after,
#exitModal button::before, #exitModal button::after,
.exit-modal button::before, .exit-modal button::after,
.confirm-overlay button::before, .confirm-overlay button::after,
#confirmOverlay button::before, #confirmOverlay button::after {
  content: none !important;
  display: none !important;
}

/* If inner spans have skins, reset them */
#resultOverlay button *, .result-overlay button *,
#exitOverlay button *, .exit-overlay button *,
#exitModal button *, .exit-modal button *,
.confirm-overlay button *, #confirmOverlay button * {
  background: none !important;
  background-image: none !important;
  box-shadow: none !important;
  border: 0 !important;
  text-shadow: none !important;
  filter: none !important;
  color: inherit !important;
}

/* Layout for the two actions (center them) */
#resultOverlay .result-actions,
.result-overlay .result-actions,
#exitOverlay .result-actions,
.exit-overlay .result-actions,
#exitModal .result-actions,
.exit-modal .result-actions,
.confirm-overlay .result-actions,
#confirmOverlay .result-actions {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 4rem !important;
}

/* Back arrow: ensure no chrome */
#exitOverlay .back, .exit-overlay .back,
#exitModal .back, .exit-modal .back,
#resultOverlay .back, .result-overlay .back,
#exitOverlay #backButton, .exit-overlay #backButton,
#exitModal #backButton, .exit-modal #backButton,
#resultOverlay #backButton, .result-overlay #backButton {
  background: none !important;
  border: 0 !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  backdrop-filter: none !important;
  width: auto !important;
  height: auto !important;
  padding: 0 !important;
}


/* === Intermission Overlay: image-only TRY AGAIN / QUIT === */
#intermissionOverlay { position: absolute; inset: 0; z-index: 3500; }
#intermissionOverlay::before {
  content: ""; position: absolute; inset: 0; background: #000; opacity: .95;
  z-index: 0; pointer-events: none;
}
#intermissionOverlay > * { position: relative; z-index: 1; }


#intermissionOverlay .cta-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 4rem;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2;
}


#intermissionOverlay .inter-btn {
  background: none !important; border: 0 !important; padding: 0 !important; margin: 0 !important;
  box-shadow: none !important; cursor: pointer;
}
#intermissionOverlay .inter-btn img {
  display: block; width: auto; max-width: 100%; height: auto;
}


/* === HARD RESET: Remove all global button effects inside overlays === */
#intermissionOverlay button,
#exitOverlay button,
.result-overlay button,
.intermission-overlay button {
  all: unset;
  display: inline-block;
  cursor: pointer;
}

#intermissionOverlay button img,
#exitOverlay button img,
.result-overlay button img,
.intermission-overlay button img {
  display: block;
  width: auto;
  max-width: 100%;
  height: auto;
}


/* === Working restore: big gold arrow (functional) + hide small white arrow === */
#intermissionOverlay .ascii-arrow {
  position: absolute;
  top: clamp(12px, 3vmin, 32px);
  left: clamp(12px, 3vmin, 32px);
  font-family: "AdvercaseBold", Impact, "League Gothic", system-ui, sans-serif;
  font-size: clamp(48px, 12vmin, 160px);
  line-height: 1;
  color: #f0c04c;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 3;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
  transition: transform .15s ease;
}
#intermissionOverlay .ascii-arrow:hover { transform: scale(1.05); }
/* Hide any small corner arrow variants */
button.back, .back, #backButton, #arrow-icon, .exit-arrow { 
  display: none !important; visibility: hidden !important; pointer-events: none !important; 
}



/* === HUD SVG insertion (hide legacy HUD pieces) === */
.quiz-logo,
#helpButton,
#exitButton { display: none !important; }

/* Hide SPLASH big logo as well */
#splashOverlay .logo { display: none !important; }

/* Position the replacement HUD SVG */
#hudSVGWrap {
  position: fixed;
  top: 10px;
  left: 10px;
  z-index: 4600;
  pointer-events: auto;
}
#hudSVGWrap img, 
#hudSVGWrap svg {
  display: block;
  max-width: clamp(260px, 36vw, 560px);
  height: auto;
}

/* Optional: keep header spacing so layout below doesn't jump */
:root { --header-h: 96px; }
body { padding-top: var(--header-h); }


/* === Force SVG transparency === */
#hudSVG {
  mix-blend-mode: multiply;
  background-color: transparent !important;
}

/* === Original inline <style> from index.html (appended to override) === */
/* === DID YOU KNOW wrapping fix === */
.dky-wrap {
  display: block;
  max-width: 100%;
}
.dky-header {
  float: left;
  width: clamp(180px, 30vmin, 420px);
  margin: 0 20px 14px 0;
  shape-outside: inset(0 round 8px);
  shape-margin: 6px;
}
.dky-wrap::after {
  content: "";
  display: block;
  clear: both;
}
#result-fact {
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
  font-size: clamp(16px, 2.5vmin, 22px);
  line-height: 1.4;
  color: #f7f7f7;
}

/* === Enlarge HUD SVG === */
#hudSVGWrap svg {
  width: 50vw !important;
  height: auto !important;
  max-width: none !important;
  transform: scale(1.3);
  transform-origin: top center;
}

/* === HUD SVG sizing (normalized) === */
#hudSVGWrap { position: fixed; top: 10px; left: 10px; z-index: 4600; }
#hudSVGWrap svg { display: block; width: 100vw !important; height: auto !important; max-width: none !important; }

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}


/* Hide arrow or resume icons inside the EXIT modal */
#exitOverlay .back-arrow,
#exitOverlay .hud-exit,
#exitOverlay .exit-btn,
.exit-overlay .back-arrow,
.exit-overlay .hud-exit,
.exit-overlay .exit-btn,
#exitOverlay #howtoResumeMount,
.exit-overlay #howtoResumeMount,
#exitOverlay .howto-fallback-arrow,
.exit-overlay .howto-fallback-arrow {
  display: none !important;
}


/* === PATCH: Lock quiz area on screen; disable page scroll (Android kiosk) === */
:root { --headerH: var(--headerH, 96px); } /* keep existing var or default */

html, body {
  height: 100%;
  overflow: hidden;           /* stop page from scrolling */
}

.wrap {
  height: 100vh;
  overflow: hidden;           /* contain any accidental overflow */
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

/* Fix the quiz container under the header/logo */
.quiz-box {
  position: fixed !important;
  top: calc(var(--headerH, 96px) + 6px) !important;  /* sit just below header */
  left: 50% !important;
  transform: translateX(-50%) !important;
  width: 100% !important;
  max-width: var(--frame-max, 1280px) !important;
  padding: 0 10px !important;
  gap: 8px !important;
  max-height: calc(100vh - (var(--headerH, 96px) + 12px)) !important;
  overflow: hidden !important;    /* ensure the quiz itself doesn't scroll */
}

/* Keep the screen frame and option list compact and centered */
.stage {
  margin: 0 auto 8px auto !important;
  flex-shrink: 0 !important;
}
.prompt-timer,
.time-line-wrap,
.option-list {
  margin-left: auto !important;
  margin-right: auto !important;
}
.option-list {
  margin-bottom: 0 !important;
  padding-bottom: 0 !important;
  flex-shrink: 0 !important;
}

/* Dial back scaling on short screens so image + options fit without scroll */
@media (max-height: 820px) {
  :root { --frame-scale: 84vmin; }
  .option { font-size: clamp(12px, 3vmin, 18px) !important; }
}
@media (max-height: 720px) {
  :root { --frame-scale: 78vmin; }
  .quiz-logo img { max-height: 80px !important; }
  .option { padding: 10px 12px !important; }
}


/* === PATCH: Hide visible admin configurator hotspot but keep it interactive === */
/* These selectors cover common IDs/classes used in prior builds */
#adminHotspot,
#configHotspot,
.hotspot-admin,
.admin-hotspot,
.config-hotspot,
.hotspot,
[data-hotspot="admin"],
[data-role="admin-hotspot"],
[data-hotspot] {
  background: transparent !important;
  border: 0 !important;
  outline: 0 !important;
  box-shadow: none !important;
  color: transparent !important;
  opacity: 0 !important;         /* invisible but still present */
  pointer-events: auto !important;/* keep long-press/clicks working */
}

/* Nuke any pseudo-element highlights that draw the red box */
#adminHotspot::before, #adminHotspot::after,
#configHotspot::before, #configHotspot::after,
.hotspot-admin::before, .hotspot-admin::after,
.admin-hotspot::before, .admin-hotspot::after,
.config-hotspot::before, .config-hotspot::after,
.hotspot::before, .hotspot::after,
[data-hotspot="admin"]::before, [data-hotspot="admin"]::after,
[data-role="admin-hotspot"]::before, [data-role="admin-hotspot"]::after,
[data-hotspot]::before, [data-hotspot]::after {
  content: none !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
}

/* If the hotspot was positioned above content with a high z-index, keep it */
#adminHotspot, #configHotspot,
.hotspot, .admin-hotspot, .hotspot-admin, .config-hotspot,
[data-hotspot], [data-hotspot="admin"], [data-role="admin-hotspot"] {
  z-index: inherit; /* or comment out to keep original stacking */
}


/* === PATCH v2: Hide JS fallback hot-corner (red 60x60 box) but keep it clickable === */
div[style*="z-index: 999999"][style*="position: fixed"][style*="left: 0"][style*="top: 0"][style*="width: 60px"][style*="height: 60px"] {
  background: transparent !important;
  border: 0 !important;
  outline: 0 !important;
  box-shadow: none !important;
  opacity: 0 !important;           /* fully invisible */
  pointer-events: auto !important;  /* keep interactions alive */
}
/* Also silence any outlines when debug mode toggles */
.debug-hotspots #hudSVGWrap .hotspot { outline: none !important; }

</style><style>
/* === FINAL HUD-ONLY OVERRIDES (non-destructive) === */
:root { --hudWidth: clamp(260px, 80vw, 1400px); }

html body div#hudSVGWrap { 
  position: fixed; 
  top: 10px; 
  left: 10px; 
  z-index: 4600; 
  pointer-events: auto; 
}

html body div#hudSVGWrap svg {
  display: block !important;
  width: var(--hudWidth) !important;
  height: auto !important;
  max-width: none !important;
  transform-origin: top left;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* === Responsive HUD PNG Sizing === */
#hudSVGWrap img#hudSVG {
  display: block;
  width: 80vw;   /* scales with viewport width */
  height: auto;  /* keeps aspect ratio */
  max-width: none;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* === Final HUD SVG sizing override === */
html body .hud-stack #hudSVGWrap img#hudSVG {
  display: block !important;
  width: 20vw !important;   /* adjust as desired */
  height: auto !important;
  max-width: none !important;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* === HUD Hotspots (HOW TO & EXIT) === */
#hudSVGWrap { position: relative; }
#hudSVGWrap .hotspot {
  position: absolute;
  background: transparent;   /* fully invisible */
  border: 0;
  padding: 0;
  cursor: pointer;
  z-index: 9999;
}
/* Optional debug outline: uncomment to see hit areas */
/*
#hudSVGWrap .hotspot { outline: 2px dashed rgba(255,255,255,.4); }
*/
#howtoBtn {
  left: 12.856913%;
  top: 54.392444%;
  width: 56.030409%;
  height: 17.294203%;
}
#exitBtn {
  left: 70.856220%;
  top: 13.891776%;
  width: 24.387619%;
  height: 76.866835%;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* === Hotspot Interaction + Invisible Frame === */
#hudSVGWrap .hotspot {
  position: absolute;
  background: transparent;
  border: 0;
  padding: 0;
  margin: 0;
  outline: none;
  appearance: none;
  -webkit-appearance: none;
  -moz-appearance: none;
  cursor: pointer;
  z-index: 9999;
  /* Improve touch targets without showing a frame */
  /* You can increase these if you want more forgiving taps:
     but since we size by % already, keep as-is. */
  -webkit-tap-highlight-color: transparent;
}
#hudSVGWrap .hotspot:focus,
#hudSVGWrap .hotspot:focus-visible,
#hudSVGWrap .hotspot:hover,
#hudSVGWrap .hotspot:active {
  outline: none;
  box-shadow: none;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* === FORCE INVISIBLE HOTSPOTS (override any global button skin) === */
html body .hud-stack #hudSVGWrap button.hotspot,
html body .hud-stack #hudSVGWrap button.hotspot:focus,
html body .hud-stack #hudSVGWrap button.hotspot:hover,
html body .hud-stack #hudSVGWrap button.hotspot:active,
html body .hud-stack #hudSVGWrap button.hotspot:focus-visible {
  background: none !important;
  background-color: transparent !important;
  border: 0 !important;
  outline: 0 !important;
  box-shadow: none !important;
  filter: none !important;
  backdrop-filter: none !important;
  border-radius: 0 !important;
  color: transparent !important;
  text-shadow: none !important;
  opacity: 0 !important;            /* fully invisible but clickable */
  -webkit-tap-highlight-color: transparent;
  appearance: none !important;
  -webkit-appearance: none !important;
  -moz-appearance: none !important;
}
/* Remove any pseudo-element skins */
html body .hud-stack #hudSVGWrap button.hotspot::before,
html body .hud-stack #hudSVGWrap button.hotspot::after {
  content: none !important;
  display: none !important;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* Debug outlines only when window.hudHotspotDebug=1 (set via console) */
html.debug-hotspots #hudSVGWrap .hotspot { outline: 2px dashed rgba(255,255,255,.35); }

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* Final polish: hide the small text 'Exit' button but keep DOM hooks intact */
button#exitButton,
button[aria-label="Exit"].pill,
button.exit.pill {
  background: transparent !important;
  color: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  text-shadow: none !important;
}
/* Keep it off the interactive layer so it doesn't block the art */
button#exitButton.pill,
button[aria-label="Exit"].pill,
button.exit.pill {
  pointer-events: none !important;
  opacity: 0 !important;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* Defensive: prevent accidental outlines/frames on overlays */
.overlay, .dropin, .cut-printit, .did-you-know { outline: none !important; border: none !important; }

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style><style>
/* === HOW TO: lean overlay — no img src swaps, no observers === */
.howto-mode .modal-body,
.howto-mode .panel,
.howto-mode .content,
.howto-mode .body,
.howto-mode .two-col,
.howto-mode .two-column { position: relative; }
.howto-mode .modal-body::before,
.howto-mode .panel::before,
.howto-mode .content::before,
.howto-mode .body::before,
.howto-mode .two-col::before,
.howto-mode .two-column::before {
  content: "";
  position: absolute; inset: 0;
  background: center / cover no-repeat url("images/info_back.png");
  pointer-events: none; opacity: 1;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style>
<style>
  html, body {
    height: 100%;
    width: 100%;
    margin: 0;
    background: url('images/map.png') no-repeat center center fixed;
    background-size: cover;
    background-color: #000; /* fallback */
  }
  #app, #mainContainer {
    background: transparent !important;
  }
</style>


<style>
  /* HOWTO modal background image */
  #howtoModal::before {
    content: "";
    position: absolute;
    inset: 0;
    background: url('images/info_back.png') center center / cover no-repeat;
    opacity: 0.6;
    z-index: 0;
  }
  #howtoModal * {
    position: relative;
    z-index: 1;
  }
</style>


<script>
(async function(){
  // === Asset sanity check (images/logos/videos) ===
  const bases = [
    "acs-higbees","av-psq","ca-ws-caam","dh-lemko","fc-browns",
    "judas-man","kfc-cma","lod-euclid-tavern","sm-arcade","sm3-euclid",
    "soa-towerpress","stp-greyhoundstation","u-alhambra-apt","w2c-luce",
    "af1-severance"
  ];
  console.groupCollapsed("🎞 Reel-to-Real Asset Check");
  for (const base of bases){
    const logo = `images/films/${base.split("-")[0]}.png`;
    const img  = `images/${base}.png`;
    const vid  = `videos/${base}.mp4`;
    try{
      const [imgOK, logoOK, vidOK] = await Promise.all([
        fetch(img).then(r=>r.ok).catch(()=>false),
        fetch(logo).then(r=>r.ok).catch(()=>false),
        fetch(vid).then(r=>r.ok).catch(()=>false),
      ]);
      console.log(base, {
        image: imgOK ? "✅" : "❌ " + img,
        logo : logoOK ? "✅" : "❌ " + logo,
        video: vidOK ? "✅" : "❌ " + vid
      });
    }catch(e){ console.warn("check failed", base, e); }
  }
  console.groupEnd();
})();
</script>

<style>
/* --- Patch: hide extra back arrow on quit modal --- */
#exitBack.back-arrow { display: none !important; }
/* --- Quiz options deactivated visuals --- */
.option-list.quiz-deactivated { pointer-events: none !important; opacity: .45 !important; filter: grayscale(1) contrast(.9) !important; transition: opacity .2s ease; }
.option-list.quiz-deactivated .option { cursor: not-allowed !important; }
</style>
<style>
/* Results page: hide the dedicated close button only */

</style>
<style>
/* === RG INNER TYPO OVERRIDES (match app typography) === */
#rg-overlay { font-family: 'AdvercaseRegular', sans-serif !important; color: #f3efe4 !important; }
#rg-inner { font-family: 'AdvercaseRegular', sans-serif !important; letter-spacing: .02em !important; color: #f3efe4 !important; text-transform: none !important; }

/* Header */
#rg-header { color: #f3efe4 !important; text-align: center !important; margin-bottom: 8px !important; }
#rg-title  { font-family: 'AdvercaseBold', sans-serif !important; font-size: clamp(22px, 4vw, 32px) !important; letter-spacing: .03em !important; text-shadow: 0 2px 0 #000 !important; text-transform: uppercase !important; }
#rg-sub    { margin-top: 6px !important; font-family: 'AdvercaseRegular', sans-serif !important; font-size: clamp(14px, 2.6vw, 18px) !important; opacity: .9 !important; letter-spacing: .02em !important; }

/* Cards */
.rg-card  { background: #111 !important; border: 1px solid #ffffff22 !important; border-radius: 12px !important; }
.rg-title { font-family: 'AdvercaseBold', sans-serif !important; font-size: clamp(13px, 2.6vw, 16px) !important; letter-spacing: .02em !important; text-transform: uppercase !important; color: #f3efe4 !important; opacity: .95 !important; }

/* Correct/Wrong chips using palette accents */
.rg-chip      { font-family: 'AdvercaseBold', sans-serif !important; letter-spacing: .02em !important; border: 1px solid #0000 !important; }
.rg-chip.ok   { background: #e3a73a !important; color: #1b130e !important; }   /* golden */
.rg-chip.bad  { background: #c24d39 !important; color: #fff !important; }     /* burnt */

/* Footer and button image */
#rg-footer { display: flex !important; gap: 10px !important; justify-content: center !important; padding-top: 6px !important; }
#rg-footer .navbtn { font-family: 'AdvercaseBold', sans-serif !important; letter-spacing: .04em !important; text-transform: uppercase !important; }
#rg-again { cursor: pointer !important; }

/* Grid spacing + responsiveness stays as-is; only typography is unified */

</style>

<!-- R2R PATCH: playback & layout tuning -->
<style>
  /* GPU hinting for splash video for smoother playback on Android WebView */
  #splashOverlay .bgvid {
    transform: translateZ(0);
    backface-visibility: hidden;
    contain: layout paint size;
    image-rendering: auto;
  }

  /* Gentle upward nudge for quiz boxes */
  #quizPanel, .quiz-panel, .quiz-grid, .quiz-options {
    margin-top: -1.25vh;
  }

  /* Slightly smaller CUT—CUT and Did You Know text */
  .rs-cut, .rs-cut-title, .cut-cut, .cutcut, .rs-cut-label,
  .did-you-know, .rs-dyk-title, .rs-dyk-text, .dyk {
    font-size: 0.94em;
    line-height: 1.08;
    letter-spacing: 0.01em;
  }
</style>

<!-- R2R PATCH v3: HUD hidden until quiz starts -->
<style>
  /* When body (or html) has .hud-hidden, hide common HUD elements */
  html.hud-hidden .rs-float,
  body.hud-hidden .rs-float,
  html.hud-hidden #helpButton,
  body.hud-hidden #helpButton,
  html.hud-hidden #exitButton,
  body.hud-hidden #exitButton,
  html.hud-hidden #searchBar,
  body.hud-hidden #searchBar,
  html.hud-hidden #rs-legend,
  body.hud-hidden #rs-legend,
  html.hud-hidden .rs-legend,
  body.hud-hidden .rs-legend,
  html.hud-hidden #admin_menu_now,
  body.hud-hidden #admin_menu_now,
  html.hud-hidden #adminBar,
  body.hud-hidden #adminBar,
  html.hud-hidden #chipBar,
  body.hud-hidden #chipBar,
  html.hud-hidden .hud,
  body.hud-hidden .hud {
    display: none !important;
  }
</style>


<!-- R2R PATCH v4: Strong HUD hide + HUDGate overlay -->
<style>
  /* Absolute top-layer invisible shield to block any HUD that slips through */
  #HUDGate {
    position: fixed;
    inset: 0;
    z-index: 2147483647; /* max */
    background: transparent;
    display: none;
    pointer-events: auto; /* block clicks to underlying HUD */
  }
  html.hud-hidden #HUDGate { display: block; }

  /* Strong hide: hit visibility, opacity, and pointer-events; keep layout unaffected */
  html.hud-hidden body .rs-float,
  html.hud-hidden body .hud,
  html.hud-hidden body #helpButton,
  html.hud-hidden body #exitButton,
  html.hud-hidden body #searchBar,
  html.hud-hidden body #rs-legend,
  html.hud-hidden body .rs-legend,
  html.hud-hidden body #admin_menu_now,
  html.hud-hidden body #adminBar,
  html.hud-hidden body #chipBar,
  html.hud-hidden body .rs-chipbar,
  html.hud-hidden body [data-hud],
  html.hud-hidden body .hud-controls,
  html.hud-hidden body .rs-ui,
  html.hud-hidden body .rs-toolbar {
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }

  /* If any of the above are absolutely positioned and cause ghost spacing, force display none */
  html.hud-hidden body .rs-float,
  html.hud-hidden body .hud,
  html.hud-hidden body #adminBar,
  html.hud-hidden body #admin_menu_now {
    display: none !important;
  }
</style>


<!-- R2R CONSOLIDATION CSS -->
<style>
  #HUDRoot { position: relative; }
  #HUDRoot.is-hidden { display: none !important; }
</style>


<!-- R2R SPLASH-HUD CSS v2: HUD visible by default; hidden only during splash -->
<style>
  /* HUD is normally visible */
  #HUDRoot { display: block; }

  /* When splash is active, hide the HUD */
  html.splash-active #HUDRoot,
  body.splash-active #HUDRoot {
    display: none !important;
  }
</style>


<!-- R2R SPLASH-HUD CSS v3: extra guards -->
<style>
  /* Already: html/body.splash-active hides HUDRoot. Add guards: */
  body[data-state="splash"] #HUDRoot { display: none !important; }
  /* If overlay exists and is shown, hide HUD */
  #splashOverlay.show ~ #HUDRoot { display: none !important; }
</style>

</head>
<body data-state="splash">

<!-- R2R CONSOLIDATION: Unified HUD root -->
<div id="HUDRoot" data-hud></div>

<div class="hud-stack">
<!-- Replacement HUD SVG -->
<div id="hudSVGWrap">
<img alt="HUD" id="hudSVG" src="file.svg"/><button aria-label="How To" class="hotspot" id="howtoBtn" tabindex="0" title="How To"></button><button aria-label="Exit" class="hotspot" id="exitBtn" tabindex="0" title="Exit"></button></div>
<div class="quiz-logo">
<img alt="Reel to Real: Cleveland" src="images/logo.png"/>
</div>
<img alt="Help Instructions" id="helpButton" src="images/info_back.png"/>
</div>
<!-- ===== SPLASH ===== -->
<script id="splashManifest" type="application/json">["videos/0.mp4","videos/1.mp4","videos/2.mp4"]</script>
<div aria-label="Start Screen" id="splashOverlay" role="dialog">
<video autoplay="" class="bgvid" loop="" muted="" playsinline="" preload="metadata"></video>
<div class="vignette"></div>
<div class="light-leaks"></div>
<div class="dirt"></div>
<div class="shutter-flicker"></div>
<div class="grain"></div>
<img alt="Reel to Real: Cleveland" class="logo" src="images/logo.png"/>
<div class="tap"><img alt="Tap to Start" class="tap-img" src="images/tts.png"/></div>
</div>
<!-- ===== QUIZ APP ===== -->
<div class="exit-btn" id="exitButton" title="Exit">
<img alt="EXIT" id="exitImg" src="images/exit_off.png"/>
</div>
<div class="topbar">
<button class="btn-start">Start Quiz</button>
<span class="badge">1 / 10</span>
</div>
<div class="wrap">
<div class="quiz-box">
<!-- Reel to Reel logo at top center -->
<div class="help-link" id="helpLink">Help / Instructions</div>
<div class="stage-container inline1">
<div class="stage">
<!-- Designed question badge + progress -->
<div aria-live="polite" class="qbadge" id="qBadge">
<div class="qbadge-top"></div>
<div class="qbadge-body"><span class="qnum">1 / 10</span></div>
</div>
<div aria-hidden="true" class="qprogress"><div class="qprogress-fill inline2"></div></div>
<img alt="" class="bg" src="images/intermission_bg.png"/>
<figure class="location-figure inline3">
<img alt="Location image" class="location-image" src=""/>
<figcaption class="location-caption"></figcaption>
</figure>
<img alt="Score animation" class="score-anim"/>
<div aria-hidden="true" class="result-overlay" id="resultOverlay"><div><div class="result-text"></div><div class="result-sub"></div><div class="col-right"><div class="dky-wrap"><img alt="Did you know?" class="dky-header" src="images/didyouknow.uniform.png"/><div id="result-fact"></div></div></div></div></div>
<div aria-live="polite" class="next-count inline4" id="nextCountdown">Next: 10</div>
<!-- In-frame Exit Overlay -->
<div aria-hidden="true" class="screen-overlay" id="intermissionOverlay">
<div class="panel">
<img alt="Intermission Background" class="bg" src="images/intermission_bg.png"/>
<button aria-label="Back to quiz" class="ascii-arrow" id="backArrow">←</button>
<div class="cta-row">
<button class="inter-btn" id="btnTryAgain"><img alt="Try Again?" src="images/try_again_text.png"/></button>
<button class="inter-btn" id="btnQuit"><img alt="Quit" src="images/quit_text.png"/></button>
</div>
</div>
</div>
</div>
<div aria-live="polite" class="prompt-timer">
<div class="question-text"></div>
<div class="time-area"><span class="time-text">Remaining Time</span> <span class="second">20</span></div>
</div>
<div class="time-line-wrap"><div class="time-line"><div class="time-fill"></div></div></div>
<div class="option-list"></div>
</div>
</div>
<div aria-live="polite" class="big-count" id="bigCountdown">20</div>
<div aria-hidden="true" class="loading" id="loading"><div class="stage-loader"><svg id="camera-loader" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org">
<defs id="defs12"></defs>
<path d="M 51.5625 0 C 50.667739 -0.00962983 49.756943 0.05800477 48.84375 0.1875 C 41.018415 1.2971691 35.117198 7.3376842 33.8125 14.71875 C 30.504071 7.9918491 23.138091 3.8277945 15.3125 4.9375 C 5.573576 6.3185261 -1.1937811 15.321773 0.1875 25.0625 C 1.030765 31.00916 4.7245026 35.850708 9.6875 38.40625 L 10.59375 44.84375 L 41.21875 40.5 C 42.618434 40.301472 43.966737 41.101389 44.15625 42.4375 C 44.34576 43.773612 43.274684 44.957723 41.875 45.15625 L 11.25 49.5 L 12.40625 57.6875 C 12.593105 59.005185 13.837018 59.937079 15.15625 59.75 L 64.25 52.78125 C 65.567815 52.594377 66.499355 51.348937 66.3125 50.03125 L 63.5625 30.78125 C 67.618077 26.946961 69.843395 21.259142 69 15.3125 C 67.748216 6.4849658 60.211858 0.09304631 51.5625 0 z M 51.28125 3.75 C 58.168631 3.6506107 64.22589 8.6859174 65.21875 15.6875 C 66.295328 23.279482 61.029156 30.329715 53.4375 31.40625 C 45.84552 32.482829 38.795329 27.18573 37.71875 19.59375 C 36.641441 11.998855 41.938942 4.9828747 49.53125 3.90625 C 50.124347 3.8221462 50.697574 3.7584222 51.28125 3.75 z M 17.5625 8.53125 C 24.449868 8.4318561 30.507144 13.46718 31.5 20.46875 C 32.576577 28.060719 27.310389 35.110969 19.71875 36.1875 C 12.126783 37.264077 5.0765804 31.966969 4 24.375 C 2.9226914 16.780121 8.2202041 9.7641225 15.8125 8.6875 C 16.405598 8.603395 16.978824 8.5396714 17.5625 8.53125 z M 79.71875 27.46875 L 66.9375 33.65625 L 68.53125 44.8125 L 82.53125 47.21875 L 79.71875 27.46875 z M 41.71875 41.0625 C 41.582761 41.058251 41.422178 41.073761 41.28125 41.09375 L 8.15625 45.78125 L 7.90625 44.09375 L 2.78125 43.9375 L 4 52.53125 L 8.875 50.9375 L 8.625 49.25 L 41.78125 44.5625 C 42.908673 44.40259 43.699053 43.493996 43.5625 42.53125 C 43.443014 41.688847 42.670671 41.092246 41.71875 41.0625 z M 51.53125 57.21875 L 28.625 60.4375 C 28.625117 63.279515 28.625057 61.501735 28.625 64.34375 L 30.90625 64.34375 L 32.40625 64.34375 L 17.21875 97.46875 C 16.804629 98.371268 17.19123 99.429629 18.09375 99.84375 C 18.996268 100.25787 20.054629 99.87127 20.46875 98.96875 L 36.34375 64.34375 L 38.28125 64.34375 L 38.28125 98.21875 C 38.28125 99.211743 39.069507 100 40.0625 100 C 41.055493 100 41.875 99.211743 41.875 98.21875 L 41.875 64.34375 L 43.6875 64.34375 L 59.71875 98.96875 C 60.136118 99.869771 61.192729 100.26112 62.09375 99.84375 C 62.994771 99.426382 63.386118 98.338521 62.96875 97.4375 L 47.65625 64.34375 L 49.09375 64.34375 L 51.53125 64.34375 L 51.53125 57.21875 z " id="camera-body"></path>
<path d="m 17.763265,10.60917 c -1.849868,0 -3.349902,1.500036 -3.349902,3.349902 0,1.849868 1.500034,3.34863 3.349902,3.34863 1.849865,0 3.348629,-1.498762 3.348629,-3.34863 0,-1.849866 -1.498764,-3.349902 -3.348629,-3.349902 z m -8.0539896,5.851215 c -1.849868,0 -3.3499023,1.500032 -3.3499023,3.349898 0,1.849866 1.5000343,3.349897 3.3499023,3.349897 1.8498656,0 3.3498996,-1.500031 3.3498996,-3.349897 0,-1.849866 -1.500034,-3.349898 -3.3498996,-3.349898 z m 16.1016246,0 c -1.849868,0 -3.3499,1.500032 -3.3499,3.349898 0,1.849866 1.500032,3.349897 3.3499,3.349897 1.849865,0 3.348629,-1.500031 3.348629,-3.349897 0,-1.849866 -1.498764,-3.349898 -3.348629,-3.349898 z m -13.023579,9.460259 c -1.849867,0 -3.3498994,1.500032 -3.3498994,3.349902 0,1.849865 1.5000324,3.348629 3.3498994,3.348629 1.849867,0 3.3499,-1.498764 3.3499,-3.348629 0,-1.84987 -1.500033,-3.349902 -3.3499,-3.349902 z m 9.950613,0 c -1.849866,0 -3.348629,1.500032 -3.348629,3.349902 0,1.849865 1.498763,3.348629 3.348629,3.348629 1.849865,0 3.349901,-1.498764 3.349901,-3.348629 0,-1.84987 -1.500036,-3.349902 -3.349901,-3.349902 z" id="reel-1">
<animatetransform attributename="transform" attributetype="XML" begin="0" dur="2s" from="0 17.66 22.74" repeatcount="indefinite" to="360 17.66 22.74" type="rotate"></animatetransform>
</path>
<path d="m 51.483904,5.8171007 c -1.849872,0 -3.349908,1.5000388 -3.349908,3.3499074 0,1.8498709 1.500036,3.3486359 3.349908,3.3486359 1.849868,0 3.348635,-1.498765 3.348635,-3.3486359 0,-1.8498686 -1.498767,-3.3499074 -3.348635,-3.3499074 z M 43.4299,11.668326 c -1.849872,0 -3.349908,1.500034 -3.349908,3.349904 0,1.849869 1.500036,3.349903 3.349908,3.349903 1.849869,0 3.349906,-1.500034 3.349906,-3.349903 0,-1.84987 -1.500037,-3.349904 -3.349906,-3.349904 z m 16.101654,0 c -1.849871,0 -3.349907,1.500034 -3.349907,3.349904 0,1.849869 1.500036,3.349903 3.349907,3.349903 1.849867,0 3.348635,-1.500034 3.348635,-3.349903 0,-1.84987 -1.498768,-3.349904 -3.348635,-3.349904 z m -13.023602,9.460276 c -1.849871,0 -3.349907,1.500034 -3.349907,3.349908 0,1.849869 1.500036,3.348635 3.349907,3.348635 1.849869,0 3.349905,-1.498766 3.349905,-3.348635 0,-1.849874 -1.500036,-3.349908 -3.349905,-3.349908 z m 9.950632,0 c -1.849872,0 -3.348637,1.500034 -3.348637,3.349908 0,1.849869 1.498765,3.348635 3.348637,3.348635 1.849867,0 3.349905,-1.498766 3.349905,-3.348635 0,-1.849874 -1.500038,-3.349908 -3.349905,-3.349908 z" id="reel-2">
<animatetransform attributename="transform" attributetype="XML" begin="0" dur="3.6s" from="0 51.4 17.7" repeatcount="indefinite" to="360 51.4 17.7" type="rotate"></animatetransform>
</path>
</svg></div></div></div>
<!-- Final score outside the frame -->
<div aria-live="polite" class="final-score-out inline5" id="finalScoreOut"></div>
<!-- ===== DATA & ENGINE (same) ===== -->
<script>

/* __IDLE_LOG_THROTTLE__ */
(function(){
  try {
    const _orig = console.log;
    let _lastIdle = 0;
    console.log = function(...args){
      try{
        if (args && args.length && typeof args[0]==='string' && args[0].indexOf('[idle]') !== -1){
          const now = Date.now();
          if (now - _lastIdle < 3000) { return; } // drop spam within 3s window
          _lastIdle = now;
        }
      }catch(e){}
      return _orig.apply(console, args);
    };
  } catch(e){}
})();
// Short, location-focused blurbs shown under CORRECT/WRONG
const SHORTS = {
  "Kid From Cleveland": "The Medieval Court’s Wishing Well inside the Cleveland Museum of Art features prominently in the film.",
  "The Fortune Cookie": "Game-day scenes were filmed during a real Browns–Vikings matchup, with 10,000 fans as extras.",
  "Uptight": "The Alhambra Apartments anchored scenes reflecting Cleveland’s working-class Black neighborhoods.",
  "The Deer Hunter": "The wedding reception was filmed inside Lemko Hall, with the ceremony at St. Theodosius Cathedral.",
  "Stranger Than Paradise": "The Greyhound Bus Station served as the Cleveland stopover, portraying the city as a bleak waypoint.",
  "Light of Day": "Joan Jett and Michael J. Fox performed on stage at the Euclid Tavern, filmed live at the club.",
  "A Christmas Story": "Ralphie’s visit to Santa was filmed at Higbee’s, with Public Square decorated for a 1940s Christmas parade.",
  "Captain America: Winter Soldier": "The Crawford Museum became the Smithsonian exhibit where Steve Rogers revisits his past.",
  "Air Force One": "Severance Hall doubled as Moscow’s government palace in the opening reception scene.",
  "Welcome to Collinwood": "The Luce Theater (formerly Olympia) was used as a central backdrop for the heist story.",
  "The Avengers": "Public Square stood in for Stuttgart, Germany during Loki’s confrontation scene.",
  "Judas and the Black Messiah": "The Mansfield Reformatory doubled as a 1960s Chicago jail in the prison scenes.",
  "Superman (2025)": "The Arcade’s glass atrium was transformed into Metropolis, echoing Superman’s Cleveland roots.",
  "Sign of Aquarius": "Tower Press appeared as a counterculture backdrop in Cleveland’s 1970-era youth film.",
  "Spider-Man 3": "The armored truck chase was filmed on Euclid Avenue, with the Halle Building standing in as Manhattan."
};

const DIDYOUKNOWS = {"Kid From Cleveland": "First film with athletes playing themselves: Bob Feller, Satchel Paige, Lou Boudreau, Hank Greenberg.", "The Fortune Cookie": "First film pairing Jack Lemmon and Walter Matthau, beginning their legendary comedy partnership.", "Uptight": "Co-written by Ruby Dee; FBI monitored filming fearing racial unrest.", "The Deer Hunter": "Lemko Hall wedding scene ran 30 minutes, filmed over weeks.", "Stranger Than Paradise": "Won Cannes Camera d’Or; launched Jim Jarmusch, who returned home to shoot Cleveland’s section.", "Light of Day": "Originally titled Born in the U.S.A.; Bruce Springsteen declined but gave the song, renaming it Light of Day.", "A Christmas Story": "Higbee’s Santa slide was dismantled immediately after filming — built only for the movie.", "Captain America: Winter Soldier": "Scarlett Johansson praised Cleveland’s grid and architecture for making complex stunt filming easy.", "Air Force One": "One of 1997’s highest-grossing films, solidifying Harrison Ford’s late-’90s action-hero reputation.", "Welcome to Collinwood": "Remake of Italian heist comedy Big Deal on Madonna Street, reset in Cleveland.", "The Avengers": "The “shawarma scene” after the credits was filmed last-minute in a Cleveland diner once principal photography wrapped.", "Judas and the Black Messiah": "Mansfield’s Ohio State Reformatory, already famous from Shawshank Redemption, was reused as a set.", "Superman (2025)": "Extras weren’t told it was Superman; call sheets used fake titles to keep filming secret.", "Sign of Aquarius": "Soundtrack featured Cleveland’s underground composers Al Zbacnic and Tom Baker, embedding local hippie-rock culture.", "Spider-Man 3": "Sam Raimi chose Cleveland’s long avenues, better for action, over real Manhattan streets."};
  class Question{constructor(q,a,c,m={}){this.questionText=q;this.answers=a;this.correctAnswer=c;this.meta=m}checkAnswer(k){return k===this.correctAnswer}}
  const films=[
    {title:"Kid From Cleveland",location:{name:"Cleveland Museum of Art — Medieval Court, Well Head (Italy, Verona, 1400s) • 11150 East Blvd, Cleveland, OH 44106",image:"images/kfc-cma.png"},questions:["Which 1949 film featured scenes inside the Cleveland Museum of Art on East Blvd?","Which movie placed a troubled teen beneath the marble arches of the Museum’s Medieval Court?","Which film showed Cleveland’s Museum of Art as a place of redemption for a local boy?","Which postwar drama used the Museum at 11150 East Blvd as a symbol of culture and order?","Name the film that mixed Indians baseball with a visit to the Museum of Art’s galleries.","Which movie had Cleveland’s mayor and the Museum in the same civic booster frame?","Which film staged a turning point beside the Medieval Court’s Italian well head?","What title contrasted the Museum’s Renaissance art with Cleveland street trouble?","Which 1949 production marketed Cleveland using set pieces inside the Museum of Art?","Which Republic Pictures release turned the Museum into a civic stage set for reform?"]},
    {title:"The Fortune Cookie",location:{name:"Cleveland Municipal Stadium (archival) • 1085 W. 3rd St, Cleveland, OH 44114",image:"images/fc-browns.png"},questions:["Which 1966 Billy Wilder comedy filmed at Cleveland Municipal Stadium on the lakefront?","Which movie opened with an NFL game at the Browns’ old stadium at 1085 W. 3rd St?","Which film starred Jack Lemmon and Walter Matthau at Municipal Stadium?","Which film staged an injury scam during a football game at Cleveland’s stadium?","Which comedy shows Lemmon being taken by ambulance out of Municipal Stadium?","What movie turned the lakefront stadium into the launchpad for a courtroom caper?","Which film used real Browns–Vikings footage spliced with shots inside the stadium?","What Wilder film highlighted the west entrance and locker rooms of Municipal Stadium?","Which 1966 production made Browns fans part of a con-game setting on the lakefront?","Which film meticulously blended game film with staged stadium shots in Cleveland?"]},
    {title:"Uptight",location:{name:"Alhambra Apartments, Wade Park • 8616 Wade Park Ave, Cleveland, OH 44106",image:"images/u-alhambra-apt.png"},questions:["Which 1968 film shot key scenes at Cleveland’s Alhambra Apartments on Wade Park Avenue?","What movie retold The Informer in Cleveland’s Hough neighborhood around Wade Park?","Which film featured revolutionary meetings in an apartment block at 8616 Wade Park Ave?","Which movie linked the Alhambra Apartments to the Black liberation struggle in Cleveland?","Which film used the architecture of Wade Park to emphasize urban tension and betrayal?","What 1968 drama shot at Alhambra symbolized a movement fracturing from within?","Which film was both a Hollywood production and a Cleveland street-level document of unrest?","Which movie intercut Alhambra interiors with tense exteriors in the Hough area?","What film dramatized Black Power politics using Cleveland’s Wade Park built environment?","Which Jules Dassin film staged its climax in and around the Alhambra Apartments?"]},
    {title:"The Deer Hunter",location:{name:"Lemko Hall • 2337 W. 14th St, Cleveland, OH 44113",image:"images/dh-lemko.png"},questions:["Which Vietnam epic begins with a wedding at Lemko Hall on West 14th Street?","Before the steel mills and the war, the movie opened with a dance in Tremont—what film?","Which film’s opening wedding reception at Lemko Hall lasts nearly an hour onscreen?","Which movie juxtaposed Orthodox ritual at Lemko Hall with the chaos of combat later?","Which Oscar winner cast Tremont’s Lemko Hall as home before Vietnam tears it apart?","Which title anchored its portrait of friendship in a Lemko Hall celebration?","Which 1978 classic treated Cleveland’s immigrant communities as its emotional core at Lemko Hall?","Which film made Lemko Hall one of cinema’s most famous wedding venues?","Which film begins in Tremont and ends in a silence of Russian roulette abroad?","Which movie binds the memory of Lemko Hall to loss, ritual, and return?"]},
    {title:"Stranger Than Paradise",location:{name:"Greyhound Bus Station • 1465 Chester Ave, Cleveland, OH 44114",image:"images/stp-greyhoundstation.png"},questions:["Which 1984 indie turned Cleveland’s Greyhound Bus Station on Chester Ave into a deadpan backdrop?","Jim Jarmusch’s early feature shot snowbound scenes near the bus terminal—what film?","Which film showed arrivals and departures at the Chester Avenue Greyhound sign?","Which minimalist movie found bleak comedy in long takes at the downtown bus station?","Which indie frames Cleveland’s terminal as a waystation to nowhere in particular?","Which film uses the bus station’s neon and concrete to underline its flat affect?","Which title pairs a Hungarian cousin with Cleveland’s wintry bus station tableau?","Which film’s Cleveland segment drifts from the terminal toward Lake Erie’s edge?","Which black-and-white indie makes the bus station feel absurd yet familiar?","Which movie proves almost nothing happening at a bus terminal can still be fascinating?"]},
    {title:"Light of Day",location:{name:"Euclid Tavern • 11629 Euclid Ave, Cleveland, OH 44106",image:"images/lod-euclid-tavern.png"},questions:["Which movie turned Cleveland’s Euclid Tavern into a rock stage for Joan Jett?","Michael J. Fox traded skateboards for guitars at the Euclid Tavern—what film?","Which 1987 drama shouted 'Cleveland rocks' years before the TV theme song?","Which film cast Jett and Fox as struggling Rust Belt musicians at a University Circle bar?","Which title shows the Tavern’s tiny stage as a working-class escape valve?","Which movie treats Euclid Tavern as more than a bar—a scene, a grind, a hope?","Which film frames the Tavern’s neon and brick as a rehearsal for leaving town?","Which drama uses the tight interior of Euclid Tavern to push family tensions to the edge?","Which Paul Schrader movie makes Cleveland’s club circuit feel like hard currency?","Which film lets the soundboard hum of Euclid Tavern carry blue-collar dreams?"]},
    {title:"A Christmas Story",location:{name:"Higbee’s Department Store, Public Square • 100 Public Square, Cleveland, OH 44113",image:"images/acs-higbees.png"},questions:["Which 1983 holiday classic filmed its Santa slide at Higbee’s on Public Square?","Which movie turned Higbee’s windows into Ralphie’s winter dreamscape downtown?","Which film made Public Square look like a postcard of Christmas lights and snow?","Which title has kids climbing toward Santa inside Higbee’s festive atrium?","Which movie fused Indiana childhood with Cleveland storefronts at Higbee’s?","Which holiday film uses the Terminal Tower skyline as a seasonal backdrop?","Which film’s parade and storefronts orbit Higbee’s on Public Square?","Which classic helps fuel modern tourism to Higbee’s and Tremont every December?","Which movie’s department-store scenes are anchored at 100 Public Square?","Which title warns 'You’ll shoot your eye out!' while Santa boots kids down the slide?"]},
    {title:"Captain America: Winter Soldier",location:{name:"Crawford Auto-Aviation Museum (Western Reserve Historical Society) • 10825 East Blvd, Cleveland, OH 44106",image:"images/ca-ws-caam.png"},questions:["Which Marvel chapter filmed among vintage cars at the Crawford Auto-Aviation Museum?","Which film staged Smithsonian-look exhibits inside WRHS’s University Circle galleries?","Which blockbuster set Chris Evans walking past Cleveland’s classic autos as 'Brooklyn' displays?","Which superhero movie turned WRHS exhibits into a stand-in for the Smithsonian?","Which title used polished floors and chrome at 10825 East Blvd for period displays?","Which film cut between museum vitrines and character flashbacks inside WRHS?","Which Marvel entry transformed Cleveland’s auto-aviation collection into national myth?","Which movie reframed local car history as a hero’s museum memory trail?","Which blockbuster made University Circle look like Washington, D.C. for a day?","Which film’s museum sequence is actually Cleveland’s WRHS Crawford galleries?"]},
    {title:"Air Force One",location:{name:"Severance Hall, University Circle • 11001 Euclid Ave, Cleveland, OH 44106",image:"images/af1-severance.png"},questions:["Which 1997 thriller disguised Severance Hall’s interiors as Moscow spaces?","Which movie turned an orchestra hall at 11001 Euclid Ave into Kremlin décor?","Which title staged intrigue beneath Severance Hall’s elegant ceilings?","Which film pivots from presidential heroics to Cleveland’s music palace interiors?","Which blockbuster used University Circle architecture to sell international stakes?","Which film’s Cleveland shoot swapped violins for villains inside Severance Hall?","Which action classic stitched shots of Severance into a global chase?","Which movie made Cleveland’s orchestra home play double as foreign government halls?","Which title set a covert meeting amid Severance Hall’s marble and wood?","Which film proves a concert hall can moonlight as a spy set in Cleveland?"]},
    {title:"Welcome to Collinwood",location:{name:"Luce Theater (formerly Olympia Theatre) • 3353 E. 55th St, Cleveland, OH 44127",image:"images/w2c-luce.png"},questions:["Which 2002 caper parks its crooks by the Luce Theater on East 55th Street?","Which movie makes the former Olympia Theatre a backdrop for a bungled 'Bellini'?","Which Cleveland heist comedy looks to the Luce marquee for neighborhood flavor?","Which title treats 3353 E. 55th St as a stage for blue-collar scheming?","Which film sets small-time plans against a once-grand neighborhood theater?","Which comedy leans on the Luce/Olympia façade for a shabby-chic look?","Which movie makes a theatre-turned-venue part of Collinwood’s texture?","Which title uses the Luce block’s brick and steel as a character of its own?","Which film locates dreamers under a fading marquee on the near East Side?","Which caper keeps returning to the Luce/Olympia corner as the plan unravels?"]},
    {title:"The Avengers",location:{name:"Public Square — Terminal Tower • 50 Public Square, Cleveland, OH 44113",image:"images/av-psq.png"},questions:["Which Marvel epic stages a Loki confrontation on Cleveland’s Public Square?","Which film frames the Terminal Tower while doubling the city for New York?","Which superhero team assembles with Public Square’s skyline at their backs?","Which title gives Public Square an alien invasion makeover with VFX?","Which movie drops a portal battle into downtown Cleveland’s core?","Which film puts Robert Downey Jr. near Public Square streetscapes?","Which blockbuster hides Cleveland-in-Manhattan through Terminal Tower angles?","Which title uses the Square’s geometry to sell a grand, open battleground?","Which film blends practical Cleveland shots with NYC digital set extensions?","Which 2012 movie makes 50 Public Square a nexus for a superhero standoff?"]},
    {title:"Judas and the Black Messiah",location:{name:"Ohio State Reformatory • 100 Reformatory Rd, Mansfield, OH 44905",image:"images/judas-man.png"},questions:["Which 2021 film used the Ohio State Reformatory in Mansfield for prison scenes?","Which film about Fred Hampton staged interrogation corridors at 100 Reformatory Rd?","Which title cast the Reformatory’s cellblocks as a stand-in for Illinois facilities?","Which movie cuts from Chicago activism to Ohio’s Reformatory interiors?","Which film’s Cleveland-region shoot included Mansfield’s iconic cell tiers?","Which title uses the Reformatory’s ironwork to heighten surveillance tension?","Which Oscar-winning story funnels an informant through Ohio prison hallways?","Which film places LaKeith Stanfield within Mansfield’s echoing catwalks?","Which title uses midwestern carceral architecture to ground a national story?","Which movie folds the Reformatory’s gothic mass into a tale of betrayal?"]},
    {title:"Superman (2025)",location:{name:"The Arcade Cleveland • 401 Euclid Ave, Cleveland, OH 44115",image:"images/sm-arcade.png"},questions:["Which upcoming reboot filmed scenes inside Cleveland’s Gilded Age Arcade?","Which film places Clark Kent beneath the Arcade’s glass-and-iron atrium on Euclid Ave?","Which title stages Metropolis vibes in the Arcade at 401 Euclid Avenue?","Which movie frames sweeping shots down the Arcade’s multi-level balconies?","Which production uses the Arcade’s ornate railings for a dramatic reveal?","Which 2025 film turns a Cleveland landmark into Metropolis ambience?","Which title pairs the Arcade’s vintage storefronts with a modern superhero?","Which movie sets a key walk-and-talk along the Arcade’s central spine?","Which production treats the Arcade’s skylight as a natural spotlight for heroes?","Which reboot returns Superman to his creators’ city via the Arcade?"]},
    {title:"Sign of Aquarius",location:{name:"Tower Press Building • 1900 Superior Ave, Cleveland, OH 44114",image:"images/gf-towerpress.png"},questions:["Which 1970 counterculture film frames the Tower Press Building on Superior Avenue?","Which movie follows hippie-era Cleveland past the brick mass at 1900 Superior?","Which title mixes docu-fiction and protest energy downtown by Tower Press?","Which film drifts from Superior Ave corners into loft-like interiors nearby?","Which movie uses the Tower Press block as a signpost of underground culture?","Which title threads street scenes by the old factory windows on Superior?","Which film maps a youth scene across Superior and the surrounding grid?","Which movie catches a postered doorway at the Tower Press frontage?","Which title watches a makeshift procession pass along Superior’s canyon?","Which film pins a moment in Cleveland’s counterculture to Tower Press?"]}
  ];
  function shuffleInPlace(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
  function sampleOne(a){return a[Math.floor(Math.random()*a.length)]}
  function sampleN(a,n){const c=a.slice();shuffleInPlace(c);return c.slice(0,n)}
  function buildOptions(correctTitle, allTitles){const pool=allTitles.filter(t=>t!==correctTitle);const distractors=sampleN(pool,3);const four=shuffleInPlace([correctTitle,...distractors]);const letters=["a","b","c","d"];const answers={};let correctKey="a";four.forEach((title,idx)=>{const key=letters[idx];answers[key]=title;if(title===correctTitle)correctKey=key});return{answers,correctKey}}
  function buildQuestionsFromFilms(filmData){if(!Array.isArray(filmData)||filmData.length<10)throw new Error("You need at least 10 films to build a 10-question quiz.");const chosenFilms=sampleN(filmData,10);const allTitles=filmData.map(f=>f.title);return chosenFilms.map(film=>{const qText=sampleOne(film.questions);const {answers,correctKey}=buildOptions(film.title,allTitles);return new Question(qText,answers,correctKey,{title:film.title,location:film.location||{}})})}
  window.FILMS_DATA=films; window.buildQuestionsFromFilms=buildQuestionsFromFilms;
  class Quiz{constructor(q){this.questions=Array.isArray(q)?q:[];this.questionIndex=0;this.correctAnswers=0}callQuestion(){return this.questions[this.questionIndex]}next(){if(this.hasNext()){this.questionIndex+=1;return true}return false}hasNext(){return this.questionIndex<this.questions.length-1}resetProgress(){this.questionIndex=0;this.correctAnswers=0}get length(){return this.questions.length}}
  window.Quiz=Quiz;
  </script>
<!-- ===== IMAGE MAP ===== -->
<script>
  (function(){
    try {
      var IMAGE_MAP = {
        "The Deer Hunter": "images/dh-lemko.png",
        "A Christmas Story": "images/acs-higbees.png",
        "Captain America: Winter Soldier": "images/ca-ws-caam.png",
        "Air Force One": "images/af1-severance.png",
        "Judas and the Black Messiah": "images/judas-man.png",
        "Spider-Man 3": "images/sm3-euc-13.png",
        "The Avengers": "images/av-psq.png",
        "Welcome to Collinwood": "images/w2c-luce.png",
        "Light of Day": "images/lod-euclid-tavern.png",
        "Stranger Than Paradise": "images/stp-greyhoundstation.png",
        "The Fortune Cookie": "images/fc-browns.png",
        "Uptight": "images/u-alhambra-apt.png",
        "Kid From Cleveland": "images/kfc-cma.png",
        "Superman (2025)": "images/sm-arcade.png",
        "Sign of Aquarius": "images/gf-towerpress.png"
      };
      if (Array.isArray(window.FILMS_DATA)) {
        window.FILMS_DATA.forEach(f => {
          if (f && f.title) {
            var path = IMAGE_MAP[f.title];
            if (path) {
              if (!f.location) f.location = {};
              if (!f.location.image || f.location.image === "") f.location.image = path;
            }
          }
        });
      }
    } catch (e) { console.warn("[Quiz] images map apply failed", e); }
  })();
  </script>
<!-- ===== MAIN (with in-frame exit) ===== -->
<script>
  let quiz = null;

  // === added: exact play order with correctness ===
  window.__QUIZ_LAST_ORDER = [];


  const quizBox        = document.querySelector(".quiz-box");
  const stageEl        = document.querySelector(".stage");
  const badgeEl        = document.getElementById("qBadge");
  const qProgFill = document.querySelector(".qprogress .qprogress-fill");
  const questionTextEl = document.querySelector(".question-text");
  const optionListEl   = document.querySelector(".option-list");

  const timeTextEl = document.querySelector(".time-text");
  const secondEl   = document.querySelector(".second");
  const timeFillEl = document.querySelector(".time-fill");

  const figEl = document.querySelector(".location-figure");
  const imgEl = document.querySelector(".location-image");
  const capEl = document.querySelector(".location-caption");

  const scoreAnimEl  = document.querySelector(".score-anim");
  const finalOutEl = document.getElementById("finalScoreOut");
  const bigCountEl = document.getElementById('bigCountdown');

  const loader = document.getElementById('loading');

  const exitBtn = document.getElementById('exitButton');
  const overlay = document.getElementById('intermissionOverlay');
  const tryBtn  = document.getElementById('btnTryAgain');
  const quitBtn = document.getElementById('btnQuit');

  const resultOverlay = document.getElementById('resultOverlay');
  const nextCountEl = document.getElementById('nextCountdown');
  let __nextCountdownTimer = null;

  const resultSubEl  = resultOverlay ? resultOverlay.querySelector('.result-sub') : null;
  const resultTextEl  = resultOverlay ? resultOverlay.querySelector('.result-text') : null;

  
function showResultOverlay(kind){
  if (!resultOverlay || !resultTextEl) return;
  resultOverlay.classList.remove('hiding');
  resultOverlay.classList.remove('correct','wrong');
  const isCorrect = (kind === 'correct');
  resultOverlay.classList.add(isCorrect ? 'correct' : 'wrong');

  // Use image badges instead of text
  resultTextEl.textContent = '';
  resultTextEl.style.backgroundImage = isCorrect ? "url('images/printit.uniform.png')" : "url('images/cut.uniform.png')";
  // Fill Did You Know fact if available
  try {
    var __factEl = document.getElementById('result-fact');
    if (__factEl && window.DIDYOUKNOWS && window.__currentTitle && window.DIDYOUKNOWS[window.__currentTitle]) {
      __factEl.textContent = String(window.DIDYOUKNOWS[window.__currentTitle]);
    } else if (__factEl && window.__currentFact) {
      __factEl.textContent = String(window.__currentFact);
    }
  } catch(e) { /* noop */ }


  if (resultSubEl) {
    resultSubEl.textContent = (typeof window.__currentShort === 'string') ? window.__currentShort : '';
  }
  resultOverlay.classList.add('show');
}

  
function hideResultOverlay(){ try { stopNextCountdown(); } catch(_) {}
  if (!resultOverlay) return;
  resultOverlay.classList.remove('show','hiding','correct','wrong');
  if (resultSubEl) resultSubEl.textContent = '';
  if (resultTextEl) {
    resultTextEl.textContent = '';
    resultTextEl.style.backgroundImage = 'none';
  }
}


  // Prevent accidental immediate restart after QUIT
  let suppressNextSplashClick = false;

  const correctIcon = '<span class="icon">✓</span>';
  const incorrectIcon = '<span class="icon">✕</span>';

  // Pause state
  let paused = false;
  let timeLeft = 20;
  let counter=null, counterLine=null;
  let elapsedLineMs = 0;

  function initQuizRun() {
    const questions = window.buildQuestionsFromFilms(window.FILMS_DATA);
    quiz = new Quiz(questions);
  }

  function showLoader(ms=650){
    loader.classList.add('show');
    return new Promise(res=>setTimeout(()=>{ loader.classList.remove('show'); res(); }, ms));
  }

  function goNextOrScore(){
    if (quiz.hasNext()) {
      quiz.next();
      renderCurrent();
    } else {
      
      try { if (!Array.isArray(window.__answerLog)) window.__answerLog = []; window.__answerLog.push(false); } catch(e) {}
showScore(quiz.correctAnswers, quiz.length);
    }
  }

  function renderCurrent() {try{ if (!Array.isArray(window.__QUIZ_LAST_ORDER)) window.__QUIZ_LAST_ORDER=[]; if (quiz && quiz.questionIndex===0) window.__QUIZ_LAST_ORDER.length=0; }catch(e){}

    // Restore quiz visuals when showing a question
    if (badgeEl) badgeEl.style.display = '';
    var __qp2 = document.querySelector('.qprogress'); if (__qp2) __qp2.style.display = '';
    var __qb2 = document.querySelector('.qBadge'); if (__qb2) __qb2.style.display = '';
    var __tl2 = document.querySelector('.time-line-wrap'); if (__tl2) __tl2.style.display = '';
if (typeof holdTapCleanup === 'function') { try { holdTapCleanup(); } catch(_) {} holdTapCleanup = null; }
    hideResultOverlay();
    // Hide score visuals
    scoreAnimEl.style.display="none"; scoreAnimEl.src="";
    finalOutEl.style.display="none"; finalOutEl.textContent="";
    overlay.classList.remove('show');

    const q = quiz.callQuestion(); if (!q) return;
    try { window.__currentShort = (q && q.meta && q.meta.title && SHORTS[q.meta.title]) ? SHORTS[q.meta.title] : '';
    try { window.__currentTitle = (q && q.meta && q.meta.title) ? q.meta.title : ''; } catch(_) { window.__currentTitle=''; }
  } catch(_) { window.__currentShort=''; }
    if (q.meta && q.meta.location) {
      figEl.style.display = "block";
      imgEl.src = q.meta.location.image || "";
      imgEl.alt = q.meta.location.name || "Location";
      capEl.textContent = q.meta.location.name || "";
    } else {
      figEl.style.display = "none";
    }

    timeTextEl.textContent = "Remaining Time";
    questionTextEl.innerHTML = `<span>${q.questionText}</span>`;

    let html = "";
    for (let key of ["a","b","c","d"]) {
      html += `<div class="option" data-key="${key}"><span>${q.answers[key]}</span></div>`;
    }
    optionListEl.innerHTML = html;
    optionListEl.querySelectorAll(".option").forEach(el => {
      el.addEventListener("click", () => {
        optionSelected(el);
        holdBeforeNext();
      });
    });

    showNumber(quiz.questionIndex + 1, quiz.length);
    startTimer(20);
    startLine(20000);
  }

  function optionSelected(optionEl) {
    clearIntervalSafe();
    const q = quiz.callQuestion();
    const pickedKey = optionEl.getAttribute("data-key");
    if (q.checkAnswer(pickedKey)) {
      
      try { if (!Array.isArray(window.__answerLog)) window.__answerLog = []; window.__answerLog.push(true); } catch(e) {}
try { window.__QUIZ_LAST_ORDER.push({ title: (q && q.meta && q.meta.title) || '', correct: true }); } catch(e) {}
optionEl.classList.add("correct"); optionEl.insertAdjacentHTML("beforeend", correctIcon);
      quiz.correctAnswers++;
      showResultOverlay('correct');
    } else {
      optionEl.classList.add("incorrect"); try { window.__QUIZ_LAST_ORDER.push({ title: (q && q.meta && q.meta.title) || '', correct: false }); } catch(e) {}
optionEl.insertAdjacentHTML("beforeend", incorrectIcon);
      showResultOverlay('wrong');
    }
    revealCorrectAndLock(q);
  }

  function revealCorrectAndLock(q) {
    for (let el of optionListEl.children) {
      const key = el.getAttribute("data-key");
      if (key === q.correctAnswer) {
        el.classList.add("correct");
        if (!el.querySelector(".icon")) el.insertAdjacentHTML("beforeend", correctIcon);
      }

  

      el.classList.add("disabled");
    }
  }

  // Hold on result for 10s or advance on tap anywhere
  let __holdAdvanceActive = false;
  
  // Manage a single "hold to advance" session across questions
  let holdTapCleanup = null;

  
// single active session
holdTapCleanup = null;
function holdBeforeNext() {
  if (typeof holdTapCleanup === 'function') { try { holdTapCleanup(); } catch(_) {} holdTapCleanup = null; }
  let advanced = false;
  const autoMs = 10000; const fadeMs = 500;
  const advanceNow = async ()=>{
    if (advanced) return; advanced = true;
    try { document.removeEventListener('click', advanceNow, true); } catch(_) {}
    try { clearTimeout(tid); } catch(_) {}
    if (resultOverlay && resultOverlay.classList.contains('show')) {
      resultOverlay.classList.remove('show');
      resultOverlay.classList.add('hiding');
    }
    try { stopNextCountdown(); } catch(_) {}
    try { await new Promise(r=>setTimeout(r, fadeMs)); await showLoader(900); } catch(_) {}
    hideResultOverlay(); goNextOrScore();
  };
  const tid = setTimeout(advanceNow, autoMs);
  startNextCountdown(Math.round(autoMs/1000));
  document.addEventListener('click', advanceNow, true);
  holdTapCleanup = ()=>{ try { document.removeEventListener('click', advanceNow, true); } catch(_) {} try { clearTimeout(tid); } catch(_) {} try { stopNextCountdown(); } catch(_) {} };
}



  function startNextCountdown(seconds){
    if (!nextCountEl) return;
    try { stopNextCountdown(); } catch(_) {}
    let s = seconds;
    nextCountEl.textContent = 'Next: ' + s;
    nextCountEl.style.display = 'block';
    __nextCountdownTimer = setInterval(()=>{
      s -= 1;
      if (s <= 0){
        nextCountEl.textContent = 'Next: 0';
        stopNextCountdown();
        return;
      }
      nextCountEl.textContent = 'Next: ' + s;
    }, 1000);
  }
  function stopNextCountdown(){
    if (__nextCountdownTimer){ try { clearInterval(__nextCountdownTimer); } catch(_) {} __nextCountdownTimer = null; }
    if (nextCountEl){ nextCountEl.style.display = 'none'; }
  }

  // tiny helper to toggle a boolean truthy state
  function TrueLike(){ return !!(Date.now()); }


  function updateProgress(n, all){ try { if (qProgFill) qProgFill.style.width = Math.max(0, Math.min(100, (n/all)*100)).toFixed(2) + '%'; } catch(_){} }
function showNumber(n, all){ if (badgeEl) { var body = badgeEl.querySelector('.qbadge-body .qnum'); if (body) { body.textContent = `${n} / ${all}`; } else { badgeEl.innerHTML = `<div class='qbadge-top'></div><div class='qbadge-body'><span class='qnum'>${n} / ${all}</span></div>`; } } updateProgress(n, all); }


  function positionBigCountdown(){
    if (!bigCountEl || !stageEl) return;
    const rect = stageEl.getBoundingClientRect();
    // place it just above the frame, with a small offset
    const top = Math.max(8, rect.top - (bigCountEl.offsetHeight || 64) - 12);
    bigCountEl.style.top = top + 'px';
  }
  function showBigCountdown(v){
    if (!bigCountEl) return;
    bigCountEl.textContent = String(v);
    positionBigCountdown();
    bigCountEl.style.display = 'block';
  }
  function hideBigCountdown(){
    if (!bigCountEl) return;
    bigCountEl.style.display = 'none';
  }
  window.addEventListener('resize', ()=>{ if (bigCountEl && bigCountEl.style.display !== 'none') positionBigCountdown(); }, {passive:true});

  // === SCORE visuals ===
  
function showScore(correct, total){
  try { if (typeof holdTapCleanup === 'function') { holdTapCleanup(); } } catch(e) {}
  try{ if (typeof hideResultOverlay==='function') hideResultOverlay(); }catch(e){}
  try{ if (typeof hideBigCountdown==='function') hideBigCountdown(); }catch(e){}
  try{ var el; el=document.querySelector(".prompt-timer"); if(el) el.style.display="none"; }catch(e){}
  try{ var el; el=document.querySelector(".time-line-wrap"); if(el) el.style.display="none"; }catch(e){}
  try{ var el; el=document.querySelector(".option-list"); if(el) el.style.display="none"; }catch(e){}
  try{ if (typeof badgeEl !== 'undefined' && badgeEl) badgeEl.style.display='none'; }catch(e){}
  try{ var el; el=document.querySelector('.qprogress'); if (el) el.style.display='none'; }catch(e){}
  try{ var el; el=document.querySelector('.qBadge'); if (el) el.style.display='none'; }catch(e){}
  try{ var el; el=document.querySelector('.time-line-wrap'); if (el) el.style.display='none'; }catch(e){}
  try{ if (typeof figEl !== 'undefined' && figEl) figEl.style.display='none'; }catch(e){}
  var ord = Array.isArray(window.__QUIZ_LAST_ORDER) ? window.__QUIZ_LAST_ORDER.slice(0,10) : [];
  console.log('[END] opening credits with order:', ord.map(x=>x.title));
  try { __openCredits(ord); } catch(e) { console.error('openCredits failed', e); }
}


  function positionFinalScore(){
    const rect = stageEl.getBoundingClientRect();
    const midY = rect.bottom + (window.innerHeight - rect.bottom)/2;
    finalOutEl.style.position = "fixed";
    finalOutEl.style.left = "50%";
    finalOutEl.style.transform = "translateX(-50%)";
    finalOutEl.style.top = `${midY}px`;
  }

  function getRankBase(score, total){
    if (score === total) return "mogul";
    if (score === 9) return "director";
    if (score >= 7 && score <= 8) return "star";
    if (score === 6) return "standin";
    if (score >= 4 && score <= 5) return "props";
    if (score === 3) return "ticket";
    return "popcorn";
  }

  function clearIntervalSafe(){
    if (counter){clearInterval(counter); counter=null;}
    if (counterLine){clearInterval(counterLine); counterLine=null;}
  }

  function startTimer(seconds){
    hideBigCountdown();
    paused = false;
    clearIntervalSafe();
    document.querySelector(".prompt-timer").style.display="";
    document.querySelector(".time-line-wrap").style.display="";
    document.querySelector(".option-list").style.display="";

    finalOutEl.style.display = "none";
    if (finalOutEl._onResize){ window.removeEventListener('resize', finalOutEl._onResize); finalOutEl._onResize=null; }
    scoreAnimEl.style.display="none"; scoreAnimEl.src="";

    timeLeft = seconds;
    secondEl.textContent = timeLeft;

    counter = setInterval(async ()=>{
      if (paused) return;
      timeLeft -= 1;
      secondEl.textContent = Math.max(0, timeLeft);
      if (timeLeft < 0){
        try { var __qTimeout = quiz && typeof quiz.callQuestion==='function' ? quiz.callQuestion() : null; if (__qTimeout) { window.__QUIZ_LAST_ORDER.push({ title: (__qTimeout.meta && __qTimeout.meta.title) || '', correct: false }); } } catch(e) {}
clearIntervalSafe();
        try { if (!Array.isArray(window.__answerLog)) window.__answerLog = []; window.__answerLog.push(false); } catch(e) {}
        timeTextEl.textContent = "Time Over";
        const q = quiz?.callQuestion?.(); if (!q) return;
        revealCorrectAndLock(q);
        holdBeforeNext();
      }
    }, 1000);
  }

  function startLine(durationMs){
    if (counterLine) { clearInterval(counterLine); counterLine=null; }
    elapsedLineMs = 0;
    timeFillEl.style.width = "0%";
    const step = 20;
    counterLine = setInterval(()=>{
      if (paused) return;
      elapsedLineMs += step;
      const pct = Math.min(100, (elapsedLineMs / durationMs) * 100);
      timeFillEl.style.width = pct.toFixed(2) + "%";
      if (elapsedLineMs >= durationMs){ clearInterval(counterLine); counterLine=null; }
    }, step);
  }

  /* ===== Exit overlay wiring ===== */
  function pauseQuizAndShowOverlay(){
    // keep big countdown visible but static while paused
    paused = true;
    clearIntervalSafe(); // stop timers
    overlay.classList.add('show');
    exitBtn.style.display = 'none';
  }
  function resumeQuizFromOverlay(){
    overlay.classList.remove('show');
    exitBtn.style.display = '';
    // restart timers from remaining time / line progress
    startTimer(timeLeft);
    const remainingMs = Math.max(0, timeLeft) * 1000;
    // Continue progress bar from where it left off
    const totalMs = 20000;
    elapsedLineMs = Math.min(totalMs, totalMs - remainingMs);
    startLine(totalMs - elapsedLineMs); // will pick up remainder
  }
  function hardResetToSplash(){
    hideResultOverlay();
    if (typeof holdTapCleanup === 'function') { try { holdTapCleanup(); } catch(_) {} holdTapCleanup = null; }
    hideBigCountdown();
    paused = false;
    clearIntervalSafe();
    quiz = null;
    overlay.classList.remove('show');
    exitBtn.style.display = '';
    document.body.setAttribute('data-state','splash');
    document.getElementById('splashOverlay').classList.add('show');
    prepareSplashVideo();
  }

  if (exitBtn){ exitBtn.addEventListener('click', pauseQuizAndShowOverlay); }
  if (tryBtn){ tryBtn.addEventListener('click', (e)=>{
    hideResultOverlay();
    if (typeof holdTapCleanup === 'function') { try { holdTapCleanup(); } catch(_) {} holdTapCleanup = null; }
    e.preventDefault(); e.stopPropagation();
    // Start a brand-new quiz
    overlay.classList.remove('show');
    exitBtn.style.display = '';
    paused = false;
    clearIntervalSafe();
    initQuizRun();
    if (!quiz) return;
    scoreAnimEl.style.display='none'; scoreAnimEl.src='';
    finalOutEl.style.display='none'; finalOutEl.textContent='';
    quizBox.classList.add('active');
    renderCurrent();
  }); }
  if (quitBtn){ quitBtn.addEventListener('click', (e)=>{ e.preventDefault(); e.stopPropagation(); suppressNextSplashClick = true; hardResetToSplash(); }); }

  /* ===== Splash control ===== */
  async function getSplashList(){
    try {
      const tag = document.getElementById('splashManifest');
      if (tag && tag.textContent.trim()) {
        const arr = JSON.parse(tag.textContent);
        if (Array.isArray(arr) && arr.length) return arr.map(String);
      }
    } catch(e){}
    const v = document.querySelector('#splashOverlay .bgvid');
    if (v) {
      const raw = v.getAttribute('data-candidates') || '';
      const list = raw.split(',').map(s => s.trim()).filter(Boolean);
      if (list.length) return list;
    }
    return ['videos/splash_loop.mp4'];
  }
  async function prepareSplashVideo(){
    const v = document.querySelector('#splashOverlay .bgvid'); if (!v) return;
    try { v.pause(); } catch(_) {}
    v.removeAttribute('src'); for (const s of Array.from(v.querySelectorAll('source'))) s.remove(); v.load();
    const list = await getSplashList(); const choice = list[Math.floor(Math.random()*list.length)];
    const s = document.createElement('source'); s.src = choice;
    s.type = choice.toLowerCase().endsWith('.webm') ? 'video/webm' : 'video/mp4'; v.appendChild(s);
    const startRandom = async () => { try { const dur = (v && isFinite(v.duration)) ? v.duration : 0; if (dur>2) v.currentTime = Math.random()*Math.max(0, dur-1.0); } catch(_){} try{ await v.play(); }catch(_){} };
    v.onloadedmetadata = () => startRandom(); v.load();
  }
  function showSplash(){
    hideBigCountdown();
    const overlay = document.getElementById('splashOverlay'); if (!overlay) return;
    document.body.setAttribute('data-state','splash'); overlay.classList.add('show'); prepareSplashVideo();
  }
  function hideSplash(){
    const overlay = document.getElementById('splashOverlay'); if (!overlay) return;
    overlay.classList.remove('show'); const v = overlay.querySelector('.bgvid'); if (v){ try{ v.pause(); }catch(_){} }
    document.body.removeAttribute('data-state');
  }

  // Tap to start
  document.addEventListener('click', (ev)=>{
    const overlaySplash = document.getElementById('splashOverlay');
    if (!overlaySplash || !overlaySplash.classList.contains('show')) return;
    if (suppressNextSplashClick) { suppressNextSplashClick = false; return; }
    hideSplash();
    initQuizRun();
    if (!quiz) return;
    scoreAnimEl.style.display="none"; scoreAnimEl.src="";
    finalOutEl.style.display="none"; finalOutEl.textContent="";
    quizBox.classList.add("active");
    renderCurrent();
  }, { passive:true });

  // Boot
  document.addEventListener('DOMContentLoaded', () => { showSplash(); });
  </script>
<!-- === Back Arrow (overlay) minimal, safe injection === -->
<script>
(function(){
  function ensureBackArrow(){
    var overlay = document.getElementById('intermissionOverlay');
    if (!overlay) return;
    var panel = overlay.querySelector('.panel');
    if (!panel) return;
    if (panel.querySelector('#exitBack')) return; // already injected
    var btn = document.createElement('button');
    btn.id = 'exitBack';
    btn.className = 'back-arrow';
    btn.setAttribute('aria-label', 'Back');
    btn.addEventListener('click', function(e){
      e.preventDefault(); e.stopPropagation();
      // Prefer the app's own resume if present
      try {
        if (typeof resumeQuizFromOverlay === 'function') {
          resumeQuizFromOverlay();
          return;
        }
      } catch(_) {}
      // Fallback: close overlay and resume timers
      try {
        overlay.classList.remove('show');
        var exitBtn = document.getElementById('exitButton');
        if (exitBtn) exitBtn.style.display = '';
        if (typeof startTimer === 'function' && typeof startLine === 'function') {
          var remain = (typeof timeLeft === 'number') ? Math.max(0, timeLeft) : 20;
          startTimer(remain);
          var totalMs = 20000;
          var eMs = (typeof elapsedLineMs === 'number') ? elapsedLineMs : (totalMs - remain*1000);
          var remMs = Math.max(0, totalMs - eMs);
          startLine(remMs);
        }
      } catch(_){}
    });
    panel.appendChild(btn);
  }
  // Inject once DOM is ready and again when overlay is shown
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', ensureBackArrow, { once: true });
  } else {
    ensureBackArrow();
  }
  // In case overlay is rebuilt, observe and re-inject
  var overlay = document.getElementById('intermissionOverlay');
  if (overlay && 'MutationObserver' in window) {
    var obs = new MutationObserver(function(){
      ensureBackArrow();
    });
    obs.observe(overlay, { childList: true, subtree: true, attributes: false });
  }
})();
</script>
<!-- === Idle Modal: standalone CSS/HTML/JS (safe, isolated) === -->
<!-- Overlay markup -->
<div aria-label="Are you still there?" aria-modal="true" id="idleOverlay">
<div id="idleDialog">
<img alt="Keep Going!" class="keepgoing" src="images/keepgoing.png"/>
<div id="idleCountdown">10</div>
</div>
<img alt="Tap anywhere" id="idleTap" src="images/tap.png"/>
</div>
<script>
(() => {
  const overlay   = document.getElementById('idleOverlay');
  const countEl   = document.getElementById('idleCountdown');
  const splash    = document.getElementById('splashOverlay');

  let idleTimer = null;   // 30s inactivity
  let warnTimer = null;   // 10s countdown
  let warnLeft  = 10;
  const IDLE_MS = 30000;
  const WARN_S  = 10;

  function log(...args){ try { console.log('[idle]', ...args); } catch(_){} }

  function armIdleWatch() {
    clearIdleWatch();
    // don't arm on splash
    if (splash && splash.classList.contains('show')) return;
    const wasIdle = !idleTimer;
    idleTimer = setTimeout(showIdle, IDLE_MS);
    if (wasIdle) log('Idle watch armed (30s).');
  }
  function clearIdleWatch() {
    if (idleTimer) { clearTimeout(idleTimer); idleTimer = null; }
  }

  function pauseAppTimers() {
    try { if (typeof paused !== 'undefined') paused = true; } catch(_){}
    try { if (typeof clearIntervalSafe === 'function') clearIntervalSafe(); } catch(_){}
  }

  function resumeAppTimers() {
    try {
      if (typeof resumeQuizFromOverlay === 'function') {
        resumeQuizFromOverlay();
      } else if (typeof startTimer === 'function' && typeof startLine === 'function') {
        const remain = (typeof timeLeft === 'number') ? Math.max(0, timeLeft) : 20;
        startTimer(remain);
        const totalMs = 20000;
        const eMs = (typeof elapsedLineMs === 'number') ? elapsedLineMs : (totalMs - remain*1000);
        const remMs = Math.max(0, totalMs - eMs);
        startLine(remMs);
      }
    } catch(_){}
  }

  function hardReset() {
    try { if (typeof suppressNextSplashClick !== 'undefined') suppressNextSplashClick = true; } catch(_){}
    try { if (typeof hardResetToSplash === 'function') hardResetToSplash(); } catch(_){}
  }

  function showIdle() {
    clearIdleWatch();
    pauseAppTimers();
    overlay.classList.add('show');
    warnLeft = WARN_S;
    if (countEl) countEl.textContent = String(warnLeft);
    if (warnTimer) clearInterval(warnTimer);
    warnTimer = setInterval(() => {
      warnLeft -= 1;
      if (countEl) countEl.textContent = String(Math.max(0, warnLeft));
      if (warnLeft <= 0) {
        clearInterval(warnTimer);
        warnTimer = null;
        overlay.classList.remove('show');
        log('Idle countdown expired: hard reset to splash.');
        hardReset();
      }
    }, 1000);
    log('Idle overlay shown; countdown started (10s).');
  }

  function activityHandler() {
    // If overlay is visible: interaction resumes
    if (overlay.classList.contains('show')) {
      if (warnTimer) { clearInterval(warnTimer); warnTimer = null; }
      overlay.classList.remove('show');
      resumeAppTimers();
      armIdleWatch();
      log('Idle activity detected: resuming & re-arming idle watch.');
      return;
    }
    // Otherwise: just re-arm 30s timer
    armIdleWatch();
  }

  // Global listeners (include click/tap)
  ['click', 'pointerdown', 'touchstart', 'keydown', 'mousemove'].forEach(ev =>
    document.addEventListener(ev, activityHandler, { passive: true })
  );

  // Start after splash is dismissed
  if (splash && 'MutationObserver' in window) {
    let prevShow = splash.classList.contains('show');
    new MutationObserver(() => {
      const nowShow = splash.classList.contains('show');
      if (prevShow && !nowShow) { armIdleWatch(); }
      prevShow = nowShow;
    }).observe(splash, { attributes: true, attributeFilter: ['class'] });
  }

  // Fallback: arm on initial load too
  document.addEventListener('DOMContentLoaded', () => armIdleWatch(), { once: true });
})();
</script>
<!-- Injected by ChatGPT: augment films with main/short/didyouknow and location.video -->
<script>
(function() {
  const FILM_META = [{"title": "Kid From Cleveland", "location": {"name": "Cleveland Museum of Art — Medieval Court, Well Head (Italy, Verona, 1400s) • 11150 East Blvd, Cleveland, OH 44106", "image": "images/kfc-cma.png", "video": "videos/kfc-cma.mp4"}, "main": "The film features the Medieval Court’s Wishing Well inside the Cleveland Museum of Art, a popular attraction for visitors in the 1940s. The museum’s appearance reflected a civic push to highlight Cleveland as both culturally rich and sports-obsessed, a rare pairing on screen. Beyond the museum, Kid From Cleveland showcased Municipal Stadium, League Park, and other landmarks in an early attempt at a Cleveland “city film.” The production was part of a civic-booster effort, with Indians owner Bill Veeck supporting the project to promote both the team and the city.", "didyouknow": "It marked one of the first times professional athletes — Bob Feller, Satchel Paige, Lou Boudreau, Hank Greenberg — played themselves in a feature film.", "short": "The Medieval Court’s Wishing Well inside the Cleveland Museum of Art features prominently in the film."}, {"title": "The Fortune Cookie", "location": {"name": "Cleveland Municipal Stadium (archival) • 1085 W. 3rd St, Cleveland, OH 44114", "image": "images/fc-browns.png", "video": "videos/fc-browns.mp4"}, "main": "Cleveland Municipal Stadium was used for game-day scenes, filmed during a real Browns–Vikings matchup in front of more than 10,000 fans who became extras. Wilder chose Cleveland because of its football culture and its ability to double as a “Middle America” cityscape for his dark comedy. Beyond the stadium, Billy Wilder’s crew also shot at Terminal Tower, the Roswell Hotel on East 20th, and Cleveland’s downtown streets.", "didyouknow": "Walter Matthau won an Academy Award for Best Supporting Actor for his role, launching his career into stardom.", "short": "Game-day scenes were filmed during a real Browns–Vikings matchup, with 10,000 fans as extras."}, {"title": "Uptight", "location": {"name": "Alhambra Apartments, Wade Park • 8616 Wade Park Ave, Cleveland, OH 44106", "image": "images/u-alhambra-apt.png", "video": "videos/u-alhambra-apt.mp4"}, "main": "The Alhambra Apartments in Wade Park served as a central backdrop, representing Cleveland’s working-class Black neighborhoods during the civil rights era. The film captured real Cleveland streets in the days immediately after Martin Luther King Jr.’s assassination, blending fiction with the city’s charged atmosphere. Beyond the Alhambra, key sequences were shot near the Cultural Gardens and downtown rail yards, grounding the story in Cleveland’s geography. Director Jules Dassin chose Cleveland for its stark industrial landscape, shooting around steel mills, housing projects, and the Flats to mirror urban unrest.", "didyouknow": "The film was co-written by activist Ruby Dee, who also starred in it, bringing authenticity to its portrayal of racial politics. The FBI reportedly monitored filming in Cleveland and embedded agents on set, worried the movie might stir unrest.", "short": "The Alhambra Apartments anchored scenes reflecting Cleveland’s working-class Black neighborhoods."}, {"title": "The Deer Hunter", "location": {"name": "Lemko Hall • 2337 W. 14th St, Cleveland, OH 44113", "image": "images/dh-lemko.png", "video": "videos/dh-lemko.mp4"}, "main": "The film’s famous wedding reception sequence was filmed inside Lemko Hall, a Tremont social club tied to the neighborhood’s Eastern European community. Just across the street, St. Theodosius Russian Orthodox Cathedral was used for the wedding ceremony, its onion domes now a Tremont landmark. Local residents were cast as extras in both Lemko Hall and St. Theodosius scenes, adding authentic detail to the wedding festivities.", "didyouknow": "The wedding sequence at Lemko Hall lasted nearly 30 minutes on screen and took weeks to film.", "short": "The wedding reception was filmed inside Lemko Hall, with the ceremony at St. Theodosius Cathedral."}, {"title": "Stranger Than Paradise", "location": {"name": "Greyhound Bus Station • 1465 Chester Ave, Cleveland, OH 44114", "image": "images/stp-greyhoundstation.png", "video": "videos/stp-greyhoundstation.mp4"}, "main": "The Greyhound Bus Station on Chester Avenue serves as the Cleveland stopover in the film, portraying the city as a desolate waypoint between New York and Florida. Director Jim Jarmusch shot the “One Year Later” segment on location in Cleveland, capturing real winter streets and industrial zones to emphasize isolation. In fact, the Cleveland portion was filmed mid-winter—one day they even attempted a shot by Lake Erie, but a sudden snow squall swept in, creating a near-whiteout effect on set.", "didyouknow": "The film won the Camera d’Or at the Cannes Film Festival, launching Jim Jarmusch’s career internationally. Jarmusch, who grew up just outside Akron, returned to Northeast Ohio to shoot the Cleveland section of the film.", "short": "The Greyhound Bus Station served as the Cleveland stopover, portraying the city as a bleak waypoint."}, {"title": "Light of Day", "location": {"name": "Euclid Tavern • 11629 Euclid Ave, Cleveland, OH 44106", "image": "images/lod-euclid-tavern.png", "video": "videos/lod-euclid-tavern.mp4"}, "main": "The Euclid Tavern served as the key performance venue for Joan Jett and Michael J. Fox’s band, filmed live on the club’s small stage. Director Paul Schrader leaned into Cleveland’s rock-and-roll identity, filming at working-class homes, factories, and bars alongside the Euclid Tavern. The production captured the gritty atmosphere of the University Circle neighborhood in the 1980s, before its later wave of redevelopment. Schrader originally envisioned Bruce Springsteen in the lead role, and though he declined, Springsteen contributed the film’s title song, cementing its Cleveland rock credibility.", "didyouknow": "Paul Schrader first titled the script Born in the U.S.A. and hoped Bruce Springsteen would star. Springsteen passed, used the title for his own album, and instead gave the film its anthem — the song “Light of Day.”", "short": "Joan Jett and Michael J. Fox performed on stage at the Euclid Tavern, filmed live at the club."}, {"title": "A Christmas Story", "location": {"name": "Higbee’s Department Store, Public Square • 100 Public Square, Cleveland, OH 44113", "image": "images/acs-higbees.png", "video": "videos/acs-higbees.mp4"}, "main": "Higbee’s Department Store in Public Square hosted the iconic Santa Claus scene, including the parade and the towering holiday display windows. Downtown Public Square was decorated for the 1940s-style Christmas parade, combining Cleveland’s real holiday tradition with Hollywood staging. Higbee’s management only agreed to allow filming if the store and its employees were portrayed positively, reflecting the store’s reputation as a family-friendly landmark. The Tremont neighborhood house doubled as Ralphie’s family home, with Higbee’s interiors supplying the film’s centerpiece Christmas sequences.", "didyouknow": "The Santa slide built inside Higbee’s Department Store for the film was dismantled right after shooting — it only existed for the movie.", "short": "Ralphie’s visit to Santa was filmed at Higbee’s, with Public Square decorated for a 1940s Christmas parade."}, {"title": "Captain America: Winter Soldier", "location": {"name": "Crawford Auto-Aviation Museum (Western Reserve Historical Society) • 10825 East Blvd, Cleveland, OH 44106", "image": "images/ca-ws-caam.png", "video": "videos/ca-ws-caam.mp4"}, "main": "The Crawford Auto-Aviation Museum was transformed into the Smithsonian Captain America exhibit, where Steve Rogers reflects on his past. Filming in Cleveland lasted nearly a month, with hundreds of locals serving as extras in museum and street sequences. The Cleveland Museum of Art doubled as a modern S.H.I.E.L.D. facility, while the West Shoreway staged the high-speed Nick Fury car chase. Downtown locations such as Tower City and the Cleveland Arcade were also used, with streets redressed to resemble Washington, D.C.", "didyouknow": "Scarlett Johansson said she loved filming in Cleveland because the city’s grid and architecture made it easy to stage complex stunts.", "short": "The Crawford Museum became the Smithsonian exhibit where Steve Rogers revisits his past."}, {"title": "Air Force One", "location": {"name": "Severance Hall, University Circle • 11001 Euclid Ave, Cleveland, OH 44106", "image": "images/af1-severance.png", "video": "videos/af1-severance.mp4"}, "main": "Severance Hall in University Circle doubled as the exterior of the Moscow government palace during the opening reception. Cleveland’s mix of classical and institutional architecture allowed it to double for both Moscow and Washington in the same production. The Cuyahoga County Courthouse provided interiors for the palace, with its ornate marble halls standing in for Russia. Case Western Reserve University locations were used to portray the White House corridors later in the film.", "didyouknow": "Air Force One was one of the highest-grossing films of 1997, cementing Harrison Ford’s late ’90s action-hero status.", "short": "Severance Hall doubled as Moscow’s government palace in the opening reception scene."}, {"title": "Welcome to Collinwood", "location": {"name": "Luce Theater (formerly Olympia Theatre) • 3353 E. 55th St, Cleveland, OH 44127", "image": "images/w2c-luce.png", "video": "videos/w2c-luce.mp4"}, "main": "The Luce Theater, once the Olympia Theatre, served as a central backdrop in the film, anchoring the small-time heist in Cleveland’s east side. Much of the film was shot in the Collinwood neighborhood, using real storefronts, alleys, and side streets to ground the story. The production highlighted Collinwood’s sense of community and grit, presenting a slice of Cleveland rarely seen on screen. The Russo brothers drew heavily from their Cleveland roots, choosing recognizable but worn-down local landmarks to capture the neighborhood’s character.", "didyouknow": "Though set in Cleveland, the story was a remake of an Italian caper film, Big Deal on Madonna Street.", "short": "The Luce Theater (formerly Olympia) was used as a central backdrop for the heist story."}, {"title": "The Avengers", "location": {"name": "Public Square — Terminal Tower • 50 Public Square, Cleveland, OH 44113", "image": "images/av-psq.png", "video": "videos/av-psq.mp4"}, "main": "Public Square and Terminal Tower doubled as Stuttgart, Germany in the scene where Loki confronts a plaza full of civilians. Cleveland’s architecture and streetscapes allowed Marvel to capture both European grandeur and New York chaos without leaving Ohio. The gala sequence connected to this scene was filmed at Severance Hall, with its classical interiors standing in for a German opera house. Later, Cleveland’s East 9th Street was transformed into Manhattan for the climactic Battle of New York, with skyscraper facades dressed for destruction.", "didyouknow": "The “shawarma scene” after the credits was filmed last-minute in a Cleveland diner once principal photography wrapped.", "short": "Public Square stood in for Stuttgart, Germany during Loki’s confrontation scene."}, {"title": "Judas and the Black Messiah", "location": {"name": "Ohio State Reformatory • 100 Reformatory Rd, Mansfield, OH 44905", "image": "images/judas-man.png", "video": "videos/judas-man.mp4"}, "main": "The Ohio State Reformatory in Mansfield was used for prison sequences, its imposing stone architecture doubling for 1960s Chicago jails. The production used more than a dozen Northeast Ohio locations, blending Mansfield’s historic prison with Cleveland landmarks to stand in for Chicago. Filming also took place in Cleveland’s East Side churches and neighborhoods, grounding the story in authentic Midwest settings. Cleveland’s Public Auditorium hosted large rally scenes, recreating the atmosphere of Black Panther organizing meetings.", "didyouknow": "The Ohio State Reformatory had already been made famous by The Shawshank Redemption, giving it a second life in film history here.", "short": "The Mansfield Reformatory doubled as a 1960s Chicago jail in the prison scenes."}, {"title": "Superman (2025)", "location": {"name": "The Arcade Cleveland • 401 Euclid Ave, Cleveland, OH 44115", "image": "images/sm-arcade.png", "video": "videos/sm-arcade.mp4"}, "main": "The Arcade’s glass-roofed atrium was transformed into part of Metropolis, with its ironwork and skylights providing a grand civic backdrop. Choosing The Arcade tied the production back to Superman’s origins, as creators Jerry Siegel and Joe Shuster grew up in Cleveland’s Glenville neighborhood. Downtown Cleveland, including Public Square, was dressed with Metropolis taxis, Daily Planet newspaper boxes, and extras in business attire. Other Cleveland locations were used to represent Metropolis streets, blending the city’s late-19th-century architecture with superhero spectacle.", "didyouknow": "Local extras reported they weren’t told they were in a Superman movie — the call sheets used fake project names to keep the shoot secret.", "short": "The Arcade’s glass atrium was transformed into Metropolis, echoing Superman’s Cleveland roots."}, {"title": "Sign of Aquarius", "location": {"name": "Tower Press Building • 1900 Superior Ave, Cleveland, OH 44114", "image": "images/gf-towerpress.png", "video": "videos/gf-towerpress.mp4"}, "main": "The Tower Press Building, then a worn industrial structure, appeared in Sign of Aquarius as part of Cleveland’s counterculture backdrop and urban aesthetic. Filmmakers shot in downtown streets and loft spaces, capturing the city’s youth culture and protest energy in the wake of the 1960s. The film reflected Cleveland’s underground music and hippie scenes, situating the Tower Press Building at the heart of its story.", "didyouknow": "The film’s soundtrack features songs by Cleveland’s own underground composers Al Zbacnic and Tom Baker, embedding the city’s hippie-rock scene into its identity.", "short": "Tower Press appeared as a counterculture backdrop in Cleveland’s 1970-era youth film."}, {"title": "Spider-Man 3", "location": {"name": "Euclid Ave & E. 13th St • Cleveland, OH 44115", "image": "images/sm3-euc-13.png", "video": "videos/sm3-euc-13.mp4"}, "main": "The armored truck chase was filmed along Euclid Avenue at East 13th Street, with storefronts and facades redressed as Midtown Manhattan. The Halle Building and surrounding blocks were central to the sequence, providing a canyon-like backdrop for Spider-Man’s pursuit. Over 250 crew members resurfaced Euclid Avenue to handle the weight of stunt vehicles and ensure safety during the explosive sequence. Cleveland’s broad downtown avenues allowed Raimi’s team to stage New York-scale stunts that would have been impractical to shoot in Manhattan itself.", "didyouknow": "Director Sam Raimi chose Cleveland because its long, straight avenues better matched comic-book New York than the real Manhattan.", "short": "The armored truck chase was filmed on Euclid Avenue, with the Halle Building standing in as Manhattan."}];
  const metaMap = Object.fromEntries(FILM_META.map(f => [f.title, f]));
  if (window.films && Array.isArray(window.films)) {
    window.films.forEach(f => {
      const m = metaMap[f.title];
      if (!m) return;
      f.main = m.main; f.didyouknow = m.didyouknow; f.short = m.short;
      f.location = f.location || {};
      if (!f.location.name && m.location && m.location.name) f.location.name = m.location.name;
      if (!f.location.image && m.location && m.location.image) f.location.image = m.location.image;
      if (m.location && m.location.video) f.location.video = m.location.video;
    });
  }
})();
</script>
<!-- Injected by ChatGPT: force overlay to show Short + Did You Know -->
<script>
(function () {
  function normalize(s){
    try {
      return String(s)
        .replace(/[\u2018\u2019]/g, "'")
        .replace(/[\u201C\u201D]/g, '"')
        .replace(/\s+/g, ' ')
        .trim();
    } catch(e){ return ""; }
  }
  function findFilmFromOverlay(){
    const titleEl = document.querySelector('#resultOverlay .result-title, #resultOverlay .title, #resultOverlay h2, #resultOverlay h3');
    const title = titleEl ? normalize(titleEl.textContent).toLowerCase() : "";
    if (title && Array.isArray(window.films)) {
      let film = window.films.find(x => normalize(x.title).toLowerCase() == title) || null;
      if (film) return film;
      film = window.films.find(x => title.includes(normalize(x.title).toLowerCase())) || null;
      if (film) return film;
    }
    const currentShort = (typeof window.__currentShort === 'string') ? window.__currentShort : '';
    const nShort = normalize(currentShort).toLowerCase();
    if (nShort && Array.isArray(window.films)) {
      let film = window.films.find(x => normalize(x.short).toLowerCase() == nShort) || null;
      if (film) return film;
      const candidates = window.films.filter(x => {
        const ns = normalize(x.short).toLowerCase();
        return ns && (ns.includes(nShort) || nShort.includes(ns));
      });
      if (candidates.length === 1) return candidates[0];
      if (candidates.length > 1) return candidates.sort((a,b)=>(a.short||'').length-(b.short||'').length).pop();
    }
    return null;
  }
  function patchOverlay(){
    try{
      if (!window.showResultOverlay || window.__overlayPatchedFinal) return;
      const orig = window.showResultOverlay;
      window.showResultOverlay = function(kind){
        try { orig.call(this, kind); } catch(e){ console.error("[overlay] original error", e); }
        try {
          const el = document.querySelector('#resultOverlay .result-sub, #resultOverlay #result-subtext');
          if (!el) return;
          const film = findFilmFromOverlay();
          const short = (film && film.short) ? film.short : (typeof window.__currentShort === 'string' ? window.__currentShort : '');
          const fact  = (film && film.didyouknow) ? ("Did You Know? " + film.didyouknow) : "";
          el.textContent = short + (fact ? "\n\n" + fact : "");
          try { el.style.whiteSpace = "pre-line"; } catch(e){}
          console.log("[overlay] updated subtext with film:", film ? film.title : null);
        } catch(err){
          console.error("[overlay] patch failed", err);
        }
      };
      window.__overlayPatchedFinal = true;
      console.log("[overlay] showResultOverlay hooked (final)");
    } catch(e){ console.error(e); }
  }
  let tries = 0;
  const timer = setInterval(() => {
    patchOverlay();
    if (window.__overlayPatchedFinal || tries++ > 60) clearInterval(timer);
  }, 200);
})();
</script>
<!-- Injected: Two-column overlay + fact population -->
<script>
(function () {
  function normalize(s){
    try {
      return String(s).replace(/[\u2018\u2019]/g, "'").replace(/[\u201C\u201D]/g, '"').replace(/\s+/g, ' ').trim();
    } catch(e){ return ""; }
  }
  function buildShortMap(){
    const map = {};
    try {
      Object.keys(SHORTS||{}).forEach(k=>{
        const v = SHORTS[k];
        if (v) map[normalize(v).toLowerCase()] = (DIDYOUKNOWS&&DIDYOUKNOWS[k])?DIDYOUKNOWS[k]:"";
      });
    } catch(e){}
    return map;
  }
  const SHORT_TO_FACT = buildShortMap();

  function ensureTwoCols(overlay){
    const root = overlay.querySelector(':scope > div') || overlay;
    if (root.querySelector('.cols')) return root.querySelector('.cols');
    const title = root.querySelector('.result-text');
    const sub = root.querySelector('.result-sub');

    const cols = document.createElement('div'); cols.className='cols';
    const left = document.createElement('div'); left.className='col col-left';
    const right = document.createElement('div'); right.className='col col-right';

    if (title) left.appendChild(title);
    if (sub) left.appendChild(sub);

    const img = document.createElement('img');
    img.className='dky-header'; img.alt='Did you know?'; img.src='images/didyouknow.uniform.png';
    right.appendChild(img);
    const fact = document.createElement('div'); fact.id='result-fact'; right.appendChild(fact);

    root.innerHTML='';
    root.appendChild(cols); cols.appendChild(left); cols.appendChild(right);
    return cols;
  }

  function populateFact(){
    const overlay = document.getElementById('resultOverlay'); if(!overlay) return;
    ensureTwoCols(overlay);
    const factBox = overlay.querySelector('#result-fact'); if(!factBox) return;
    let fact = '';
    if (typeof window.__currentTitle==='string' && window.__currentTitle && DIDYOUKNOWS && DIDYOUKNOWS[window.__currentTitle]){
      fact = DIDYOUKNOWS[window.__currentTitle];
    } else {
      const s = (typeof window.__currentShort==='string') ? window.__currentShort : '';
      const key = normalize(s).toLowerCase();
      if (key && SHORT_TO_FACT[key]) fact = SHORT_TO_FACT[key];
    }
    factBox.textContent = fact || '';
  }

  function hookOverlay(){
    if (!window.showResultOverlay || window.__twoColPatched) return;
    const orig = window.showResultOverlay;
    window.showResultOverlay = function(kind){
      try { orig.call(this, kind); } catch(e){ console.error('[overlay] orig error', e); }
      try { populateFact(); } catch(e){}
      console.log('[overlay] two-column populated; title=', window.__currentTitle || null);
    };
    window.__twoColPatched = true;
    console.log('[overlay] two-column overlay hooked');
  }

  let tries=0; const t=setInterval(()=>{ hookOverlay(); if(window.__twoColPatched||tries++>60) clearInterval(t); },200);
})();
</script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  try {
    var fs = document.getElementById('finalScoreOut');
    var stageContainer = document.querySelector('.stage-container');
    if (fs && stageContainer && !stageContainer.contains(fs)) {
      stageContainer.insertAdjacentElement('afterend', fs);
    }
    // Keep layout space reserved; visibility controlled by app logic
    if (fs) { fs.style.minHeight = '1em'; }
  } catch (e) { /* noop */ }
});
</script>
<div aria-labelledby="instrTitle" aria-modal="true" id="instrModalOverlay" role="dialog">
<div id="instrModal">
<button aria-label="Close Instructions" id="instrClose"><img alt="Close" src="images/reelX.png"/></button>
<h2 id="instrTitle"><img alt="How to Play" class="howto-img" src="images/howto.png"/></h2>
<p>Each round shows a scene filmed at a Cleveland location.</p>
<p>A question will appear with <strong>four movie options</strong> to choose from.</p>
<p>Pick the correct movie before the timer runs out.</p>
<p>Right or wrong, you’ll see the correct answer and a fun fact about the movie.</p>
<p>Tap anywhere to advance to the next question.</p>
<p>Exit anytime with the <strong>Exit</strong> button in the corner.</p>
</div>
</div>
<script>
(function(){
  let modal, overlay, closeBtn, proceed;
  let resumed = false;

  function showModal(onProceed){
    overlay = document.getElementById('instrModalOverlay');
    modal = document.getElementById('instrModal');
    closeBtn = document.getElementById('instrClose');
    proceed = function(){
      if (overlay) overlay.style.display = 'none';
      if (onProceed && !resumed) { resumed = true; onProceed(); }
    };
    if (!overlay) return onProceed && onProceed();
    overlay.style.display = 'flex';
    closeBtn && closeBtn.addEventListener('click', proceed, { once: true });
    // click outside to close
    overlay.addEventListener('click', function(e){
      if (e.target === overlay) proceed();
    }, { once: true });
  }

  document.addEventListener('DOMContentLoaded', function(){
    try {
      // Wrap the function that starts the quiz so the modal shows first.
      if (window.initQuizRun && !window.__INIT_WRAPPED__) {
        window.__INIT_WRAPPED__ = true;
        window.__ORIG_initQuizRun__ = window.initQuizRun;
        window.initQuizRun = function(){
          // Only show modal once, then call original to start quiz + timer
          showModal(function(){
            try {
              // restore original and call
              const orig = window.__ORIG_initQuizRun__;
              if (orig) {
                window.initQuizRun = orig;
                orig.apply(window, arguments);
              }
            } catch (err) { console.error(err); }
          });
        };
      }
    } catch (err) {
      console.warn('Modal wrapper failed, attempting immediate modal before quiz...', err);
    }
  });
})();
</script>
<script>
(function(){
  function runTryAgain(){
    try {
      if (typeof window.tryAgain === 'function') {
        window.tryAgain();
        return;
      }
      // Fallback: click the Try Again button in the intermission overlay if present
      var btn = document.getElementById('btnTryAgain');
      if (btn) { btn.click(); return; }
      // Fallback 2: reload to splash state if app uses body[data-state]
      if (document && document.body) {
        document.body.setAttribute('data-state', 'splash');
      }
    } catch(e) { console.warn('[ModalExit] tryAgain() failed', e); }
  }

  document.addEventListener('DOMContentLoaded', function(){
    var overlay = document.getElementById('instrModalOverlay');
    var closeBtn = document.getElementById('instrClose');

    if (!overlay) return;

    // When user clicks outside the modal, run Try Again
    overlay.addEventListener('click', function(e){
      if (e.target === overlay) {
        overlay.style.display = 'none';
        runTryAgain();
      }
    });

    // When user taps the X, run Try Again
    if (closeBtn) {
      closeBtn.addEventListener('click', function(e){
        e.preventDefault();
        overlay.style.display = 'none';
        runTryAgain();
      });
    }
  });
})();
</script>
<script>
(function(){
  function runExitReset(){
    try {
      if (typeof window.hardResetToSplash === 'function') {
        window.hardResetToSplash();
        return;
      }
    } catch(e){}
    try {
      if (typeof window.tryAgain === 'function') {
        window.tryAgain();
        return;
      }
    } catch(e){}
    // Fallback: click exit or try again buttons if present
    var exitBtn = document.getElementById('exitButton');
    if (exitBtn) { exitBtn.click(); return; }
    var tryBtn = document.getElementById('btnTryAgain');
    if (tryBtn) { tryBtn.click(); return; }
    // Last resort: set splash state
    try { document.body.setAttribute('data-state','splash'); } catch(_){}
  }

  document.addEventListener('DOMContentLoaded', function(){
    var overlay = document.getElementById('instrModalOverlay');
    var closeBtn = document.getElementById('instrClose');
    if (!overlay) return;
    overlay.addEventListener('click', function(e){
      if (e.target === overlay) {
        overlay.style.display = 'none';
        runExitReset();
      }
    });
    if (closeBtn) {
      closeBtn.addEventListener('click', function(e){
        e.preventDefault();
        overlay.style.display = 'none';
        runExitReset();
      });
    }
  });
})();
</script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  const help = document.getElementById('helpLink');
  const overlay = document.getElementById('instrModalOverlay');
  if (help && overlay) {
    help.addEventListener('click', function(){
      overlay.style.display = 'flex';
    });
  }
});
</script>
<!-- Help / Instructions (separate modal) -->
<div aria-labelledby="instrHelpTitle" aria-modal="true" class="inline6" id="instrHelpOverlay" role="dialog">
<div id="instrHelpModal">
<button aria-label="Close Help / Instructions" id="instrHelpClose"><img alt="Close" src="images/reelX.png"/></button>
<h2 id="instrHelpTitle"><img alt="How to Play" class="howto-img" src="images/howto.png"/></h2>
<p>Each round shows a scene filmed at a Cleveland location.</p>
<p>A question will appear with <strong>four movie options</strong> to choose from.</p>
<p>Pick the correct movie before the timer runs out.</p>
<p>Right or wrong, you’ll see the correct answer and a fun fact about the movie.</p>
<p>Tap anywhere to advance to the next question.</p>
<p>Exit anytime with the <strong>Exit</strong> button in the corner.</p>
</div>
</div>
<script>
(function(){
  function runExitBack(){
    try {
      if (typeof window.hideExitOverlay === 'function') return void window.hideExitOverlay();
      if (typeof window.exitBack === 'function') return void window.exitBack();
      if (typeof window.resumeFromExit === 'function') return void window.resumeFromExit();
      // Fallbacks
      var btn = document.getElementById('btnBack') || document.querySelector('#exitOverlay .back, #exitOverlay [data-action="back"]');
      if (btn) { btn.click(); return; }
      if (typeof window.resumeQuiz === 'function') return void window.resumeQuiz();
      if (typeof window.unpauseQuiz === 'function') return void window.unpauseQuiz();
    } catch(e){ console.warn('[HelpModal] Back fallback', e); }
  }

  document.addEventListener('DOMContentLoaded', function(){
    var helpLink = document.getElementById('helpLink');
    var overlay  = document.getElementById('instrHelpOverlay');
    var closeBtn = document.getElementById('instrHelpClose');
    if (helpLink && overlay){
      helpLink.addEventListener('click', function(e){
        e.preventDefault();
        overlay.style.display = 'flex';
      });
    }
    if (overlay){
      overlay.addEventListener('click', function(e){
        if (e.target === overlay){
          e.preventDefault(); e.stopImmediatePropagation();
          overlay.style.display = 'none';
          runExitBack();
        }
      }, true);
    }
    if (closeBtn){
      closeBtn.addEventListener('click', function(e){
        e.preventDefault(); e.stopImmediatePropagation();
        overlay.style.display = 'none';
        runExitBack();
      }, true);
    }
  });
})();
</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  var h = document.getElementById('instructionsTitle');
  if (h) {
    h.innerHTML = '<img src="images/howto.png" alt="How to Play" class="howto-img">';
  }
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  const splash = document.getElementById('splashOverlay');
  if (!splash) return;
  const vid = splash.querySelector('video.bgvid') || splash.querySelector('video');
  if (!vid) return;

  const list = ["videos/splash/0.mp4", "videos/splash/1.mp4", "videos/splash/2.mp4", "videos/splash/3.mp4", "videos/splash/againsttheropes.mp4", "videos/splash/airforceone.mp4", "videos/splash/alexcross.mp4", "videos/splash/americansplendor.mp4", "videos/splash/antwonefisher.mp4", "videos/splash/avengers.mp4", "videos/splash/captainamerica.mp4", "videos/splash/christmasstory.mp4", "videos/splash/cle-cityonschedule.mp4", "videos/splash/crackerfactory.mp4", "videos/splash/deerhunter.mp4", "videos/splash/doubledragon.mp4", "videos/splash/escapeartist.mp4", "videos/splash/fortunecookie.mp4", "videos/splash/funsize.mp4", "videos/splash/ghettofreaks.mp4", "videos/splash/industrialcle.mp4", "videos/splash/itrunsinthefamily.mp4", "videos/splash/judas.mp4", "videos/splash/kidfromcle.mp4", "videos/splash/landmarks.mp4", "videos/splash/lightofday.mp4", "videos/splash/majorleague.mp4", "videos/splash/ohinohio.mp4", "videos/splash/onepotatotwopotato.mp4", "videos/splash/onetrickpony.mp4", "videos/splash/scenes_concat copy 2.mp4", "videos/splash/scenes_concat copy 3.mp4", "videos/splash/scenes_concat copy.mp4", "videos/splash/scenes_concat.mp4", "videos/splash/shawshankredemption.mp4", "videos/splash/snowwhite.mp4", "videos/splash/soloist.mp4", "videos/splash/spiderman3.mp4", "videos/splash/strangerthanparadise.mp4", "videos/splash/superman.mp4", "videos/splash/takeshelter.mp4", "videos/splash/thegathering.mp4", "videos/splash/theland.mp4", "videos/splash/vid.mp4", "videos/splash/vid1.mp4", "videos/splash/vid2.mp4", "videos/splash/vid3.mp4", "videos/splash/w2c-luce.mp4"];
  if (!list.length) return;

  if (vid.hasAttribute('loop')) vid.removeAttribute('loop');

  let idx = Math.floor(Math.random() * list.length);
  function setSrc(i) {
    const src = list[i];
    if (!src) return;
    vid.src = src;
    vid.load();
    const p = vid.play();
    if (p && typeof p.catch === 'function') p.catch(() => {});
  }

  setSrc(idx);

  vid.addEventListener('ended', function () {
    idx = (idx + 1) % list.length;
    setSrc(idx);
  });

  let rotateTimer = setInterval(function () {
    if (vid.paused) return;
    idx = (idx + 1) % list.length;
    setSrc(idx);
  }, 12000);

  const obs = new MutationObserver(() => {
    if (!document.body.contains(splash) || splash.style.display === 'none' || !splash.classList.contains('show')) {
      clearInterval(rotateTimer);
      obs.disconnect();
    }
  });
  obs.observe(document.body, { attributes: true, childList: true, subtree: true });
});
</script>
<script>
document.addEventListener('DOMContentLoaded', function () {
  var back = document.getElementById('backArrow');
  if (!back) return;
  back.addEventListener('click', function (e) {
    e.preventDefault();
    e.stopPropagation();
    var overlay = document.getElementById('intermissionOverlay');
    if (overlay) overlay.classList.remove('show');
    // If your engine exposes a resume function, call it
    if (typeof window.resumeQuizFromOverlay === 'function') {
      try { window.resumeQuizFromOverlay(); } catch (err) {}
    }
    // Fallback: show quiz container
    var quizWrap = document.querySelector('.quiz-box');
    if (quizWrap) quizWrap.classList.add('active');
  }, { passive: true }, {passive:false});
});
</script>
<script>
// === HUD Hotspot wiring ===
(function(){
  const how = document.getElementById('howtoBtn');
  const exitBtn = document.getElementById('exitBtn');

  // Helper: call if function exists
  function callIf(fnName, ...args){
    try {
      const fn = window[fnName];
      if (typeof fn === 'function') { fn(...args); return true; }
    } catch(e){}
    return false;
  }

  how && (how.onclick = () => {
    // Try common help/how-to hooks used in your app; fall back to event
    if (callIf('openHowto')) return;
    if (callIf('showHelp')) return;
    window.dispatchEvent(new CustomEvent('hud:howto'));
  });

  exitBtn && (exitBtn.onclick = () => {
    // Try to return to quiz / dismiss overlays; fall back to event
    if (callIf('returnToQuiz')) return;
    if (callIf('goToTitleScreen')) return;
    window.dispatchEvent(new CustomEvent('hud:exit'));
  });
})();
</script><script>
// === Hotspot Interaction Enhancements ===
(function(){
  function wireInteractive(btn, handlerNameList, eventName){
    if (!btn) return;
    // Click / tap
    btn.addEventListener('click', (e)=>{
      for (const name of handlerNameList){
        const fn = window[name];
        if (typeof fn === 'function'){ fn(); return; }
      }
      window.dispatchEvent(new CustomEvent(eventName));
    });

    // Keyboard: Enter or Space activates
    btn.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        btn.click();
      }
    });

    // Prevent accidental drag/select behavior
    btn.addEventListener('mousedown', (e)=>{ e.preventDefault(); });
  }

  wireInteractive(
    document.getElementById('howtoBtn'),
    ['openHowto','showHelp'],
    'hud:howto'
  );
  wireInteractive(
    document.getElementById('exitBtn'),
    ['returnToQuiz','goToTitleScreen'],
    'hud:exit'
  );
})();
</script><script>
// === EXIT hotspot -> Exit Modal wiring ===
(function(){
  function tryExitModal(){
    // 1) DOM triggers: click an existing Exit button if present
    const selectors = [
      '#exitButton',
      'button[aria-label="Exit"]',
      '[data-action="exit"]',
      '[data-exit-modal]',
      '.exit-button',
      'button.exit'
    ];
    for (const sel of selectors){
      const el = document.querySelector(sel);
      if (el){
        try { el.click(); return true; } catch(_) {}
      }
    }
    // 2) Global functions commonly used for exit modals
    const funcs = [
      'openExitModal','showExitModal','toggleExitModal',
      'openExit','showExit','exitModal','openModal','showModal'
    ];
    for (const name of funcs){
      const fn = window[name];
      if (typeof fn === 'function'){
        try {
          // Pass 'exit' to generic modal openers if they accept an arg
          if (name === 'openModal' || name === 'showModal'){ fn('exit'); }
          else { fn(); }
          return true;
        } catch(_) {}
      }
    }
    // 3) Fallback: emit a custom event your app can listen to
    window.dispatchEvent(new CustomEvent('hud:exit:open'));
    return false;
  }

  const exitBtn = document.getElementById('exitBtn');
  if (exitBtn){
    // Click / tap
    exitBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      tryExitModal();
    });
    // Keyboard
    exitBtn.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        tryExitModal();
      }
    });
  }
})();
</script><script>// === HOW TO hotspot -> modal (mirror EXIT behavior) ===
(function(){
  function tryHowtoModal(){
    // 1) DOM triggers: click a real Help/How-To control if present
    const selectors = [
      '#helpButton', '#howtoButton',
      'button[aria-label="Help"]', 'button[aria-label="How To"]',
      '[data-action="help"]', '[data-action="howto"]',
      '.help-button', '.howto-button', 'button.help', 'button.howto'
    ];
    for (const sel of selectors){
      const el = document.querySelector(sel);
      if (el){
        try { el.click(); return true; } catch(_) {}
      }
    }

    // 2) Global functions commonly used for help/howto modals
    const funcs = [
      'openHowtoModal','showHowtoModal','toggleHowtoModal',
      'openHelp','showHelp','helpModal','howtoModal',
      'openModal','showModal'
    ];
    for (const name of funcs){
      const fn = window[name];
      if (typeof fn === 'function'){
        try {
          // Pass 'howto' to generic modal openers if they accept an arg
          if (name === 'openModal' || name === 'showModal'){ fn('howto'); }
          else { fn(); }
          return true;
        } catch(_) {}
      }
    }

    // 3) Fallback: emit a custom event your app can listen to
    window.dispatchEvent(new CustomEvent('hud:howto:open'));
    return false;
  }

  const howBtn = document.getElementById('howtoBtn');
  if (howBtn){
    // Click / tap
    howBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      tryHowtoModal();
    });
    // Keyboard
    howBtn.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        tryHowtoModal();
      }
    });
  }
})();</script><script>// === HOW TO diagnostics ===
(function(){
  // Enable hotspot outlines by running in console:  window.hudHotspotDebug=1; document.documentElement.classList.add('debug-hotspots');
  if (window.hudHotspotDebug === 1) document.documentElement.classList.add('debug-hotspots');

  function log(){ try{ console.log.apply(console, arguments); }catch(e){} }
  function warn(){ try{ console.warn.apply(console, arguments); }catch(e){} }

  function checkSelectors(list){
    const found = [];
    for (const sel of list){
      const el = document.querySelector(sel);
      if (el) found.push(sel);
    }
    return found;
  }
  function checkFunctions(list){
    const ok = [];
    for (const name of list){
      if (typeof window[name] === 'function') ok.push(name);
    }
    return ok;
  }

  const HOWTO_SELECTORS = [
    '#helpButton', '#howtoButton',
    'button[aria-label="Help"]', 'button[aria-label="How To"]',
    '[data-action="help"]', '[data-action="howto"]',
    '.help-button', '.howto-button', 'button.help', 'button.howto'
  ];
  const HOWTO_FUNCS = [
    'openHowtoModal','showHowtoModal','toggleHowtoModal',
    'openHelp','showHelp','helpModal','howtoModal',
    'openModal','showModal'
  ];

  // Run checks on load so you can see what's available
  window.addEventListener('load', ()=>{
    log('[HUD][HOWTO] Available elements:', checkSelectors(HOWTO_SELECTORS));
    log('[HUD][HOWTO] Available functions:', checkFunctions(HOWTO_FUNCS));
  });

  // Replace handler to print step-by-step
  (function wire(){
    const btn = document.getElementById('howtoBtn');
    if (!btn) { warn('[HUD][HOWTO] hotspot button not found'); return; }
    btn.addEventListener('click', (e)=>{
      e.preventDefault();
      log('[HUD][HOWTO] click detected');
      // 1) Try selectors
      for (const sel of HOWTO_SELECTORS){
        const el = document.querySelector(sel);
        if (el){
          log('[HUD][HOWTO] clicking selector:', sel, el);
          try { el.click(); return; } catch(err){ warn('[HUD][HOWTO] click error:', err); }
        }
      }
      // 2) Try functions
      for (const name of HOWTO_FUNCS){
        const fn = window[name];
        if (typeof fn === 'function'){
          log('[HUD][HOWTO] calling function:', name);
          try {
            (name==='openModal'||name==='showModal') ? fn('howto') : fn();
            return;
          } catch(err){ warn('[HUD][HOWTO] function error:', name, err); }
        }
      }
      // 3) Nothing found
      warn('[HUD][HOWTO] No matching element or function. Listen for event: hud:howto:open');
      window.dispatchEvent(new CustomEvent('hud:howto:open'));
    }, { capture: true });
  })();
})();</script><script>
// === HOW TO in-frame (replace question image area) ===
(function(){
  const wrap = document.getElementById('hudSVGWrap');
  const howBtn = document.getElementById('howtoBtn');
  const frame = document.getElementById('howtoFrame');
  const back = frame ? frame.querySelector('.back') : null;

  function openHowtoFrame(){
    if (!frame) return;
    frame.style.display = 'block';
    wrap && wrap.classList.add('howto-open');
  }
  function closeHowtoFrame(){
    if (!frame) return;
    frame.style.display = 'none';
    wrap && wrap.classList.remove('howto-open');
  }

  // Open on HOW TO hotspot
  if (howBtn){
    howBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      openHowtoFrame();
    }, { capture: true });
    howBtn.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter' || e.key === ' '){
        e.preventDefault(); openHowtoFrame();
      }
    });
  }

  // Back/close
  if (back){
    back.addEventListener('click', (e)=>{
      e.preventDefault();
      closeHowtoFrame();
    });
  }

  // ESC closes
  window.addEventListener('keydown', (e)=>{
    if (e.key === 'Escape') closeHowtoFrame();
  });
})();
</script><script>
(function(){
  let __HOWTO_OPENING = false;

  function getVisibleModalRoot(){
    const qs = '#exitModal, .exit-modal, .screen-overlay.show, .screen-overlay, [role="dialog"], .overlay, .modal, .dialog, .sheet, .panel';
    const list = document.querySelectorAll(qs);
    let best=null, area=-1;
    list.forEach(el=>{
      const r=el.getBoundingClientRect(), a=r.width*r.height;
      if ((el.offsetParent || (r.width>0 && r.height>0)) && a>area){ best=el; area=a; }
    });
    return best;
  }
  function hideExitActions(root){
    if (!root) return;
    const nodes = root.querySelectorAll('button, [role="button"], a, .btn, .cta, .action');
    nodes.forEach(el=>{
      const txt = (el.textContent||"").replace(/\s+/g," ").trim().toUpperCase();
      if (txt==="TRY AGAIN" || txt==="QUIT"){
        el.dataset.howtoHidden="1";
        el.style.display="none";
        el.setAttribute("aria-hidden","true");
      }
    });
  }
  function restoreHidden(root){
    root?.querySelectorAll('[data-howto-hidden="1"]').forEach(el=>{
      el.style.display=""; el.removeAttribute("aria-hidden"); delete el.dataset.howtoHidden;
    });
  }
  function applyHowto(root){
    if (!root) return false;
    root.classList.add("howto-mode");
    root.setAttribute("data-exit-mode","howto");
    hideExitActions(root);
    return true;
  }
  function clearHowto(root){
    if (!root) return;
    restoreHidden(root);
    root.classList.remove("howto-mode");
    if (root.getAttribute("data-exit-mode")==="howto") root.removeAttribute("data-exit-mode");
  }
  function openNeutralOverlayOnce(){
    const candidates = ["openOverlay","showOverlay","openModal","showModal","openIntermission","showIntermission"];
    for (const fn of candidates){
      if (typeof window[fn]==="function"){
        try { window[fn]("howto"); return true; } catch(_){}
        try { window[fn](); return true; } catch(_){}
      }
    }
    return false;
  }
  function showHowToModal(){
    if (__HOWTO_OPENING) return;
    __HOWTO_OPENING = true;
    openNeutralOverlayOnce(); // best-effort; do not call EXIT-specific openers

    // Apply styling a few times after mount, then stop (no observers, no loops)
    let attempts = 7; // ~350ms
    (function tick(){
      const root = getVisibleModalRoot();
      if (root) {
        applyHowto(root);
        const closer = root.querySelector('.back, .close, [data-action="close"], [aria-label="Back"], [aria-label="Close"], .back-arrow, .btn-back');
        if (closer && !closer.__howtoBound){
          closer.__howtoBound = true;
          closer.addEventListener('click', (e)=>{ try{e.preventDefault();e.stopPropagation();}catch(_){} try{e.preventDefault();e.stopPropagation();}catch(_){} clearHowto(root); __HOWTO_OPENING=false; }, { capture:true, });
        }
      }
      if (--attempts > 0) setTimeout(tick, 50);
      else __HOWTO_OPENING = false;
    })();
  }
  function wireHowTo(){
    const selectors = ['#helpButton', '#howtoButton'];
    selectors.forEach(sel=>{
      const el = document.querySelector(sel);
      if (!el) return;
      const h = (e)=>{ try{ e.preventDefault(); e.stopPropagation(); }catch(_){ } showHowToModal(); };
      el.addEventListener('click', h, { capture:true, passive:false });
      el.addEventListener('keydown', (e)=>{ if (e.key==='Enter'||e.key===' ') h(e); }, { passive:false });
    });
    document.addEventListener('click', function(e){
      const g = e.target?.closest ? e.target.closest('g#howtoButton') : null;
      if (g){ try{ e.preventDefault(); e.stopPropagation(); }catch(_){ } showHowToModal(); }
    }, { capture:true, passive:false });
  }
  window.addEventListener('DOMContentLoaded', wireHowTo);
})();
</script>
<!-- === HUD BRIDGE (auto-injected) === -->
<script>
(function(){
  // Run after DOM ready
  function ready(fn){ if(document.readyState!=='loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }

  ready(function(){
    // 1) Ensure legacy placeholders exist so old JS doesn't crash
    function ensureStub(id){
      var el = document.getElementById(id);
      if(!el){
        el = document.createElement('div');
        el.id = id;
        el.style.display = 'none';
        el.setAttribute('data-bridge-stub','');
        document.body.appendChild(el);
      }
      return el;
    }
    var exitStub = ensureStub('exitButton');
    var helpStub = ensureStub('helpButton');

    // Utility: dispatch a safe click on a target element (bubbling)
    function safeClick(el){
      if(!el) return;
      try {
        el.dispatchEvent(new MouseEvent('click', {bubbles:true, cancelable:true, view:window}));
      } catch(e){
        // Fallback for older environments
        var ev = document.createEvent('MouseEvents');
        ev.initEvent('click', true, true);
        el.dispatchEvent(ev);
      }
    }

    // 2) Wire the external SVG HUD clicks to those stubs
    // Try common places where the SVG may be embedded
    var obj = document.getElementById('hudSVGObject') ||
              (document.querySelector('#hudSVGWrap object')) ||
              (document.querySelector('object[data$="file.svg"], object[data*="file.svg"]'));

    // Helper: attach click handler for an element id inside the SVG
    function attachSvgHandler(svgDoc, id, targetId){
      var el = svgDoc.getElementById(id);
      if(el){
        try { el.style.cursor = 'pointer'; } catch(_) {}
        el.addEventListener('click', function(ev){
          // forward to legacy target
          var target = document.getElementById(targetId);
          safeClick(target);
        });
      }
    }

    function delegateById(svgDoc){
      // Generic delegation: if any clicked element (or ancestor) id contains "exit" or "howto"/"help"
      svgDoc.addEventListener('click', function(ev){
        var node = ev.target;
        // Walk up to find an id-bearing ancestor
        while(node && node !== svgDoc){
          var id = (node.id || '').toLowerCase();
          if(id){
            if(id.includes('exit')){
              safeClick(exitStub);
              break;
            }
            if(id.includes('howto') || id.includes('help')){
              safeClick(helpStub);
              break;
            }
          }
          node = node.parentNode;
        }
      }, {passive:false});
    }

    function onSvgLoaded(svgObj){
      try{
        var svgDoc = svgObj.contentDocument || svgObj.getSVGDocument && svgObj.getSVGDocument();
        if(!svgDoc) return;

        // Known id variants
        ['EXIT','Exit','exit','exitBtn','ExitBtn'].forEach(function(id){
          attachSvgHandler(svgDoc, id, 'exitButton');
        });
        ['HOWTO','HowTo','howto','HELP','Help','help','helpBtn','HelpBtn'].forEach(function(id){
          attachSvgHandler(svgDoc, id, 'helpButton');
        });

        // Fallback: generic delegation on any id containing keywords
        delegateById(svgDoc);
      } catch(e){
        console.warn('[HUD-BRIDGE] SVG wiring failed:', e);
      }
    }

    if(obj){
      // If already loaded
      if((obj.contentDocument && obj.contentDocument.documentElement) || (obj.getSVGDocument && obj.getSVGDocument())){
        onSvgLoaded(obj);
      }
      // Or wait for load
      obj.addEventListener('load', function(){ onSvgLoaded(obj); }, { once: true });
    } else {
      // No object tag found — still keep stubs so legacy JS stays happy
      console.info('[HUD-BRIDGE] No SVG object found; stubs installed for legacy JS.');
    }

    // 3) OPTIONAL: Expose a small API to manually trigger via console
    window.__HUD_BRIDGE__ = {
      clickExit: function(){ safeClick(exitStub); },
      clickHowTo: function(){ safeClick(helpStub); }
    };
  });
})();
</script>
<!-- === /HUD BRIDGE === -->


<!-- === HOW TO: In-frame overlay (inside .stage) === -->
<style>
/* Reuse the existing .screen-overlay sizing, but with our own id */

#howtoInFrame.screen-overlay { background: rgba(0,0,0,0.88); }
#howtoInFrame .howto-wrap { position:absolute; inset:0; display:flex; align-items:center; justify-content:center; padding:4vmin; }
#howtoInFrame .howto-copy { max-width: min(800px, 92vw); color: #f2f2f2; text-align: left; font-family: 'AdvercaseRegular', sans-serif; line-height: 1.35; }
#howtoInFrame .howto-title { margin: 0 0 1rem 0; text-align: left; }
#howtoInFrame .howto-title-img { height: clamp(28px, 5.5vmin, 44px); vertical-align: middle; }
#howtoInFrame .panel { background: transparent; }
#howtoInFrame .howto-resume-mount { position: absolute; right: 2%; bottom: 2%; }
#howtoInFrame.screen-overlay { 
  background: rgba(0,0,0,0.78);
}
#howtoInFrame .panel {
  display: grid;
  place-items: center;
  background: #000;
}
#howtoInFrame .howto-wrap { position:absolute; inset:0; display:grid; place-items:center; padding:0; margin:0; box-sizing:border-box; }
#howtoInFrame .howto-img { width:100%; height:100%; max-width:100%; max-height:100%; object-fit:contain; filter: drop-shadow(0 8px 28px rgba(0,0,0,.9)); }
/* Hide any underlying EXIT CTA row while our HOWTO is visible */
#howtoInFrame.show ~ .screen-overlay .cta-row,
.screen-overlay[data-hidden-by-howto="1"] .cta-row {
  display: none !important;
}
/* Optional: cursor hint */
#howtoInFrame { cursor: pointer; }
#howtoInFrame .hint {
  position: absolute;
  right: 2%;
  bottom: 1.5%;
  font: 700 clamp(10px, 1.8vmin, 14px)/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: #f5f5f5;
  opacity: .8;
  text-shadow: 0 2px 10px #000;
  pointer-events: none;
}

.howto-resume-mount{
  position: absolute;
  left: 50%;
  bottom: 3%;
  transform: translateX(-50%);
  pointer-events: auto;
  z-index: 5;
}
.howto-resume-mount .back-arrow,
.howto-resume-mount [data-action="back"],
.howto-resume-mount [aria-label*="return"],
.howto-resume-mount [aria-label*="resume"]{
  cursor: pointer;
}

</style>

<!-- === /HOW TO: In-frame overlay === -->


<script>
(function(){
  // Simple logger
  function log(){ try{ console.log.apply(console, arguments); }catch(e){} }
  function ready(fn){ if(document.readyState!=='loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }

  ready(function(){
    // Build overlay if missing
    var howto = document.getElementById('howtoInFrame');
    if (!howto){
      var stage = document.querySelector('.stage') || document.body;
      howto = document.createElement('div');
      howto.id = 'howtoInFrame';
      howto.className = 'screen-overlay';
      howto.setAttribute('aria-hidden','true');
      howto.style.display = 'none';
      howto.innerHTML = `<div class="panel">
  <div class="howto-wrap">
    <div class="howto-copy">
      <h2 class="howto-title"><img class="howto-title-img" alt="How to Play" src="images/howto.png"/></h2>
      <p>Each round shows a scene filmed at a Cleveland location.</p>
      <p>A question will appear with <strong>four movie options</strong> to choose from.</p>
      <p>Pick the correct movie before the timer runs out.</p>
      <p>Right or wrong, you’ll see the correct answer and a fun fact about the movie.</p>
      <p>Tap anywhere to advance to the next question.</p>
      <p>Exit anytime with the <strong>Exit</strong> button in the corner.</p>
    </div>
    <div id="howtoResumeMount" class="howto-resume-mount"></div>
  </div>
</div>`;
      stage.appendChild(howto);
      try{ howto.addEventListener('click', function(e){ if (window.__HOWTO_STATE__ && window.__HOWTO_STATE__.open) { resumeQuizHowto(); } }, { capture:true }); }catch(_){}
    }

    // Global-ish state
    window.__HOWTO_STATE__ = window.__HOWTO_STATE__ || { open:false, pausedViaExit:false, exitOverlay:null };

    // Utility: find the real EXIT overlay (best-effort)
    function getExitOverlay(){
      // Prefer a visible EXIT overlay that's not our HOWTO
      var vis = document.querySelector('.screen-overlay.show:not(#howtoInFrame)');
      if (vis) return vis;
      // Otherwise, fallback to any EXIT overlay (still avoid our HOWTO wrapper)
      return document.querySelector('.screen-overlay:not(#howtoInFrame)');
    }

    // Pause: trigger the app's built-in exit pause, then tag the overlay
    function pauseViaExitThenShow(){
      if (window.__HOWTO_STATE__.open) { return; } // already open
      window.__HOWTO_STATE__.open = true;

      // Click whatever the app uses as the Exit control to pause timers
      var exitBtn = document.querySelector('#exitButton, button[aria-label="Exit"], [data-action="exit"], [data-exit-modal], .exit-button, button.exit');
      if (exitBtn && typeof exitBtn.click === 'function'){
        try { exitBtn.click(); } catch(_) {}
      }

      // Give the DOM a tick to create/present the exit overlay, then mark & hide it
      setTimeout(function(){
        // small delay so the EXIT overlay is on DOM
        
var ex = getExitOverlay();
        if (ex){
          try { window.__HOWTO_STATE__.exitOverlay = ex; } catch(_) {}
          if (window.__HOWTO_STATE__) window.__HOWTO_STATE__.pausedViaExit = true;

          if (window.__HOWTO_STATE__ && window.__HOWTO_STATE__.open) { ex.setAttribute('data-hidden-by-howto','1'); }
          var cta = ex.querySelector('.cta-row');
          if (cta && cta.style) cta.style.setProperty('display','none','important');
          // Keep it paused but not visible
          if (ex.classList) ex.classList.remove('show');
          ex.style.display = 'none';
          window.__HOWTO_STATE__.pausedViaExit = true;
        }
// Install HOWTO resume arrow: clone real back control if present; else draw fallback SVG arrow
(function(){
  try {
    var mount = document.getElementById('howtoResumeMount');
    if (!mount) return;
    mount.innerHTML = '';
    var backBtn = ex && ex.querySelector('.back-arrow, [data-action="back"], [aria-label*="return"], [aria-label*="resume"]');
    if (backBtn){
      var clone = backBtn.cloneNode(true);
      // make sure it's clickable in our overlay
      try { clone.removeAttribute('tabindex'); } catch(_){}
      clone.addEventListener('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        try { backBtn.click(); } catch(_){ resumeQuizHowto(); }
      }, { capture: true });
      mount.appendChild(clone);
    } else {
      // Fallback inline SVG arrow (right-pointing)
      var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
      svg.setAttribute('viewBox','0 0 120 60');
      svg.setAttribute('class','howto-fallback-arrow');
      // gold arrow with outline
      var path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
      path.setAttribute('d','M5 30 L80 5 L80 22 L115 22 L115 38 L80 38 L80 55 Z');
      path.setAttribute('fill','#f0b71d');
      path.setAttribute('stroke','#111');
      path.setAttribute('stroke-width','3');
      svg.appendChild(path);
      svg.addEventListener('click', function(e){
        e.preventDefault();
        e.stopPropagation();
        resumeQuizHowto();
      }, { capture: true });
      mount.appendChild(svg);
    }
  } catch(err){ /* noop */ }
})();

        // Clone the EXIT "back/return" control into HOWTO
        (function(){
          try {
            var backBtn = ex.querySelector('.back-arrow, [data-action="back"], [aria-label*="return"], [aria-label*="resume"]');
            window.__HOWTO_STATE__.backBtn = backBtn || null;
            var mount = document.getElementById('howtoResumeMount');
            if (mount){
              mount.innerHTML = '';
              if (backBtn){
                var clone = backBtn.cloneNode(true);
                // Remove tabindex/focus traps coming from modal context
                try { clone.removeAttribute('tabindex'); } catch(_){}
                // Wire the clone to click the ORIGINAL back button so existing app logic runs
                clone.addEventListener('click', function(e){
                  e.preventDefault();
                  try {
                    // Ensure EXIT overlay is visible for the handler if it needs it
                    ex.classList.add('show');
                    ex.style.display = '';
                  } catch(_){}
                  try { backBtn.click(); } catch(_){
                    // Fallback to manual resume
                    resumeQuizHowto();
                  }
                }, { capture: true });
                mount.appendChild(clone);
              } else {
                // Fallback resume button if no back control found
                var btn = document.createElement('button');
                btn.className = 'inter-btn howto-fallback-resume';
                btn.type = 'button';
                btn.textContent = 'Return to Quiz';
                btn.addEventListener('click', function(e){ e.preventDefault(); resumeQuizHowto(); }, { capture:true });
                mount.appendChild(btn);
              }
            }
          } catch(__e){}
        })();
    

        // Now show HOWTO overlay
        howto.style.display = '';
        if (howto.classList) howto.classList.add('show');
        howto.setAttribute('aria-hidden','false');
        // Let app know we're paused (if it listens to this)
        try { document.dispatchEvent(new CustomEvent('quiz:pause')); } catch(_){}
      }, 0);
    }

    // Resume: hide HOWTO, restore/close EXIT overlay, and dispatch resume
    
function resumeQuizHowto(){
  // Hide HOWTO UI first
  if (typeof howto !== 'undefined' && howto && howto.classList) howto.classList.remove('show');
  howto.style.display = 'none';
  howto.setAttribute('aria-hidden','true');

  // If we paused via EXIT, restore only the overlay we hid
  if (window.__HOWTO_STATE__ && window.__HOWTO_STATE__.pausedViaExit){
    var ex = window.__HOWTO_STATE__.exitOverlay || document.querySelector('.screen-overlay[data-hidden-by-howto="1"]');
    if (ex){
      try { ex.removeAttribute('data-hidden-by-howto'); } catch(_){}
      if (ex.classList) ex.classList.remove('show');
      if (ex.style) ex.style.removeProperty('display');
      var cta = ex.querySelector('.cta-row');
      if (cta && cta.style) cta.style.removeProperty('display');
    }
  }

  
  // Try known resume hooks in order (best-effort)
  var resumed = false;
  try {
    if (typeof window.resumeQuizFromOverlay === 'function') { window.resumeQuizFromOverlay(); resumed = true; }
  } catch(_){}
  try {
    if (!resumed && typeof window.resumeQuiz === 'function' && window.resumeQuiz !== resumeQuizHowto) { window.resumeQuiz(); resumed = true; }
  } catch(_){}
  try {
    if (!resumed && typeof window.initQuizRun === 'function') { window.initQuizRun(true); resumed = true; }
  } catch(_){}
  try {
    if (!resumed && typeof window.startTimer === 'function') { window.startTimer(); resumed = true; }
  } catch(_){}
  // Final event emit for any listeners
  try { document.dispatchEvent(new CustomEvent('quiz:resume')); } catch(_){}

  // Reset flags for next time
  if (window.__HOWTO_STATE__){
    window.__HOWTO_STATE__.open = false; window.__HOWTO_STATE__.pausedViaExit = false; window.__HOWTO_STATE__.exitOverlay = null;
    window.__HOWTO_STATE__.pausedViaExit = false;
  }
}


    // Hook Help / HOW TO trigger
    function attachHelp(selector){
      var btn = document.querySelector(selector);
      if (!btn) return;
      // Use non-passive to allow preventDefault
      btn.addEventListener('click', function(e){
        e.preventDefault();
        pauseViaExitThenShow();
      }, { capture: true });
      btn.addEventListener('keydown', function(e){
        if (e.key === 'Enter' || e.key === ' '){
          e.preventDefault();
          pauseViaExitThenShow();
        }
      });
    }

    attachHelp('#helpButton');
    attachHelp('#howtoButton');
    attachHelp('[data-action="help"]');
    attachHelp('[data-action="howto"]');

    // Expose a stable hook for other scripts
    window.__HUD_BRIDGE__ = window.__HUD_BRIDGE__ || {};
    window.__HUD_BRIDGE__.showHowToInFrame = pauseViaExitThenShow;

    // Optionally, make available globally (if something else calls resumeQuiz())
    window.resumeQuiz = resumeQuizHowto;
  });
})();
</script>


<script>
(function(){
  function hideExitArrows(){
    try{
      var scope = document.getElementById('exitOverlay') || document.querySelector('.exit-overlay');
      if (!scope) return;
      scope.querySelectorAll('.back-arrow,.hud-exit,.exit-btn,#howtoResumeMount,.howto-fallback-arrow')
        .forEach(function(el){ el.style.display='none'; });
    }catch(e){}
  }
  // Hook common exit modal triggers
  window.addEventListener('exit:show', hideExitArrows, {capture:true});
  window.addEventListener('showExit', hideExitArrows, {capture:true});
  // Also run once on DOMContentLoaded for safety
  document.addEventListener('DOMContentLoaded', hideExitArrows);
  // fallback: reapply every 2s briefly
  setInterval(hideExitArrows, 2000);
})();
</script>


<!-- Debug overlay (v5): CAPTURE ACTUAL RANDOM 10 ORDER selected for this run; only with ?debug=1 -->
<script>
(function(){
  var params = new URLSearchParams(window.location.search);
  if (!params.has('debug')) return;

  function onReady(fn){
    if (document.readyState === 'complete' || document.readyState === 'interactive') {
      setTimeout(fn, 0);
    } else {
      document.addEventListener('DOMContentLoaded', fn, {once:true});
    }
  }

  onReady(function(){
    try {
      // ---------- UI ----------
      var box = document.createElement('div');
      box.id = 'quizOrderDisplay';
      box.style.position='fixed'; box.style.bottom='10px'; box.style.left='10px';
      box.style.zIndex='9999'; box.style.background='rgba(0,0,0,0.85)';
      box.style.color='#f5d75c'; box.style.fontFamily='monospace';
      box.style.padding='10px'; box.style.maxWidth='46vw'; box.style.maxHeight='62vh';
      box.style.overflow='auto'; box.style.fontSize='14px'; box.style.border='1px solid #f5d75c';
      box.style.lineHeight='1.4'; box.style.boxShadow='0 6px 24px rgba(0,0,0,.45)'; box.style.borderRadius='8px';

      var now = document.createElement('div');
      now.id='quizNowPlaying'; now.style.marginBottom='8px'; now.style.fontWeight='bold';
      now.style.color='#fff'; now.textContent='Now Playing: —';

      var list = document.createElement('div'); list.id='quizOrderList';
      list.textContent='Capturing quiz order…';

      var hint = document.createElement('div');
      hint.style.marginTop='6px'; hint.style.opacity='0.7'; hint.style.fontSize='12px';
      hint.textContent='(This list records the order you actually see during this run.)';

      box.appendChild(now); box.appendChild(list); box.appendChild(hint);
      document.body.appendChild(box);

      document.addEventListener('keydown', function(ev){
        if (ev.key === '`' || ev.key === '~'){
          box.style.display = (box.style.display === 'none') ? 'block' : 'none';
        }
      });

      // ---------- Build lookup: asset basename -> title ----------
      function basename(path){
        if (!path) return '';
        var q = String(path).split('?')[0];
        var hash = q.split('#')[0];
        var parts = hash.split('/');
        return parts[parts.length-1].toLowerCase();
      }

      function titlesFromData(){
        var titles = [];
        try{
          if (Array.isArray(window.FILMS_DATA)) {
            for (var i=0;i<window.FILMS_DATA.length;i++){
              var f = window.FILMS_DATA[i]||{};
              titles.push({title: (f.title||f.name||'Untitled'), img: f.location && f.location.image, logo: f.logo, video: f.location && f.location.video});
            }
            return titles;
          }
          if (Array.isArray(window.FILMS)) {
            for (var j=0;j<window.FILMS.length;j++){
              var g = window.FILMS[j]||{};
              titles.push({title: (g.title||g.name||'Untitled'), img: g.location && g.location.image, logo: g.logo, video: g.location && g.location.video});
            }
            return titles;
          }
          if (Array.isArray(window.quizData)) {
            for (var k=0;k<window.quizData.length;k++){
              var q = window.quizData[k]||{};
              titles.push({title:(q.title||q.question||'Untitled'), img:q.image|| (q.location && q.location.image), logo:q.logo, video:q.video || (q.location && q.location.video)});
            }
            return titles;
          }
        }catch(e){}
        return [];
      }

      var tdata = titlesFromData();
      var assetToTitle = {};
      for (var i=0;i<tdata.length;i++){
        var item = tdata[i];
        if (item.img) assetToTitle[basename(item.img)] = item.title;
        if (item.logo) assetToTitle[basename(item.logo)] = item.title;
        if (item.video) assetToTitle[basename(item.video)] = item.title;
      }

      // ---------- Capture order during runtime ----------
      window.__QUIZ_DEBUG_ORDER = window.__QUIZ_DEBUG_ORDER || [];
      var captured = window.__QUIZ_DEBUG_ORDER;
      var seen = {}; captured.forEach(function(t){ seen[t] = true; });

      function updateUI(){
        // Show captured order
        if (captured.length){
          var lines = [];
          for (var i=0;i<captured.length;i++){ lines.push((i+1)+'. '+captured[i]); }
          list.innerHTML = '<div style="opacity:.9">Current Quiz Order (captured):</div>' + lines.join('<br>');
        } else {
          list.innerHTML = 'Waiting for first question…';
        }
        // Try detect current index
        var idx = -1;
        var keys = ['currentIndex','currentQuestion','qIndex','questionIndex','idx'];
        for (var k=0;k<keys.length;k++){
          var key = keys[k];
          if (typeof window[key] === 'number' && !isNaN(window[key])) { idx = window[key]; break; }
        }
        if (idx >= 0 && idx < captured.length){
          now.innerHTML = 'Now Playing: <span style="color:#f5d75c">' + (idx+1) + '/' + captured.length + '</span> — ' + captured[idx];
        } else {
          now.textContent = 'Now Playing: —';
        }
      }

      function captureFromAssets(){
        // Look for prominent media in the screen
        var sel = '.location-image, figure.location-figure img, .stage img, .stage video, video, img';
        var nodes = document.querySelectorAll(sel);
        var best = null;
        for (var i=0;i<nodes.length;i++){
          var el = nodes[i];
          var src = el.currentSrc || el.src || el.getAttribute('src') || el.getAttribute('poster');
          if (!src) continue;
          var base = basename(src);
          var title = assetToTitle[base];
          if (title){ best = title; break; }
        }
        if (best && !seen[best]){
          seen[best] = true;
          captured.push(best);
          updateUI();
        }
      }

      // Debounced observer
      var scheduled = false;
      function schedule(){
        if (scheduled) return;
        scheduled = true;
        setTimeout(function(){ scheduled = false; try{ captureFromAssets(); updateUI(); }catch(e){} }, 60);
      }

      // Observe main containers to pick up question changes
      try{
        var mo = new MutationObserver(schedule);
        mo.observe(document.body, {subtree:true, childList:true, characterData:true, attributes:true});
      }catch(e){}

      // Kick off
      updateUI();
      schedule();

      // Also hook common next/advance functions just in case (safe wrap)
      ['showQuestion','renderQuestion','loadQuestion','setQuestion','goToQuestion','nextQuestion','showNext'].forEach(function(name){
        if (typeof window[name] === 'function'){
          var orig = window[name];
          window[name] = function(){
            var r = orig.apply(this, arguments);
            try{ captureFromAssets(); updateUI(); }catch(e){}
            return r;
          };
        }
      });

      // If the app exposes a selected set (array of titles or ids), try to ingest it early
      var candidates = ['selectedFilms','quizSet','runOrder','activeQuestions','selectedQuestions','filmlist','filmSet','questionSet'];
      for (var c=0;c<candidates.length;c++){
        var arr = window[candidates[c]];
        if (Array.isArray(arr) && arr.length){
          // Try to convert to titles
          for (var a=0;a<arr.length;a++){
            var v = arr[a];
            var title = null;
            if (typeof v === 'string'){ title = v; }
            else if (v && typeof v === 'object' && v.title){ title = v.title; }
            else if (typeof v === 'number' && Array.isArray(window.FILMS_DATA) && window.FILMS_DATA[v] && window.FILMS_DATA[v].title){
              title = window.FILMS_DATA[v].title;
            }
            if (title && !seen[title]){ seen[title] = true; captured.push(title); }
          }
          updateUI();
          break;
        }
      }
    } catch(err){
      try { console.error('[DEBUG OVERLAY v5 ERROR]', err); } catch(e){}
    }
  });
})();
</script>


<!-- === CREDITS OVERLAY (embedded) === -->
<style>
  #creditsOverlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.92);
    color: #fff;
    z-index: 9999;
    display: none;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }
  #creditsOverlay.show { display: flex; }
  #creditsStage {
    position: relative;
    width: min(1000px, 90vw);
    height: min(562px, 50vw);
    background: #000;
    overflow: hidden;
    border: 1px solid #333;
    box-shadow: 0 10px 40px rgba(0,0,0,0.6);
  }
  #creditsHud {
    width: min(1000px, 90vw);
    display: flex;
    margin-top: 10px;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
  }
  #creditsTitle { font: 600 18px/1.3 system-ui, sans-serif; }
  #creditsText { font: 400 14px/1.4 system-ui, sans-serif; opacity: 0.9; }
  #creditsClose { margin-left: auto; }
  .cbtn {
    background:#111;border:1px solid #444;color:#fff;padding:8px 12px;cursor:pointer;border-radius:4px;
  }
  .cbtn:active{ transform: translateY(1px); }
  #arrowLeftC, #arrowRightC {
    position: absolute; top: 50%; transform: translateY(-50%);
    width: 44px; height: 44px; background: rgba(0,0,0,0.4); border:1px solid #444; border-radius:4px;
    display:flex; align-items:center; justify-content:center; cursor:pointer;
    user-select:none;
  }
  #arrowLeftC { left: 8px; }
  #arrowRightC { right: 8px; }
  #creditsLogo {
    position:absolute; left:16px; top:16px; max-height:64px; max-width:200px; object-fit:contain; filter: drop-shadow(0 2px 6px rgba(0,0,0,0.8));
  }
  #creditsImage, #creditsVideo {
    position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:none;
  }
  #creditsCaption {
    position:absolute; left:0; right:0; bottom:0; padding:12px 16px; background: linear-gradient(transparent, rgba(0,0,0,0.7));
    font: 500 14px/1.3 system-ui, sans-serif;
  }
</style>
<div id="creditsOverlay" role="dialog" aria-modal="true" aria-label="Credits">
  <div id="creditsStage">
    <img id="creditsImage" alt="location image"/>
    <video id="creditsVideo" playsinline muted></video>
    <img id="creditsLogo" alt="film logo"/>
    <div id="arrowLeftC" class="cbtn" title="Prev">◀</div>
    <div id="arrowRightC" class="cbtn" title="Next">▶</div>
    <div id="creditsCaption"></div>
  </div>
  <div id="creditsHud">
    <div>
      <div id="creditsTitle"></div>
      <div id="creditsText"></div>
    </div>
    <button id="creditsClose" class="cbtn">Close</button>
  </div>
</div>
<!-- === /CREDITS OVERLAY === --><script>
(function(){
  // Utility: query param
  function q(name){ try{ return new URLSearchParams(location.search).get(name); }catch(_){ return null; } }
  // slugify fallback
  function slug(s){ return String(s||'').toLowerCase().replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,''); }

  // Build a pool from whatever exists on index
  function getFilmPool(){
    if (Array.isArray(window.FILMS_DATA) && window.FILMS_DATA.length) return window.FILMS_DATA;
    if (window.FILM_BY_TITLE && typeof window.FILM_BY_TITLE === 'object'){
      return Object.values(window.FILM_BY_TITLE);
    }
    if (Array.isArray(window.FILMS) && window.FILMS.length) return window.FILMS;
    return [];
  }

  function mapById(pool){
    var m = Object.create(null);
    pool.forEach(function(f){
      if (!f) return;
      var id = f.id || (f.title ? slug(f.title) : null);
      if (id) m[id] = f;
    });
    return m;
  }

  // UI elements
  var ov   = null, stage=null, img=null, vid=null, logo=null, cap=null, titleEl=null, textEl=null;
  var left=null, right=null, closeBtn=null;

  // State
  var filmsC = []; // current credits order
  var idx = 0;
  var playingVideo = false;

  function el(id){ return document.getElementById(id); }

  function ensureEls(){
    if (ov) return;
    ov = el('creditsOverlay');
    stage = el('creditsStage');
    img = el('creditsImage');
    vid = el('creditsVideo');
    logo = el('creditsLogo');
    cap = el('creditsCaption');
    titleEl = el('creditsTitle');
    textEl = el('creditsText');
    left = el('arrowLeftC');
    right = el('arrowRightC');
    closeBtn = el('creditsClose');

    if (left) left.addEventListener('click', prev, {passive:true});
    if (right) right.addEventListener('click', next, {passive:true});
    if (closeBtn) closeBtn.addEventListener('click', hide, {passive:true});
  }

  function stopVideo(){
    try { vid.pause(); } catch(_){}
    vid.removeAttribute('src');
    vid.style.display = 'none';
    playingVideo = false;
  }

  function showImage(src){
    stopVideo();
    img.style.display = 'block';
    img.src = src || '';
  }

  function showVideo(src){
    img.style.display = 'none';
    if (src){
      try { vid.src = src; vid.style.display ='block'; vid.play().catch(function(){}); playingVideo = true; } catch(_){}
    } else {
      stopVideo();
    }
  }

  function goTo(i){
    if (!filmsC || !filmsC.length) return;
    idx = Math.max(0, Math.min(i, filmsC.length-1));
    var f = filmsC[idx] || {};
    var loc = (f.location || {});
    titleEl.textContent = f.title || '';
    textEl.textContent = f.short || f.main || '';
    logo.src = f.logo || '';
    logo.alt = (f.title||'') + ' logo';
    cap.textContent = loc.name || '';
    if (loc.video){ showVideo(loc.video); }
    else { showImage(loc.image || ''); }
  }

  function prev(){ if (!filmsC.length) return; goTo(idx<=0? filmsC.length-1 : idx-1); }
  function next(){ if (!filmsC.length) return; goTo(idx>=filmsC.length-1? 0 : idx+1); }

  function show(){
    ensureEls();
    ov.classList.add('show');
    goTo(0);
  }

  function hide(){
    stopVideo();
    ov.classList.remove('show');
  }

  // Build order from input ids (array of slugs/ids)
  function buildOrderFromIds(ids){
    var pool = getFilmPool();
    var byId = mapById(pool);
    return ids.map(function(id){ return byId[id]; }).filter(Boolean);
  }

  // Public API
  window.launchCredits = function(ids){
    try{
      ensureEls();
      if (Array.isArray(ids) && ids.length){
        filmsC = buildOrderFromIds(ids);
      } else {
        // Try URL ?ids= or localStorage 'quizOrder'
        var idsParam = q('ids');
        if (idsParam){
          var decoded = decodeURIComponent(idsParam);
          var list = decoded.split(/[\s,]+/).map(function(s){return s.trim();}).filter(Boolean);
          filmsC = buildOrderFromIds(list);
        } else {
          try{
            var qo = JSON.parse(localStorage.getItem('quizOrder')||'[]');
            filmsC = buildOrderFromIds(qo);
          }catch(_){}
        }
      }
      if (!filmsC || !filmsC.length){
        // Fallback: use first 10 from pool
        var pool = getFilmPool();
        filmsC = pool.slice(0, 10);
      }
      show();
    }catch(e){ console.warn('[credits overlay] launch failed', e); }
  };

  // Auto-launch if URL has &autocredits=1
  (function(){
    var ac = q('autocredits');
    var idsParam = q('ids');
    if (ac === '1' || (idsParam && idsParam.length)){
      setTimeout(function(){ window.launchCredits(); }, 0);
    }
  })();

// --- Quiz integration shims: accept titles/ids and launch credits ---
(function(){
  function slug(s){
    return String(s||'').toLowerCase().replace(/\bthe\b/g,'').replace(/[^a-z0-9]+/g,'-').replace(/^-+|-+$/g,'');
  }
  function filmPool(){
    if (Array.isArray(window.FILMS_DATA) && window.FILMS_DATA.length) return window.FILMS_DATA;
    if (window.FILM_BY_TITLE && typeof window.FILM_BY_TITLE === 'object') return Object.values(window.FILM_BY_TITLE);
    if (Array.isArray(window.FILMS) && window.FILMS.length) return window.FILMS;
    return [];
  }
  function buildMaps(){
    var pool = filmPool();
    var byId = Object.create(null);
    var bySlug = Object.create(null);
    pool.forEach(function(f){
      if (!f) return;
      var id = f.id || (f.title? slug(f.title) : null);
      if (id) byId[id] = f;
      if (f.title){
        bySlug[slug(f.title)] = f;
        // add an extra relaxed slug without 'the' again to be safe
        var relaxed = String(f.title).toLowerCase().replace(/\bthe\b/g,'');
        bySlug[slug(relaxed)] = f;
      }
    });
    return {byId: byId, bySlug: bySlug};
  }
  function coerceToIds(order){
    var maps = buildMaps();
    var ids = [];
    (order||[]).forEach(function(item){
      if (!item) return;
      var id = null;
      if (typeof item === 'string'){
        // try direct id
        if (maps.byId[item]) { id = item; }
        else {
          // treat as title (or near-title), map via slug
          var s = slug(item);
          var f = maps.bySlug[s];
          if (!f && s.indexOf('captain-america-winter-soldier')>=0){
            // handle missing 'the'
            f = maps.bySlug['captain-america-the-winter-soldier'];
          }
          if (f){
            id = f.id || slug(f.title);
          }
        }
      } else if (typeof item === 'object'){
        id = item.id || (item.title ? slug(item.title) : null);
      }
      if (id) ids.push(id);
    });
    return ids;
  }

  // Expose a stable function the quiz can call:
  window.__openCredits = function(order){
    try{
      var ids = Array.isArray(order) ? coerceToIds(order) : [];
      if (!ids.length){
        try {
          var qo = JSON.parse(localStorage.getItem('quizOrder')||'[]');
          ids = coerceToIds(qo);
        } catch(_){}
      }
      if (typeof window.launchCredits === 'function'){
        window.launchCredits(ids);
      } else {
        console.warn('[credits] launchCredits not available');
      }
    }catch(e){
      console.warn('openCredits failed', e);
    }
  };

  // Back-compat alias if code calls openCredits(...) instead of __openCredits(...)
  if (typeof window.openCredits !== 'function'){
    window.openCredits = window.__openCredits;
  }
})();

})();
</script>


<script>window.FILM_BY_TITLE = {"Kid From Cleveland": {"id": "kid-from-cleveland", "title": "Kid From Cleveland", "logo": "images/films/kfc.png", "location": {"name": "Cleveland Museum of Art — Medieval Court, Well Head (Italy, Verona, 1400s) • 11150 East Blvd, Cleveland, OH 44106", "image": "images/kfc-cma.png", "video": "videos/kfc-cma.mp4"}, "main": "The film features the Medieval Court’s Wishing Well inside the Cleveland Museum of Art, a popular attraction for visitors in the 1940s. The museum’s appearance reflected a civic push to highlight Cleveland as both culturally rich and sports-obsessed, a rare pairing on screen. Beyond the museum, Kid From Cleveland showcased Municipal Stadium, League Park, and other landmarks in an early attempt at a Cleveland “city film.” The production was part of a civic-booster effort, with Indians owner Bill Veeck supporting the project to promote both the team and the city.", "did_you_know": "It marked one of the first times professional athletes — Bob Feller, Satchel Paige, Lou Boudreau, Hank Greenberg — played themselves in a feature film.", "short": "The Medieval Court’s Wishing Well inside the Cleveland Museum of Art features prominently in the film.", "questions": ["Which 1949 film featured scenes inside the Cleveland Museum of Art on East Blvd?", "Which movie placed a troubled teen beneath the marble arches of the Museum’s Medieval Court?", "Which film showed Cleveland’s Museum of Art as a place of redemption for a local boy?", "Which postwar drama used the Museum at 11150 East Blvd as a symbol of culture and order?", "Name the film that mixed Indians baseball with a visit to the Museum of Art’s galleries.", "Which movie had Cleveland’s mayor and the Museum in the same civic booster frame?", "Which film staged a turning point beside the Medieval Court’s Italian well head?", "What title contrasted the Museum’s Renaissance art with Cleveland street trouble?", "Which 1949 production marketed Cleveland using set pieces inside the Museum of Art?", "Which Republic Pictures release turned the Museum into a civic stage set for reform?"]}, "The Fortune Cookie": {"id": "the-fortune-cookie", "title": "The Fortune Cookie", "logo": "images/films/fc.png", "location": {"name": "Cleveland Municipal Stadium • 1085 W. 3rd St, Cleveland, OH 44114", "image": "images/fc-browns.png", "video": "videos/fc-browns.mp4"}, "main": "Cleveland Municipal Stadium was used for game-day scenes, filmed during a real Browns–Vikings matchup in front of more than 10,000 fans who became extras. Wilder chose Cleveland because of its football culture and its ability to double as a “Middle America” cityscape for his dark comedy. Beyond the stadium, Billy Wilder’s crew also shot at Terminal Tower, the Roswell Hotel on East 20th, and Cleveland’s downtown streets.", "did_you_know": "Walter Matthau won an Academy Award for Best Supporting Actor for his role, launching his career into stardom.", "short": "Game-day scenes were filmed during a real Browns–Vikings matchup, with 10,000 fans as extras.", "questions": ["Which 1966 Billy Wilder comedy filmed at Cleveland Municipal Stadium on the lakefront?", "Which movie opened with an NFL game at the Browns’ old stadium at 1085 W. 3rd St?", "Which film starred Jack Lemmon and Walter Matthau at Municipal Stadium?", "Which film staged an injury scam during a football game at Cleveland’s stadium?", "Which comedy shows Lemmon being taken by ambulance out of Municipal Stadium?", "What movie turned the lakefront stadium into the launchpad for a courtroom caper?", "Which film used real Browns–Vikings footage spliced with shots inside the stadium?", "What Wilder film highlighted the west entrance and locker rooms of Municipal Stadium?", "Which 1966 production made Browns fans part of a con-game setting on the lakefront?", "Which film meticulously blended game film with staged stadium shots in Cleveland?"]}, "Uptight": {"id": "uptight", "title": "Uptight", "logo": "images/films/u.png", "location": {"name": "Alhambra Apartments, Wade Park • 8616 Wade Park Ave, Cleveland, OH 44106", "image": "images/u-alhambra-apt.png", "video": "videos/u-alhambra-apt.mp4"}, "main": "The Alhambra Apartments in Wade Park served as a central backdrop, representing Cleveland’s working-class Black neighborhoods during the civil rights era. The film captured real Cleveland streets in the days immediately after Martin Luther King Jr.’s assassination, blending fiction with the city’s charged atmosphere. Beyond the Alhambra, key sequences were shot near the Cultural Gardens and downtown rail yards, grounding the story in Cleveland’s geography. Director Jules Dassin chose Cleveland for its stark industrial landscape, shooting around steel mills, housing projects, and the Flats to mirror urban unrest.", "did_you_know": "The film was co-written by activist Ruby Dee, who also starred in it, bringing authenticity to its portrayal of racial politics. The FBI reportedly monitored filming in Cleveland and embedded agents on set, worried the movie might stir unrest.", "short": "The Alhambra Apartments anchored scenes reflecting Cleveland’s working-class Black neighborhoods.", "questions": ["Which 1968 film shot key scenes at Cleveland’s Alhambra Apartments on Wade Park Avenue?", "What movie retold The Informer in Cleveland’s Hough neighborhood around Wade Park?", "Which film featured revolutionary meetings in an apartment block at 8616 Wade Park Ave?", "Which movie linked the Alhambra Apartments to the Black liberation struggle in Cleveland?", "Which film used the architecture of Wade Park to emphasize urban tension and betrayal?", "What 1968 drama shot at Alhambra symbolized a movement fracturing from within?", "Which film was both a Hollywood production and a Cleveland street-level document of unrest?", "Which movie intercut Alhambra interiors with tense exteriors in the Hough area?", "What film dramatized Black Power politics using Cleveland’s Wade Park built environment?", "Which Jules Dassin film staged its climax in and around the Alhambra Apartments?"]}, "The Deer Hunter": {"id": "the-deer-hunter", "title": "The Deer Hunter", "logo": "images/films/dh.png", "location": {"name": "Lemko Hall • 2337 W. 14th St, Cleveland, OH 44113", "image": "images/dh-lemko.png", "video": "videos/dh-lemko.mp4"}, "main": "The film’s famous wedding reception sequence was filmed inside Lemko Hall, a Tremont social club tied to the neighborhood’s Eastern European community. Just across the street, St. Theodosius Russian Orthodox Cathedral was used for the wedding ceremony, its onion domes now a Tremont landmark. Local residents were cast as extras in both Lemko Hall and St. Theodosius scenes, adding authentic detail to the wedding festivities.", "did_you_know": "The wedding sequence at Lemko Hall lasted nearly 30 minutes on screen and took weeks to film.", "short": "The wedding reception was filmed inside Lemko Hall, with the ceremony at St. Theodosius Cathedral.", "questions": ["Which Vietnam epic begins with a wedding at Lemko Hall on West 14th Street?", "Before the steel mills and the war, the movie opened with a dance in Tremont—what film?", "Which film’s opening wedding reception at Lemko Hall lasts nearly an hour onscreen?", "Which movie juxtaposed Orthodox ritual at Lemko Hall with the chaos of combat later?", "Which Oscar winner cast Tremont’s Lemko Hall as home before Vietnam tears it apart?", "Which title anchored its portrait of friendship in a Lemko Hall celebration?", "Which 1978 classic treated Cleveland’s immigrant communities as its emotional core at Lemko Hall?", "Which film made Lemko Hall one of cinema’s most famous wedding venues?", "Which film begins in Tremont and ends in a silence of Russian roulette abroad?", "Which movie binds the memory of Lemko Hall to loss, ritual, and return?"]}, "Stranger Than Paradise": {"id": "stranger-than-paradise", "title": "Stranger Than Paradise", "logo": "images/films/stp.png", "location": {"name": "Greyhound Bus Station • 1465 Chester Ave, Cleveland, OH 44114", "image": "images/stp-greyhoundstation.png", "video": "videos/stp-greyhoundstation.mp4"}, "main": "The Greyhound Bus Station on Chester Avenue serves as the Cleveland stopover in the film, portraying the city as a desolate waypoint between New York and Florida. Director Jim Jarmusch shot the “One Year Later” segment on location in Cleveland, capturing real winter streets and industrial zones to emphasize isolation. In fact, the Cleveland portion was filmed mid-winter—one day they even attempted a shot by Lake Erie, but a sudden snow squall swept in, creating a near-whiteout effect on set.", "did_you_know": "The film won the Camera d’Or at the Cannes Film Festival, launching Jim Jarmusch’s career internationally. Jarmusch, who grew up just outside Akron, returned to Northeast Ohio to shoot the Cleveland section of the film.", "short": "The Greyhound Bus Station served as the Cleveland stopover, portraying the city as a bleak waypoint.", "questions": ["Which 1984 indie turned Cleveland’s Greyhound Bus Station on Chester Ave into a deadpan backdrop?", "Jim Jarmusch’s early feature shot snowbound scenes near the bus terminal—what film?", "Which film showed arrivals and departures at the Chester Avenue Greyhound sign?", "Which minimalist movie found bleak comedy in long takes at the downtown bus station?", "Which indie frames Cleveland’s terminal as a waystation to nowhere in particular?", "Which film uses the bus station’s neon and concrete to underline its flat affect?", "Which title pairs a Hungarian cousin with Cleveland’s wintry bus station tableau?", "Which film’s Cleveland segment drifts from the terminal toward Lake Erie’s edge?", "Which black-and-white indie makes the bus station feel absurd yet familiar?", "Which movie proves almost nothing happening at a bus terminal can still be fascinating?"]}, "Light of Day": {"id": "light-of-day", "title": "Light of Day", "logo": "images/films/lod.png", "location": {"name": "Euclid Tavern • 11629 Euclid Ave, Cleveland, OH 44106", "image": "images/lod-euclid-tavern.png", "video": "videos/lod-euclid-tavern.mp4"}, "main": "The Euclid Tavern served as the key performance venue for Joan Jett and Michael J. Fox’s band, filmed live on the club’s small stage. Director Paul Schrader leaned into Cleveland’s rock-and-roll identity, filming at working-class homes, factories, and bars alongside the Euclid Tavern. The production captured the gritty atmosphere of the University Circle neighborhood in the 1980s, before its later wave of redevelopment. Schrader originally envisioned Bruce Springsteen in the lead role, and though he declined, Springsteen contributed the film’s title song, cementing its Cleveland rock credibility.", "did_you_know": "Paul Schrader first titled the script Born in the U.S.A. and hoped Bruce Springsteen would star. Springsteen passed, used the title for his own album, and instead gave the film its anthem — the song “Light of Day.”", "short": "Joan Jett and Michael J. Fox performed on stage at the Euclid Tavern, filmed live at the club.", "questions": ["Which movie turned Cleveland’s Euclid Tavern into a rock stage for Joan Jett?", "Michael J. Fox traded skateboards for guitars at the Euclid Tavern—what film?", "Which 1987 drama shouted 'Cleveland rocks' years before the TV theme song?", "Which film cast Jett and Fox as struggling Rust Belt musicians at a University Circle bar?", "Which title shows the Tavern’s tiny stage as a working-class escape valve?", "Which movie treats Euclid Tavern as more than a bar—a scene, a grind, a hope?", "Which film frames the Tavern’s neon and brick as a rehearsal for leaving town?", "Which drama uses the tight interior of Euclid Tavern to push family tensions to the edge?", "Which Paul Schrader movie makes Cleveland’s club circuit feel like hard currency?", "Which film lets the soundboard hum of Euclid Tavern carry blue-collar dreams?"]}, "A Christmas Story": {"id": "a-christmas-story", "title": "A Christmas Story", "logo": "images/films/acs.png", "location": {"name": "Higbee’s Department Store, Public Square • 100 Public Square, Cleveland, OH 44113", "image": "images/acs-higbees.png", "video": "videos/acs-higbees.mp4"}, "main": "Higbee’s Department Store in Public Square hosted the iconic Santa Claus scene, including the parade and the towering holiday display windows. Downtown Public Square was decorated for the 1940s-style Christmas parade, combining Cleveland’s real holiday tradition with Hollywood staging. Higbee’s management only agreed to allow filming if the store and its employees were portrayed positively, reflecting the store’s reputation as a family-friendly landmark. The Tremont neighborhood house doubled as Ralphie’s family home, with Higbee’s interiors supplying the film’s centerpiece Christmas sequences.", "did_you_know": "The Santa slide built inside Higbee’s Department Store for the film was dismantled right after shooting — it only existed for the movie.", "short": "Ralphie’s visit to Santa was filmed at Higbee’s, with Public Square decorated for a 1940s Christmas parade.", "questions": ["Which 1983 holiday classic filmed its Santa slide at Higbee’s on Public Square?", "Which movie turned Higbee’s windows into Ralphie’s winter dreamscape downtown?", "Which film made Public Square look like a postcard of Christmas lights and snow?", "Which title has kids climbing toward Santa inside Higbee’s festive atrium?", "Which movie fused Indiana childhood with Cleveland storefronts at Higbee’s?", "Which holiday film uses the Terminal Tower skyline as a seasonal backdrop?", "Which film’s parade and storefronts orbit Higbee’s on Public Square?", "Which classic helps fuel modern tourism to Higbee’s and Tremont every December?", "Which movie’s department-store scenes are anchored at 100 Public Square?", "Which title warns 'You’ll shoot your eye out!' while Santa boots kids down the slide?"]}, "Captain America: The Winter Soldier": {"id": "captain-america-the-winter-soldier", "title": "Captain America: The Winter Soldier", "logo": "images/films/ca-ws.png", "location": {"name": "Crawford Auto-Aviation Museum (Western Reserve Historical Society) • 10825 East Blvd, Cleveland, OH 44106", "image": "images/ca-ws-caam.png", "video": "videos/ca-ws-caam.mp4"}, "main": "The Crawford Auto-Aviation Museum was transformed into the Smithsonian Captain America exhibit, where Steve Rogers reflects on his past. Filming in Cleveland lasted nearly a month, with hundreds of locals serving as extras in museum and street sequences. The Cleveland Museum of Art doubled as a modern S.H.I.E.L.D. facility, while the West Shoreway staged the high-speed Nick Fury car chase. Downtown locations such as Tower City and the Cleveland Arcade were also used, with streets redressed to resemble Washington, D.C.", "did_you_know": "Scarlett Johansson said she loved filming in Cleveland because the city’s grid and architecture made it easy to stage complex stunts.", "short": "The Crawford Museum became the Smithsonian exhibit where Steve Rogers revisits his past.", "questions": ["Which Marvel chapter filmed among vintage cars at the Crawford Auto-Aviation Museum?", "Which film staged Smithsonian-look exhibits inside WRHS’s University Circle galleries?", "Which blockbuster set Chris Evans walking past Cleveland’s classic autos as 'Brooklyn' displays?", "Which superhero movie turned WRHS exhibits into a stand-in for the Smithsonian?", "Which title used polished floors and chrome at 10825 East Blvd for period displays?", "Which film cut between museum vitrines and character flashbacks inside WRHS?", "Which Marvel entry transformed Cleveland’s auto-aviation collection into national myth?", "Which movie reframed local car history as a hero’s museum memory trail?", "Which blockbuster made University Circle look like Washington, D.C. for a day?", "Which film’s museum sequence is actually Cleveland’s WRHS Crawford galleries?"]}, "Air Force One": {"id": "air-force-one", "title": "Air Force One", "logo": "images/films/af1.png", "location": {"name": "Severance Hall, University Circle • 11001 Euclid Ave, Cleveland, OH 44106", "image": "images/af1-severance.png", "video": "videos/af1-severance.mp4"}, "main": "Severance Hall in University Circle doubled as the exterior of the Moscow government palace during the opening reception. Cleveland’s mix of classical and institutional architecture allowed it to double for both Moscow and Washington in the same production. The Cuyahoga County Courthouse provided interiors for the palace, with its ornate marble halls standing in for Russia. Case Western Reserve University locations were used to portray the White House corridors later in the film.", "did_you_know": "Air Force One was one of the highest-grossing films of 1997, cementing Harrison Ford’s late ’90s action-hero status.", "short": "Severance Hall doubled as Moscow’s government palace in the opening reception scene.", "questions": ["Which 1997 thriller disguised Severance Hall’s interiors as Moscow spaces?", "Which movie turned an orchestra hall at 11001 Euclid Ave into Kremlin décor?", "Which title staged intrigue beneath Severance Hall’s elegant ceilings?", "Which film pivots from presidential heroics to Cleveland’s music palace interiors?", "Which blockbuster used University Circle architecture to sell international stakes?", "Which film’s Cleveland shoot swapped violins for villains inside Severance Hall?", "Which action classic stitched shots of Severance into a global chase?", "Which movie made Cleveland’s orchestra home play double as foreign government halls?", "Which title set a covert meeting amid Severance Hall’s marble and wood?", "Which film proves a concert hall can moonlight as a spy set in Cleveland?"]}, "Welcome to Collinwood": {"id": "welcome-to-collinwood", "title": "Welcome to Collinwood", "logo": "images/films/w2c.png", "location": {"name": "Luce Theater (formerly Olympia Theatre) • 3353 E. 55th St, Cleveland, OH 44127", "image": "images/w2c-luce.png", "video": "videos/w2c-luce.mp4"}, "main": "The Luce Theater, once the Olympia Theatre, served as a central backdrop in the film, anchoring the small-time heist in Cleveland’s east side. Much of the film was shot in the Collinwood neighborhood, using real storefronts, alleys, and side streets to ground the story. The production highlighted Collinwood’s sense of community and grit, presenting a slice of Cleveland rarely seen on screen. The Russo brothers drew heavily from their Cleveland roots, choosing recognizable but worn-down local landmarks to capture the neighborhood’s character.", "did_you_know": "Though set in Cleveland, the story was a remake of an Italian caper film, Big Deal on Madonna Street.", "short": "The Luce Theater (formerly Olympia) was used as a central backdrop for the heist story.", "questions": ["Which 2002 caper parks its crooks by the Luce Theater on East 55th Street?", "Which movie makes the former Olympia Theatre a backdrop for a bungled 'Bellini'?", "Which Cleveland heist comedy looks to the Luce marquee for neighborhood flavor?", "Which title treats 3353 E. 55th St as a stage for blue-collar scheming?", "Which film sets small-time plans against a once-grand neighborhood theater?", "Which comedy leans on the Luce/Olympia façade for a shabby-chic look?", "Which movie makes a theatre-turned-venue part of Collinwood’s texture?", "Which title uses the Luce block’s brick and steel as a character of its own?", "Which film locates dreamers under a fading marquee on the near East Side?", "Which caper keeps returning to the Luce/Olympia corner as the plan unravels?"]}, "The Avengers": {"id": "the-avengers", "title": "The Avengers", "logo": "images/films/av.png", "location": {"name": "Public Square — Terminal Tower • 50 Public Square, Cleveland, OH 44113", "image": "images/av-psq.png", "video": "videos/av-psq.mp4"}, "main": "Public Square and Terminal Tower doubled as Stuttgart, Germany in the scene where Loki confronts a plaza full of civilians. Cleveland’s architecture and streetscapes allowed Marvel to capture both European grandeur and New York chaos without leaving Ohio. The gala sequence connected to this scene was filmed at Severance Hall, with its classical interiors standing in for a German opera house. Later, Cleveland’s East 9th Street was transformed into Manhattan for the climactic Battle of New York, with skyscraper facades dressed for destruction.", "did_you_know": "The “shawarma scene” after the credits was filmed last-minute in a Cleveland diner once principal photography wrapped.", "short": "Public Square stood in for Stuttgart, Germany during Loki’s confrontation scene.", "questions": ["Which Marvel epic stages a Loki confrontation on Cleveland’s Public Square?", "Which film frames the Terminal Tower while doubling the city for New York?", "Which superhero team assembles with Public Square’s skyline at their backs?", "Which title gives Public Square an alien invasion makeover with VFX?", "Which movie drops a portal battle into downtown Cleveland’s core?", "Which film puts Robert Downey Jr. near Public Square streetscapes?", "Which blockbuster hides Cleveland-in-Manhattan through Terminal Tower angles?", "Which title uses the Square’s geometry to sell a grand, open battleground?", "Which film blends practical Cleveland shots with NYC digital set extensions?", "Which 2012 movie makes 50 Public Square a nexus for a superhero standoff?"]}, "Judas and the Black Messiah": {"id": "judas-and-the-black-messiah", "title": "Judas and the Black Messiah", "logo": "images/films/judas.png", "location": {"name": "Ohio State Reformatory • 100 Reformatory Rd, Mansfield, OH 44905", "image": "images/judas-man.png", "video": "videos/judas-man.mp4"}, "main": "The Ohio State Reformatory in Mansfield was used for prison sequences, its imposing stone architecture doubling for 1960s Chicago jails. The production used more than a dozen Northeast Ohio locations, blending Mansfield’s historic prison with Cleveland landmarks to stand in for Chicago. Filming also took place in Cleveland’s East Side churches and neighborhoods, grounding the story in authentic Midwest settings. Cleveland’s Public Auditorium hosted large rally scenes, recreating the atmosphere of Black Panther organizing meetings.", "did_you_know": "The Ohio State Reformatory had already been made famous by The Shawshank Redemption, giving it a second life in film history here.", "short": "The Mansfield Reformatory doubled as a 1960s Chicago jail in the prison scenes.", "questions": ["Which 2021 film used the Ohio State Reformatory in Mansfield for prison scenes?", "Which film about Fred Hampton staged interrogation corridors at 100 Reformatory Rd?", "Which title cast the Reformatory’s cellblocks as a stand-in for Illinois facilities?", "Which movie cuts from Chicago activism to Ohio’s Reformatory interiors?", "Which film’s Cleveland-region shoot included Mansfield’s iconic cell tiers?", "Which title uses the Reformatory’s ironwork to heighten surveillance tension?", "Which Oscar-winning story funnels an informant through Ohio prison hallways?", "Which film places LaKeith Stanfield within Mansfield’s echoing catwalks?", "Which title uses midwestern carceral architecture to ground a national story?", "Which movie folds the Reformatory’s gothic mass into a tale of betrayal?"]}, "Superman (2025)": {"id": "superman-2025", "title": "Superman (2025)", "logo": "images/films/sm.png", "location": {"name": "The Arcade Cleveland • 401 Euclid Ave, Cleveland, OH 44115", "image": "images/sm-arcade.png", "video": "videos/sm-arcade.mp4"}, "main": "The Arcade’s glass-roofed atrium was transformed into part of Metropolis, with its ironwork and skylights providing a grand civic backdrop. Choosing The Arcade tied the production back to Superman’s origins, as creators Jerry Siegel and Joe Shuster grew up in Cleveland’s Glenville neighborhood. Downtown Cleveland, including Public Square, was dressed with Metropolis taxis, Daily Planet newspaper boxes, and extras in business attire. Other Cleveland locations were used to represent Metropolis streets, blending the city’s late-19th-century architecture with superhero spectacle.", "did_you_know": "Local extras reported they weren’t told they were in a Superman movie — the call sheets used fake project names to keep the shoot secret.", "short": "The Arcade’s glass atrium was transformed into Metropolis, echoing Superman’s Cleveland roots.", "questions": ["Which upcoming reboot filmed scenes inside Cleveland’s Gilded Age Arcade?", "Which film places Clark Kent beneath the Arcade’s glass-and-iron atrium on Euclid Ave?", "Which title stages Metropolis vibes in the Arcade at 401 Euclid Avenue?", "Which movie frames sweeping shots down the Arcade’s multi-level balconies?", "Which production uses the Arcade’s ornate railings for a dramatic reveal?", "Which 2025 film turns a Cleveland landmark into Metropolis ambience?", "Which title pairs the Arcade’s vintage storefronts with a modern superhero?", "Which movie sets a key walk-and-talk along the Arcade’s central spine?", "Which production treats the Arcade’s atrium as a symbolic city of tomorrow?", "Which film showcases Cleveland’s architecture as Metropolis in disguise?"]}, "Sign of Aquarius": {"id": "sign-of-aquarius", "title": "Sign of Aquarius", "logo": "images/films/gf.png", "location": {"name": "Tower Press • 1900 Superior Ave, Cleveland, OH 44114", "image": "images/soa-towerpress.png", "video": "videos/soa-towerpress.mp4"}, "main": "The Tower Press Building, then a worn industrial structure, appeared in Sign of Aquarius as part of Cleveland’s counterculture backdrop and urban aesthetic. Filmmakers shot in downtown streets and loft spaces, capturing the city’s youth culture and protest energy in the wake of the 1960s. The film reflected Cleveland’s underground music and hippie scenes, situating the Tower Press Building at the heart of its story.", "did_you_know": "The soundtrack featured Cleveland’s underground composers Al Zbacnic and Tom Baker, embedding local hippie-rock culture.", "short": "The Tower Press Building appeared in the film as part of Cleveland’s counterculture backdrop.", "questions": ["Which 1970 counterculture film staged scenes at Tower Press in Cleveland?", "Which film embedded Cleveland’s hippie community within its industrial lofts?", "Which movie juxtaposed counterculture energy with Tower Press’s brick façade?", "Which youth-era film turned Tower Press into a hub of protest and art?", "Which movie framed 1900 Superior Ave as an epicenter of unrest?", "Which Cleveland film used Tower Press interiors for underground music?", "Which production tied Tower Press to Cleveland’s countercultural archive?", "Which film connected youth protest to Tower Press architecture?", "Which title placed Cleveland’s Tower Press at the heart of 1970 upheaval?", "Which film set an experimental counterculture story at Tower Press?"]}, "Spider-Man 3": {"id": "spider-man-3", "title": "Spider-Man 3", "logo": "images/films/sm3.png", "location": {"name": "Euclid Avenue, Halle Building • 1228 Euclid Ave, Cleveland, OH 44115", "image": "images/sm3-euclid.png", "video": "videos/sm3-euclid.mp4"}, "main": "The armored truck chase was filmed along Euclid Avenue at East 13th Street, with storefronts and facades redressed as Midtown Manhattan. The Halle Building and surrounding blocks were central to the sequence, providing a canyon-like backdrop for Spider-Man’s pursuit. Over 250 crew members resurfaced Euclid Avenue to handle the weight of stunt vehicles and ensure safety during the explosive sequence. Cleveland’s broad downtown avenues allowed Raimi’s team to stage New York-scale stunts that would have been impractical to shoot in Manhattan itself.", "did_you_know": "Director Sam Raimi chose Cleveland because its long, straight avenues better matched comic-book New York than the real Manhattan.", "short": "The armored truck chase was filmed on Euclid Avenue, with the Halle Building standing in as Manhattan.", "questions": ["Which Spider-Man film staged its armored truck chase along Euclid Avenue?", "Which movie turned the Halle Building into a stand-in for Manhattan?", "Which title features Tobey Maguire’s Spider-Man fighting on Euclid Ave?", "Which movie uses Cleveland streets as a double for New York during a chase?", "Which 2007 superhero film turned downtown Cleveland into Manhattan?", "Which film showcases the Halle Building’s façade in a chase sequence?", "Which Spider-Man sequel transformed Cleveland into an action set?", "Which movie used Euclid Avenue’s length for a cinematic chase?", "Which blockbuster gave Cleveland’s Euclid Ave a starring role in Marvel action?", "Which film shows armored trucks colliding amid Cleveland’s Halle Building?"]}};

function startSequence() {
    // Reset content classes
    logo.className = 'logo';
    text.className = 'text';

    // Timings
    var T_DELAY_LOGO = 2000;   // wait before fading in logo
    var T_DELAY_TEXT = 2000;   // wait after logo before fading in text

    // Start/limit video playback
    var film = films[i % films.length];
    setVideo((film.location && film.location.video) ? film.location.video : '');
    videoTimer = schedule(function(){ stopVideo(); }, VIDEO_PLAY);

    // Immediately start video fade-in
    bgvid.className = 'bgvid';
    void bgvid.offsetWidth;
    bgvid.classList.add('vid-fadein');

    // 1) Fade in logo after delay
    schedule(function(){
      void logo.offsetWidth;
      logo.classList.add('fadein');
    }, T_DELAY_LOGO);

    // 2) Fade in text after additional delay
    schedule(function(){
      text.classList.add('fadein-text');
    }, T_DELAY_LOGO + T_FADE + T_DELAY_TEXT);

    // 3) Fade out all after hold from text fully visible
    schedule(function(){
      logo.classList.add('fadeout');
      text.classList.add('fadeout');
      bgvid.classList.remove('vid-fadein');
      bgvid.classList.add('vid-fadeout');

      var elapsedToFadeOut = T_DELAY_LOGO + T_FADE + T_DELAY_TEXT + T_FADE_TEXT;
      var waitRemainder = Math.max(0, VIDEO_PLAY - (elapsedToFadeOut + T_HOLD + T_FADEOUT));
      schedule(function(){ next(); }, waitRemainder);

    }, T_DELAY_LOGO + T_FADE + T_DELAY_TEXT + T_FADE_TEXT + T_HOLD + T_FADEOUT);
  }

  function goTo(index) {
    clearAllTimers();
    stopVideo();
    i = Math.max(0, Math.min(index, films.length - 1)); // clamp just in case

    var f = films[i];
    logo.src = f.logo || '';
    logo.alt = (f.title || 'film') + ' logo';
    text.textContent = f.main || '';

    startSequence();
  }

  function prev() {
    if (i <= 0) { 

  

  goTo(0); }      // replay first
    else { goTo(i - 1); }
  }
  function next() {
    var last = films.length - 1;
    if (i >= last) { goTo(0); }   // wrap to first
    else { goTo(i + 1); }
  }

  // Bind arrows
  document.getElementById('arrowLeft').addEventListener('click', prev);
  document.getElementById('arrowRight').addEventListener('click', next);

  // Kick off
  goTo(0);
}

function stopVideo() { try{bgvid.pause();}catch(e){} }

  
  function startSequence() {
    // Reset content classes
    logo.className = 'logo';
    text.className = 'text';

    // Timings
    var T_DELAY_LOGO = 2000;   // wait before fading in logo
    var T_DELAY_TEXT = 2000;   // wait after logo before fading in text

    // Start/limit video playback
    var film = films[i % films.length];
    setVideo((film.location && film.location.video) ? film.location.video : '');
    videoTimer = schedule(function(){ stopVideo(); }, VIDEO_PLAY);

    // Immediately start video fade-in
    bgvid.className = 'bgvid';
    void bgvid.offsetWidth;
    bgvid.classList.add('vid-fadein');

    // 1) Fade in logo after delay
    schedule(function(){
      void logo.offsetWidth;
      logo.classList.add('fadein');
    }, T_DELAY_LOGO);

    // 2) Fade in text after additional delay
    schedule(function(){
      text.classList.add('fadein-text');
    }, T_DELAY_LOGO + T_FADE + T_DELAY_TEXT);

    // 3) Fade out all after hold from text fully visible
    schedule(function(){
      logo.classList.add('fadeout');
      text.classList.add('fadeout');
      bgvid.classList.remove('vid-fadein');
      bgvid.classList.add('vid-fadeout');

      var elapsedToFadeOut = T_DELAY_LOGO + T_FADE + T_DELAY_TEXT + T_FADE_TEXT;
      var waitRemainder = Math.max(0, VIDEO_PLAY - (elapsedToFadeOut + T_HOLD + T_FADEOUT));
      schedule(function(){ next(); }, waitRemainder);

    }, T_DELAY_LOGO + T_FADE + T_DELAY_TEXT + T_FADE_TEXT + T_HOLD + T_FADEOUT);
  }

  function goTo(index) {
    clearAllTimers();
    stopVideo();
    i = Math.max(0, Math.min(index, films.length - 1)); // clamp just in case

    var f = films[i];
    logo.src = f.logo || '';
    logo.alt = (f.title || 'film') + ' logo';
    text.textContent = f.main || '';

    startSequence();
  }

  function prev() {
    if (i <= 0) { 

  

  goTo(0); }      // replay first
    else { goTo(i - 1); }
  }
  function next() {
    var last = films.length - 1;
    if (i >= last) { goTo(0); }   // wrap to first
    else { goTo(i + 1); }
  }

  // Bind arrows
  document.getElementById('arrowLeft').addEventListener('click', prev);
  document.getElementById('arrowRight').addEventListener('click', next);

  // Kick off
  goTo(0);
}

function goTo(index) {
    clearAllTimers();
    stopVideo();
    i = Math.max(0, Math.min(index, films.length - 1)); // clamp just in case

    var f = films[i];
    logo.src = f.logo || '';
    logo.alt = (f.title || 'film') + ' logo';
    text.textContent = f.main || '';

    startSequence();
  }

  function prev() {
    if (i <= 0) { 

  

  goTo(0); }      // replay first
    else { goTo(i - 1); }
  }
  function next() {
    var last = films.length - 1;
    if (i >= last) { goTo(0); }   // wrap to first
    else { goTo(i + 1); }
  }

  // Bind arrows
  document.getElementById('arrowLeft').addEventListener('click', prev);
  document.getElementById('arrowRight').addEventListener('click', next);

  // Kick off
  goTo(0);
}

function next() {
    var last = films.length - 1;
    if (i >= last) { goTo(0); }   // wrap to first
    else { goTo(i + 1); }
  }

  // Bind arrows
  document.getElementById('arrowLeft').addEventListener('click', prev);
  document.getElementById('arrowRight').addEventListener('click', next);

  // Kick off
  goTo(0);
}

function prev() {
    if (i <= 0) { 

  

  goTo(0); }      // replay first
    else { goTo(i - 1); }
  }
  function next() {
    var last = films.length - 1;
    if (i >= last) { goTo(0); }   // wrap to first
    else { goTo(i + 1); }
  }

  // Bind arrows
  document.getElementById('arrowLeft').addEventListener('click', prev);
  document.getElementById('arrowRight').addEventListener('click', next);

  // Kick off
  goTo(0);
}



window.__openCredits = function(orderTitles){
  try{
    // Hide any quiz UI that could overlay the credits
    (function hideQuizUIForCredits(){
      var selectors = [
        '#resultOverlay', '.result-overlay', '.two-column-overlay', '.two-col-overlay',
        '#theatreModal', '.theatre-modal', '.modal', '#modal', '.popup', '#popup',
        '#quizHUD', '#hud', '.hud', '.toolbox', '.draggable', '.draggable-list',
        '.legend', '#legend', '.leaflet-control-container'
      ];
      try{
        selectors.forEach(function(sel){
          var nodes = document.querySelectorAll(sel);
          for (var i=0;i<nodes.length;i++){
            var n = nodes[i];
            if (!n) continue;
            if (typeof n.dataset !== 'undefined') n.dataset._prevDisplay = n.style.display || '';
            n.style.display = 'none';
          }
        });
      }catch(e){}
      document.body.classList.add('credits-running');
    })();

    // 1s fade-in delay
    setTimeout(function(){
      var list = [];
      if (orderTitles && orderTitles.length && window.FILM_BY_TITLE){
        for (var i=0;i<orderTitles.length;i++){
          var t = String(orderTitles[i]||'').trim();
          var f = window.FILM_BY_TITLE[t];
          if (f){ list.push(f); }
        }
      }
      if (!list.length && Array.isArray(window.FILMS)) list = window.FILMS.slice(0,10);

      // Build or reveal the credits stage
      var stage = document.getElementById('creditsStage');
      if(!stage){
        stage = document.createElement('div');
        stage.id = 'creditsStage';
        stage.className = 'stage';
        stage.style.cssText="position:fixed;inset:0;z-index:100000;pointer-events:auto;background:#000;display:block;";
        stage.innerHTML = ''+
          '<video id="bgvid" playsinline preload="auto" style="position:absolute;inset:0;width:100%;height:100%;object-fit:cover;"></video>'+
          '<div class="wrap left" style="position:absolute;left:4%;bottom:8%;right:4%;">'+
            '<img id="logo" class="logo" alt="" style="max-height:18vh;display:block;margin:0 0 .6em 0;filter:drop-shadow(0 6px 18px #000a);opacity:0;transition:opacity 1s ease;"/>'+
            '<div id="text" class="text" style="color:#f2eee8;text-shadow:0 2px 8px #000;opacity:0;transition:opacity .8s ease;"></div>'+
          '</div>'+
          '<button id="creditsClose" style="position:absolute;right:16px;bottom:16px;padding:.5rem .8rem;border:0;border-radius:8px;background:#111;color:#eee;opacity:.85;">Close</button>';
        document.body.appendChild(stage);
        // Close returns UI
        var cc = document.getElementById('creditsClose');
        if (cc){
          cc.addEventListener('click', function(){
            stage.style.display = 'none';
            // restore hidden nodes
            var selectors = [
              '#resultOverlay', '.result-overlay', '.two-column-overlay', '.two-col-overlay',
              '#theatreModal', '.theatre-modal', '.modal', '#modal', '.popup', '#popup',
              '#quizHUD', '#hud', '.hud', '.toolbox', '.draggable', '.draggable-list',
              '.legend', '#legend', '.leaflet-control-container'
            ];
            try{
              selectors.forEach(function(sel){
                var nodes = document.querySelectorAll(sel);
                for (var i=0;i<nodes.length;i++){
                  var n = nodes[i];
                  if (!n) continue;
                  n.style.display = (n.dataset && n.dataset._prevDisplay) ? n.dataset._prevDisplay : '';
                }
              });
            }catch(e){}
            document.body.classList.remove('credits-running');
          });
        }
      }else{
        stage.style.display = 'block';
      }

      // Hand off to your credits logic
      window.films = list; // expected by startSequence()
      if (typeof startSequence === 'function'){ startSequence(); }
      else { console.error('startSequence() not found'); }

    }, 1000);
  }catch(err){ console.error('openCredits bridge failed:', err); }
};


</script>

<script>
(function(){
  // === Stage 2M: Fallback title→basename map ===
  // basename => 'images/<basename>.png' and 'videos/<basename>.mp4'
  // logo key => basename.split('-')[0] (e.g., 'ca-ws' -> 'ca')
  var TITLE2BASE = {
    "stranger than paradise": "stp-greyhoundstation",
    "welcome to collinwood": "w2c-luce",
    "air force one": "af1-severance",                   // <-- update if different
    "judas and the black messiah": "judas-man",
    "light of day": "lod-euclid-tavern",
    "the deer hunter": "dh-lemko",
    "the avengers": "av-psq",
    "kid from cleveland": "kfc-cma",
    "captain america: winter soldier": "ca-ws-caam",
    "captain america: the winter soldier": "ca-ws-caam",
    "a christmas story": "acs-higbees",
    "the fortune cookie": "fc-browns",
    "sign of aquarius": "soa-towerpress",
    "uptight": "u-alhambra-apt",
    "superman (2025)": "sm-arcade"                // or "sm3-euclid" — update to match
  };

  function ensureRGDom(){
    var root = document.getElementById('rg-overlay');
    if (!root){
      var css = document.createElement('style');
      css.textContent = '#rg-overlay{position:fixed;inset:0;z-index:2147483647;display:none;background:rgba(0,0,0,.88);backdrop-filter:blur(2px)}'
        + '#rg-inner{position:absolute;inset:0;display:grid;grid-template-rows:auto 1fr auto;padding:clamp(12px,2.4vw,24px)}'
        + '#rg-header{color:#fff;text-align:center;margin-bottom:8px}'
        + '#rg-title{font-size:clamp(20px,4.2vw,28px);font-weight:800;letter-spacing:.02em;text-shadow:0 2px 0 #000}'
        + '#rg-sub{margin-top:6px;font-size:clamp(14px,2.8vw,16px);opacity:.85}'
        + '#rg-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:12px;padding:16px 0;align-content:start}'
        + '@media (max-width:920px){#rg-grid{grid-template-columns:repeat(4,1fr)}}'
        + '@media (max-width:640px){#rg-grid{grid-template-columns:repeat(3,1fr)}}'
        + '@media (max-width:460px){#rg-grid{grid-template-columns:repeat(2,1fr)}}'
        + '.rg-card{position:relative;background:#111;border:1px solid #ffffff22;border-radius:12px;overflow:hidden;box-shadow:0 12px 36px rgba(0,0,0,.55);transform:translateY(8px);opacity:0;animation:rgIn .5s ease forwards;cursor:pointer;outline:none}'
        + '@keyframes rgIn{to{opacity:1;transform:none}}'
        + '.rg-thumb{position:relative;width:100%;height:0;padding-top:66.666%;background:#222 center/cover no-repeat;display:grid;place-items:center;color:#aaa;font-size:12px;overflow:hidden}'
        + '.rg-thumb::after{content:"▶";position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:3em;height:3em;min-width:48px;min-height:48px;border-radius:50%;display:grid;place-items:center;background:rgba(0,0,0,0.55);color:#fff;font-size:1.1rem;letter-spacing:-0.05em;transition:opacity .25s ease;opacity:0;box-shadow:0 6px 18px rgba(0,0,0,.45)}'
        + '.rg-card:hover .rg-thumb::after,.rg-card:focus-visible .rg-thumb::after{opacity:1}'
        + '.rg-card:focus-visible{outline:2px solid #f5d75c;outline-offset:2px}'
        + '.rg-logo{position:absolute;inset:8px 8px auto 8px;height:28px;max-width:calc(100% - 16px);object-fit:contain;mix-blend-mode:screen;filter:drop-shadow(0 2px 6px rgba(0,0,0,.6));pointer-events:none}'
        + '.rg-meta{display:grid;grid-template-columns:1fr auto;gap:8px;padding:10px;color:#fff;font-size:12px}'
        + '.rg-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;opacity:.95}'
        + '.rg-chip{align-self:start;padding:3px 8px;border-radius:999px;font-weight:700;letter-spacing:.02em;border:1px solid #0000}'
        + '.rg-chip.ok{background:#19c37d;color:#071e11}.rg-chip.bad{background:#ff4b4b;color:#2b0508}'
        + '#rg-footer{display:flex;gap:10px;justify-content:center;padding-top:6px}'
        + '#rg-footer .navbtn,#rg-footer button{background:#1a1a1a;color:#fff;border:1px solid #ffffff22;border-radius:10px;padding:10px 14px;font-size:14px;cursor:pointer;box-shadow:0 12px 36px rgba(0,0,0,.55)}';
        // + '#rg-close{position:absolute;top:10px;right:10px;background:#00000088;color:#fff;border:1px solid #ffffff22;border-radius:10px;padding:8px 10px;font-size:12px;cursor:pointer}';
      document.head.appendChild(css);

      root = document.createElement('div');
      root.id = 'rg-overlay';
      root.innerHTML = '<div id="rg-inner">'
        + '<div id="rg-header"><div id="rg-title">Review Your Answers</div><div id="rg-sub"></div></div>'
        + '<div id="rg-grid" role="list"></div>'
        + '<div id="rg-footer"><img id="rg-again" src="images/ttrs.png" class="navbtn" style="cursor:pointer;width:140px;max-width:50%;height:auto;" alt="Try Again"></div>';
// + '<div id="rg-footer"><button id="rg-again" class="navbtn">Try Again</button></div>';
        // + '</div><button id="rg-close" title="Close">Close</button>';
      document.body.appendChild(root);
      root.querySelector('#rg-again').addEventListener('click', function(){ hideRG();
      if (typeof window.tryAgain === 'function') window.tryAgain(); else location.reload();});
      // root.querySelector('#rg-close').addEventListener('click', function(){ hideRG(); });
    }
    return root;
  }
  function hideRG(){
    var root = document.getElementById('rg-overlay');
    if (root) root.style.display = 'none';
    try { closeRGPlayer(); } catch(_){}
  }

  function unwrapTitle(x){
    if (typeof x === 'string') return x;
    if (!x || typeof x !== 'object') return '';
    return x.title || x.name || x.question || x.film || x.movie || '';
  }
  function getVideo(x){
    if (typeof x === 'string') return null;
    if (!x || typeof x !== 'object') return null;
    return x.video || x.src || x.path || x.clip || x.media || null;
  }
  function baseFromTitle(title){
    var key = (title||'').toLowerCase().trim();
    return TITLE2BASE[key] || null;
  }
  function logoFromBase(base){
    var prefix = (base||'').split('-')[0];
    return 'images/films/' + prefix + '.png';
  }
  function assetFromListItem(item, title){
    // Prefer the explicit fields on item
    var v = getVideo(item);
    if (typeof v === 'string'){
      var base = v.replace(/^.*\//,'').replace(/\.mp4$/,'');
      return { image: 'images/' + base + '.png', logo: logoFromBase(base), video: v };
    }
    if (item && typeof item.image === 'string'){
      var baseImg = item.image.replace(/^.*\//,'').replace(/\.png$/,'');
      return { image: item.image, logo: logoFromBase(baseImg), video: 'videos/' + baseImg + '.mp4' };
    }
    // Fall back to title map
    var base = baseFromTitle(title);
    if (base){ return { image: 'images/' + base + '.png', logo: logoFromBase(base), video: 'videos/' + base + '.mp4' }; }
    return null;
  }

  function infoForTitle(title){
    if (!title) return null;
    var raw = String(title).trim();
    if (!raw) return null;
    var byTitle = (typeof window !== 'undefined' && window.FILM_BY_TITLE && typeof window.FILM_BY_TITLE === 'object') ? window.FILM_BY_TITLE : null;
    if (byTitle && byTitle[raw]) return byTitle[raw];
    var lower = raw.toLowerCase();
    if (byTitle){
      for (var key in byTitle){
        if (!Object.prototype.hasOwnProperty.call(byTitle, key)) continue;
        if (String(key).toLowerCase() === lower) return byTitle[key];
      }
    }
    var pools = [];
    if (typeof window !== 'undefined'){ pools = [window.FILMS_DATA, window.FILMS]; }
    for (var p=0; p<pools.length; p++){
      var arr = pools[p];
      if (!Array.isArray(arr)) continue;
      for (var i=0; i<arr.length; i++){
        var entry = arr[i];
        if (entry && entry.title && String(entry.title).toLowerCase() === lower) return entry;
      }
    }
    return null;
  }

  function escapeHtml(str){
    var map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' };
    return String(str).replace(/[&<>"']/g, function(ch){ return map[ch] || ch; });
  }

  function fillParagraphs(el, text){
    if (!el) return false;
    if (!text){ el.innerHTML=''; el.style.display='none'; return false; }
    var segments = String(text).trim().split(/\n{2,}/);
    var html = segments.map(function(seg){
      var cleaned = escapeHtml(seg.trim());
      if (!cleaned) return '';
      return '<p>' + cleaned.replace(/\n/g,'<br>') + '</p>';
    }).filter(Boolean).join('');
    el.innerHTML = html || '';
    el.style.display = html ? '' : 'none';
    return !!html;
  }

  var rgPlayerRefs = null;
  var rgPlayerLastActive = null;
  var rgIntroRefs = null;

  function ensureRGPlayer(){
    if (rgPlayerRefs) return rgPlayerRefs;
    var css = document.getElementById('rg-player-style');
    if (!css){
      css = document.createElement('style');
      css.id = 'rg-player-style';
      css.textContent = ''
        + '#rg-player{position:fixed;inset:0;z-index:2147483647;display:none;align-items:center;justify-content:center;}'
        + '#rg-player.show{display:flex;}'
        + '#rg-player::before{content:"";position:absolute;inset:0;background:rgba(0,0,0,0.88);backdrop-filter:blur(2px);}'
        + '#rg-player .rg-player-dialog{position:relative;z-index:1;width:min(92vw,960px);max-height:92vh;display:flex;flex-direction:column;background:#101010;border-radius:18px;overflow:hidden;box-shadow:0 24px 80px rgba(0,0,0,0.75);}'
        + '#rg-player .rg-player-close{position:absolute;top:12px;right:12px;z-index:3;background:rgba(0,0,0,0.6);color:#fff;border:0;border-radius:999px;width:36px;height:36px;font-size:20px;cursor:pointer;display:flex;align-items:center;justify-content:center;}'
        + '#rg-player .rg-player-close:hover{background:rgba(0,0,0,0.82);}'
        + '#rg-player .rg-player-media{position:relative;background:#000;}'
        + '#rg-player video{width:100%;height:auto;max-height:58vh;background:#000;display:block;}'
        + '#rg-player .rg-player-fallback{position:absolute;inset:0;display:none;align-items:center;justify-content:center;color:#fff;background:rgba(0,0,0,0.6);font-size:1.05rem;text-align:center;padding:0 24px;}'
        + '#rg-player .rg-player-logo{position:absolute;right:16px;bottom:16px;width:clamp(80px,18vmin,160px);max-height:25%;object-fit:contain;filter:drop-shadow(0 6px 12px rgba(0,0,0,0.7));}'
        + '#rg-player .rg-player-body{padding:18px 22px 24px 22px;display:grid;gap:12px;}'
        + '#rg-player #rg-player-title{margin:0;font-size:clamp(20px,3.6vmin,28px);color:#f5d75c;font-family:"StandingRoomOnlyNF",Impact,"League Gothic",system-ui,sans-serif;letter-spacing:.02em;}'
        + '#rg-player .rg-player-summary{margin:0;color:#eae5dd;font-size:clamp(14px,2.6vmin,16px);line-height:1.5;}'
        + '#rg-player .rg-player-toggle{justify-self:start;background:#1f1f1f;color:#f5d75c;border:1px solid #f5d75c55;border-radius:999px;padding:8px 16px;font-size:0.92rem;letter-spacing:.02em;cursor:pointer;transition:background .2s ease,color .2s ease;}'
        + '#rg-player .rg-player-toggle:hover{background:#2b2b2b;color:#ffe48a;}'
        + '#rg-player .rg-player-details{color:#f3f0e8;font-size:0.95rem;line-height:1.55;background:#161616;border-radius:12px;padding:14px 16px;max-height:28vh;overflow:auto;}'
        + '#rg-player .rg-player-details p{margin:0 0 0.85em 0;}'
        + '#rg-player .rg-player-details p:last-child{margin-bottom:0;}'
        + '#rg-player [hidden]{display:none !important;}'
        + '#rg-player .rg-player-didyouknow{margin-top:0.75em;color:#f0d99c;font-style:italic;}'
        + 'body.rg-player-open{overflow:hidden;}';
      document.head.appendChild(css);
    }

    var root = document.createElement('div');
    root.id = 'rg-player';
    root.setAttribute('aria-hidden','true');
    root.innerHTML = ''
      + '<div class="rg-player-dialog" role="dialog" aria-modal="true" aria-labelledby="rg-player-title">'
      + '  <button type="button" class="rg-player-close" data-rg-close aria-label="Close clip">×</button>'
      + '  <div class="rg-player-media">'
      + '    <video id="rg-player-video" playsinline controls></video>'
      + '    <div class="rg-player-fallback">Clip unavailable for this location.</div>'
      + '    <img class="rg-player-logo" alt="" />'
      + '  </div>'
      + '  <div class="rg-player-body">'
      + '    <h3 id="rg-player-title"></h3>'
      + '    <p class="rg-player-summary"></p>'
      + '    <button type="button" class="rg-player-toggle" aria-expanded="false">Show Details</button>'
      + '    <div class="rg-player-details" hidden>'
      + '      <div class="rg-player-main"></div>'
      + '      <div class="rg-player-didyouknow"></div>'
      + '    </div>'
      + '  </div>'
      + '</div>';
    document.body.appendChild(root);

    var video = root.querySelector('#rg-player-video');
    var fallback = root.querySelector('.rg-player-fallback');
    var logo = root.querySelector('.rg-player-logo');
    var titleEl = root.querySelector('#rg-player-title');
    var summary = root.querySelector('.rg-player-summary');
    var toggle = root.querySelector('.rg-player-toggle');
    var details = root.querySelector('.rg-player-details');
    var main = root.querySelector('.rg-player-main');
    var dyk = root.querySelector('.rg-player-didyouknow');
    var closeBtn = root.querySelector('.rg-player-close');

    if (toggle){
      toggle.addEventListener('click', function(){
        var expanded = toggle.getAttribute('aria-expanded') === 'true';
        var next = !expanded;
        toggle.setAttribute('aria-expanded', next ? 'true' : 'false');
        toggle.textContent = next ? 'Hide Details' : 'Show Details';
        if (details) details.hidden = !next;
      });
    }

    if (closeBtn){
      closeBtn.addEventListener('click', function(ev){
        ev.preventDefault();
        closeRGPlayer();
      });
    }

    root.addEventListener('click', function(ev){
      if (ev.target === root || (ev.target && ev.target.hasAttribute && ev.target.hasAttribute('data-rg-close'))){
        ev.preventDefault();
        closeRGPlayer();
      }
    });

    document.addEventListener('keydown', function(ev){
      if (ev.key === 'Escape' && root.classList.contains('show')){
        ev.preventDefault();
        closeRGPlayer();
      }
    }, {passive:false});

    rgPlayerRefs = {
      root: root,
      video: video,
      fallback: fallback,
      logo: logo,
      title: titleEl,
      summary: summary,
      toggle: toggle,
      details: details,
      main: main,
      dyk: dyk,
      close: closeBtn
    };
    return rgPlayerRefs;
  }

  function closeRGPlayer(){
    if (!rgPlayerRefs) return;
    var root = rgPlayerRefs.root;
    if (root){
      root.classList.remove('show');
      root.setAttribute('aria-hidden','true');
    }
    document.body.classList.remove('rg-player-open');
    if (rgPlayerRefs.video){
      try {
        rgPlayerRefs.video.pause();
      } catch(_){}
      rgPlayerRefs.video.removeAttribute('src');
      rgPlayerRefs.video.load();
    }
    if (rgPlayerRefs.logo){
      rgPlayerRefs.logo.removeAttribute('src');
      rgPlayerRefs.logo.style.display = 'none';
    }
    if (rgPlayerRefs.fallback){
      rgPlayerRefs.fallback.style.display = 'none';
    }
    if (rgPlayerRefs.details){
      rgPlayerRefs.details.hidden = true;
    }
    if (rgPlayerRefs.toggle){
      rgPlayerRefs.toggle.setAttribute('aria-expanded','false');
      rgPlayerRefs.toggle.textContent = 'Show Details';
    }
    if (rgPlayerLastActive && typeof rgPlayerLastActive.focus === 'function'){
      try { rgPlayerLastActive.focus(); } catch(_){}
    }
    rgPlayerLastActive = null;
  }

  function ensureScoreIntro(){
    if (rgIntroRefs) return rgIntroRefs;

    var css = document.getElementById('rg-intro-style');
    if (!css){
      css = document.createElement('style');
      css.id = 'rg-intro-style';
      css.textContent = ''
        + '#rg-intro{position:fixed;inset:0;z-index:2147483646;display:none;align-items:center;justify-content:center;background:#000;opacity:0;transition:opacity .35s ease;}'
        + '#rg-intro.show{display:flex;opacity:1;}'
        + '#rg-intro.fade{opacity:0;pointer-events:none;}'
        + '#rg-intro .rg-intro-stage{position:relative;width:min(92vw,720px);max-height:92vh;display:grid;place-items:center;}'
        + '#rg-intro video{width:100%;height:auto;max-height:92vh;border-radius:18px;background:#000;box-shadow:0 28px 90px rgba(0,0,0,.7);}'
        + '#rg-intro .rg-intro-label{position:absolute;inset:auto 0 7%;display:grid;justify-items:center;gap:.35em;font-family:"StandingRoomOnlyNF",Impact,"League Gothic",system-ui,sans-serif;text-transform:uppercase;letter-spacing:.06em;color:#f5d75c;text-shadow:0 3px 12px rgba(0,0,0,.85);pointer-events:none;}'
        + '#rg-intro .rg-intro-tier{font-size:clamp(26px,5.5vmin,40px);}'
        + '#rg-intro .rg-intro-skip{font-size:clamp(14px,2.6vmin,18px);opacity:.78;}'
        + '#rg-intro [data-rg-intro-skip]{position:absolute;right:18px;top:18px;z-index:3;background:rgba(0,0,0,.65);color:#fff;border:1px solid rgba(255,255,255,.25);border-radius:999px;padding:8px 16px;font-size:0.95rem;letter-spacing:.03em;cursor:pointer;transition:background .2s ease,color .2s ease;}'
        + '#rg-intro [data-rg-intro-skip]:hover{background:rgba(0,0,0,.85);color:#ffe48a;}'
        + '#rg-intro.hide-display{display:none !important;opacity:0 !important;pointer-events:none !important;}';
      document.head.appendChild(css);
    }

    var root = document.createElement('div');
    root.id = 'rg-intro';
    root.setAttribute('aria-hidden','true');
    root.innerHTML = ''
      + '<div class="rg-intro-stage">'
      + '  <button type="button" data-rg-intro-skip>Skip</button>'
      + '  <video playsinline preload="auto"></video>'
      + '  <div class="rg-intro-label">'
      + '    <div class="rg-intro-tier"></div>'
      + '    <div class="rg-intro-skip">Tap to skip</div>'
      + '  </div>'
      + '</div>';
    document.body.appendChild(root);

    var refs = {
      root: root,
      video: root.querySelector('video'),
      tier: root.querySelector('.rg-intro-tier'),
      skipBtn: root.querySelector('[data-rg-intro-skip]')
    };

    rgIntroRefs = refs;
    return refs;
  }

  function scoreTierInfo(score){
    var s = typeof score === 'number' && isFinite(score) ? Math.max(0, Math.round(score)) : 0;
    if (s <= 0) return { key: 'ticket-taker', label: 'Ticket Taker' };
    if (s <= 2) return { key: 'popcorn', label: 'Popcorn' };
    if (s <= 4) return { key: 'stand-in', label: 'Stand-In' };
    if (s <= 6) return { key: 'props', label: 'Props Master' };
    if (s <= 8) return { key: 'star', label: 'Star' };
    if (s === 9) return { key: 'director', label: 'Director' };
    return { key: 'mogul', label: 'Mogul' };
  }

  function playScoreIntro(score){
    try{
      var refs = ensureScoreIntro();
      if (!refs || !refs.root || !refs.video) return null;

      var info = scoreTierInfo(score);
      if (!info || !info.key) return null;

      var src = 'videos/' + info.key + '.mp4';
      refs.video.pause();
      refs.video.removeAttribute('src');
      refs.video.load();

      if (refs.tier) refs.tier.textContent = info.label || '';

      var promise = new Promise(function(resolve){
        var done = false;
        var root = refs.root;

        function cleanup(){
          if (done) return;
          done = true;
          try{ refs.video.pause(); }catch(_){ }
          refs.video.removeAttribute('src');
          refs.video.load();
          root.classList.add('fade');
          root.setAttribute('aria-hidden','true');
          var finish = function(){
            root.classList.remove('show');
            root.classList.remove('fade');
            root.classList.add('hide-display');
            resolve();
          };
          setTimeout(finish, 260);
          document.removeEventListener('keydown', onKey, true);
          root.removeEventListener('click', onSkip, true);
          if (refs.skipBtn) refs.skipBtn.removeEventListener('click', onSkip, true);
          refs.video.removeEventListener('ended', onEnd);
          refs.video.removeEventListener('error', onEnd);
        }

        function onEnd(){ cleanup(); }
        function onSkip(e){ try{ e.preventDefault(); e.stopPropagation(); }catch(_){ } cleanup(); }
        function onKey(e){ if (e.key === 'Escape' || e.key === 'Enter' || e.key === ' '){ onSkip(e); } }

        root.classList.remove('hide-display');
        root.classList.remove('fade');
        root.classList.add('show');
        root.setAttribute('aria-hidden','false');

        document.addEventListener('keydown', onKey, true);
        root.addEventListener('click', onSkip, true);
        if (refs.skipBtn) refs.skipBtn.addEventListener('click', onSkip, true);
        refs.video.addEventListener('ended', onEnd);
        refs.video.addEventListener('error', onEnd);

        refs.video.src = src;
        refs.video.load();
        setTimeout(function(){
          try{ var p = refs.video.play(); if (p && typeof p.then === 'function'){ p.catch(function(){ cleanup(); }); } }
          catch(_){ cleanup(); }
        }, 60);
      });

      return promise;
    }catch(e){
      console.error('[2M] score intro failed', e);
      return null;
    }
  }

  function openRGPlayer(opts){
    var refs = ensureRGPlayer();
    if (!refs) return;
    var title = opts && opts.title ? String(opts.title) : '';
    var item = opts && opts.item;
    var asset = opts && opts.asset || null;
    var info = infoForTitle(title) || (item && typeof item === 'object' ? item : null);

    rgPlayerLastActive = document.activeElement;

    var poster = asset && asset.image || (info && info.location && info.location.image) || '';
    var videoSrc = asset && asset.video || (info && info.location && info.location.video) || '';
    var logoSrc = asset && asset.logo || (info && info.logo) || '';
    if (!logoSrc){
      var baseSrc = videoSrc || poster || '';
      if (baseSrc){
        var baseName = baseSrc.replace(/^.*\//,'').replace(/\..+$/,'');
        var prefix = baseName.split('-')[0];
        if (prefix){ logoSrc = 'images/films/' + prefix + '.png'; }
      }
    }

    if (refs.video){
      if (poster){ refs.video.setAttribute('poster', poster); }
      else { refs.video.removeAttribute('poster'); }
      refs.video.removeAttribute('src');
      refs.video.load();
      if (videoSrc){
        refs.video.style.display = 'block';
        refs.video.src = videoSrc;
        refs.video.load();
        setTimeout(function(){ try { refs.video.play(); } catch(_){} }, 50);
        if (refs.fallback) refs.fallback.style.display = 'none';
      } else {
        refs.video.style.display = 'none';
        if (refs.fallback) refs.fallback.style.display = 'flex';
      }
    }

    if (refs.logo){
      if (logoSrc){
        refs.logo.style.display = 'block';
        refs.logo.src = logoSrc;
        refs.logo.alt = (title || 'Film') + ' logo';
      } else {
        refs.logo.removeAttribute('src');
        refs.logo.style.display = 'none';
      }
    }

    if (refs.title){ refs.title.textContent = title || (info && info.title) || 'Film'; }

    var summaryText = info && info.short ? String(info.short) : '';
    var dykText = info && info.did_you_know ? String(info.did_you_know) : '';
    if (!summaryText && dykText){
      summaryText = dykText;
      dykText = '';
    }
    if (refs.summary){
      refs.summary.textContent = summaryText;
      refs.summary.style.display = summaryText ? '' : 'none';
    }

    var mainText = info && info.main ? String(info.main) : '';
    var hasMain = fillParagraphs(refs.main, mainText);
    var hasDyk = fillParagraphs(refs.dyk, dykText);
    if (refs.dyk){
      if (hasDyk){ refs.dyk.classList.add('rg-player-didyouknow'); }
      else { refs.dyk.classList.remove('rg-player-didyouknow'); }
    }

    var hasDetails = hasMain || hasDyk;
    if (refs.toggle){
      if (hasDetails){
        refs.toggle.style.display = '';
        refs.toggle.setAttribute('aria-expanded','false');
        refs.toggle.textContent = 'Show Details';
        if (refs.details) refs.details.hidden = true;
      } else {
        refs.toggle.style.display = 'none';
        if (refs.details) refs.details.hidden = true;
      }
    }

    if (refs.details && !hasDetails){ refs.details.hidden = true; }

    document.body.classList.add('rg-player-open');
    refs.root.classList.add('show');
    refs.root.setAttribute('aria-hidden','false');

    if (refs.close){
      try { refs.close.focus(); } catch(_){}
    }
  }

  function showRG(payload){
    var list = (payload && payload.order) || [];
    var order = list.map(unwrapTitle).filter(Boolean).slice(0,10);
    var answers = (payload && payload.answers) || (Array.isArray(window.__answerLog) ? window.__answerLog : []);

    // Derive answers directly from list objects if they carry a 'correct' flag to keep indices aligned
    (function alignAnswersWithOrder(){
      try{
        var hasObjects = Array.isArray(list) && list.length && typeof list[0] === 'object';
        if (hasObjects){
          var derived = list.map(function(it){ return !!(it && it.correct); });
          // use derived if at least one boolean present (avoid all-false default if empty)
          var hasSignal = derived.some(function(v){ return v === true || v === false; });
          if (hasSignal){ answers = derived; }
        }
      }catch(e){}
      // Ensure answers length matches order length
      if (Array.isArray(answers)){
        if (answers.length > order.length) answers = answers.slice(0, order.length);
        if (answers.length < order.length) { 
          // pad with false to keep indexes stable
          answers = answers.concat(Array(order.length - answers.length).fill(false));
        }
      }
    })();
    var total = (payload && payload.totalQuestions) || Math.min(10, order.length || 10);

    var root = ensureRGDom();
    if (root) root.style.display = 'none';
    var sub = root.querySelector('#rg-sub');
    var grid = root.querySelector('#rg-grid');

    var correct = 0; for (var i=0;i<answers.length;i++) if (answers[i]) correct++;
    if (!answers.length && typeof window.score === 'number') correct = window.score;
    sub.textContent = 'Score: ' + correct + ' / ' + total;

    grid.innerHTML = '';
    for (let i=0; i<order.length; i++){
      var title = order[i];
      var item = Array.isArray(list) ? list[i] : null;
      var asset = assetFromListItem(item, title);

      var logo = asset && asset.logo || null;
      var bg   = asset && asset.image || null;
      var ok = !!(answers && answers[i]);

      var card = document.createElement('div'); card.className = 'rg-card'; card.style.animationDelay = 'calc(' + i + ' * 80ms)';
      var thumb = document.createElement('div'); thumb.className = 'rg-thumb';
      if (bg) thumb.style.backgroundImage = 'url(' + bg + ')'; else thumb.textContent = 'No image';
      var meta = document.createElement('div'); meta.className = 'rg-meta';
      var t = document.createElement('div'); t.className = 'rg-title'; t.textContent = title || ('Question ' + (i+1));
      var chip = document.createElement('div'); chip.className = 'rg-chip ' + (ok?'ok':'bad'); chip.textContent = ok ? 'Correct' : 'Wrong';
      meta.appendChild(t); meta.appendChild(chip);
      card.appendChild(thumb);
      if (logo){ var lg = document.createElement('img'); lg.className = 'rg-logo'; lg.alt='Logo'; lg.src = logo; card.appendChild(lg); }
      card.appendChild(meta); grid.appendChild(card);

      card.setAttribute('role','button');
      card.setAttribute('tabindex','0');
      card.setAttribute('aria-label', 'Play clip for ' + (title || ('Question ' + (i+1))));
      card.dataset.title = title;
      if (asset && asset.video) card.dataset.video = asset.video;
      if (bg) card.dataset.image = bg;
      if (logo) card.dataset.logo = logo;

      var payload = { title: title, asset: asset, item: item };
      var activate = function(){ openRGPlayer(payload); };

      card.addEventListener('click', function(ev){
        ev.preventDefault();
        activate();
      });

      card.addEventListener('keydown', function(ev){
        if (ev.key === 'Enter' || ev.key === ' '){
          ev.preventDefault();
          activate();
        }
      });
    }

    function reveal(){
      var overlay = document.getElementById('rg-overlay');
      if (overlay){
        overlay.style.display = 'block';
        overlay.style.opacity = '0';
        overlay.style.transition = 'opacity .28s ease';
        requestAnimationFrame(function(){
          overlay.style.opacity = '1';
        });
      }
      console.log('[2M] review grid shown with', (order||[]).length, 'items');
    }

    var intro = playScoreIntro(correct);
    if (intro && typeof intro.then === 'function'){
      intro.then(reveal).catch(reveal);
    } else {
      reveal();
    }
  }

  ['__openCredits','openCredits','openCreditsModal','launchCredits','__showCredits','showCredits'].forEach(function(k){
    window[k] = function(list){
      try{
        var order = Array.isArray(list) ? list : [];
        showRG({ order: order });
      }catch(e){ console.error('[2M] intercept error', e); }
      return false;
    };
  });
})();
</script>


<script>
(function(){
  function getFinalScoreInfo(payload){
    var answers = (payload && payload.answers) || (Array.isArray(window.__answerLog) ? window.__answerLog : null);
    var total = (payload && payload.totalQuestions) || 10;
    var score = null;
    if (Array.isArray(answers) && answers.length){
      score = 0; for (var i=0;i<answers.length;i++){ if (answers[i]) score++; }
      total = Math.max(total, answers.length);
    }
    if (score === null && typeof window.score === 'number'){ score = window.score; }
    if (score === null){
      try{
        var el = document.querySelector('#rg-sub');
        if (el){
          var m = el.textContent.match(/Score:\s*(\d+)\s*\/\s*(\d+)/i);
          if (m){ score = parseInt(m[1],10); total = parseInt(m[2],10); }
        }
      }catch(e){}
    }
    if (typeof score !== 'number' || isNaN(score)){ score = 0; }
    if (typeof total !== 'number' || isNaN(total)){ total = 10; }
    return { score: score, total: total };
  }
  function imageForScore(score){
    if (score <= 0) return 'images/popcorn_ani.png';
    if (score === 1) return 'images/ticket_ani.png';
    if (score <= 3) return 'images/props_ani.png';
    if (score <= 5) return 'images/standin_ani.png';
    if (score <= 7) return 'images/star.png';
    if (score <= 9) return 'images/director_ani.png';
    return 'images/mogul_ani.png';
  }
  function ensureBanner(){
    var root = document.getElementById('rg-overlay'); if (!root) return null;
    var inner = root.querySelector('#rg-inner'); if (!inner) return null;
    var banner = document.getElementById('rg-award-banner');
    if (!banner){
      var css = document.createElement('style');
      css.textContent =
        '#rg-award-banner{display:flex;justify-content:center;align-items:center;padding:8px 0 12px 0}'
        + '#rg-award-banner img{max-width:min(520px, 80vw);width:100%;height:auto;image-rendering:auto;filter:drop-shadow(0 6px 18px rgba(0,0,0,.4));opacity:0;transform:translateY(6px);animation:rgFadeIn .44s ease forwards}'
        + '@keyframes rgFadeIn{to{opacity:1;transform:none}}';
      document.head.appendChild(css);
      banner = document.createElement('div'); banner.id = 'rg-award-banner';
      banner.innerHTML = '<img alt="Award">';
      var header = inner.querySelector('#rg-header');
      var grid = inner.querySelector('#rg-grid');
      if (header && grid && header.parentNode){ header.parentNode.insertBefore(banner, grid); }
      else { inner.insertBefore(banner, inner.firstChild); }
    }
    return banner;
  }
  (function patchShowRGForAward(){
    var _orig = window.showRG;
    window.showRG = function(payload){
      try{
        _orig && _orig(payload);
        var info = getFinalScoreInfo(payload);
        var src = imageForScore(info.score);
        var banner = ensureBanner();
        if (banner){
          var img = banner.querySelector('img');
          img.src = src;
          img.setAttribute('data-score', info.score);
          img.setAttribute('data-total', info.total);
        }
        console.log('[AwardBanner] score', info.score, '/', info.total, '→', src);
      }catch(e){
        console.warn('[AwardBanner] error', e);
      }
    };
  })();
})();
</script>

</html>
    <script src="repair.js"></script>


<!-- TAP-ANYWHERE RESTART (final score) -->
<script>
(function () {
  // Detect visibility of the final score block and bind/unbind a tap-to-restart handler.
  function finalScoreVisible() {
    try {
      const el = document.querySelector('.final-score-out');
      if (!el) return false;
      const st = getComputedStyle(el);
      const rect = el.getBoundingClientRect();
      // visible if in DOM, not display:none/visibility:hidden, and has layout box
      return st.display !== 'none' && st.visibility !== 'hidden' && rect.width > 0 && rect.height > 0;
    } catch (e) {
      return false;
    }
  }

  function handleTap(e) {
    if (!finalScoreVisible()) return;
    // Consume the event so it doesn't trigger underlying buttons/links
    try { e.preventDefault(); e.stopPropagation(); } catch(_) {}
    // Simple, robust way to return to splash: reload to initial state.
    // If your app exposes a reset function (e.g., window.resetQuizToSplash),
    // you can call that here instead of reloading.
    try {
      if (typeof window.resetQuizToSplash === 'function') {
        window.resetQuizToSplash();
      } else if (typeof window.restartQuiz === 'function') {
        window.restartQuiz();
      } else {
        location.reload();
      }
    } catch(_) {
      location.reload();
    }
  }

  function bindIfNeeded() {
    const visible = finalScoreVisible();
    if (visible && !window.__tapRestartBound) {
      window.__tapRestartBound = true;
      // Use capture so we intercept taps before other handlers on the page.
      document.addEventListener('click', handleTap, { capture: true });
      document.addEventListener('touchstart', handleTap, { capture: true });
      // Optional: visual hint – uncomment if you want "Tap to restart" text near score.
      // const hint = document.createElement('div');
      // hint.id = 'tapRestartHint';
      // hint.textContent = 'TAP ANYWHERE TO RESTART';
      // Object.assign(hint.style, { position:'fixed', left:'50%', transform:'translateX(-50%)', bottom:'6vh',
      //   fontFamily:'StandingRoomOnlyNF, system-ui, sans-serif', fontSize:'clamp(18px,3.2vmin,28px)',
      //   color:'#f5d75c', textShadow:'2px 2px 0 #000', letterSpacing:'0.08em', zIndex: 6000, pointerEvents:'none' });
      // document.body.appendChild(hint);
    } else if (!visible && window.__tapRestartBound) {
      window.__tapRestartBound = false;
      document.removeEventListener('click', handleTap, { capture: true });
      document.removeEventListener('touchstart', handleTap, { capture: true });
      const hint = document.getElementById('tapRestartHint');
      if (hint && hint.parentNode) hint.parentNode.removeChild(hint);
    }
  }

  // Observe DOM/state changes to toggle the binding as screens change.
  const mo = new MutationObserver(bindIfNeeded);
  mo.observe(document.documentElement, {
    childList: true,
    subtree: true,
    attributes: true,
    attributeFilter: ['class', 'style', 'data-state', 'hidden', 'aria-hidden']
  });

  window.addEventListener('load', bindIfNeeded);
  // Safety net in case the app mutates via timers/animations
  setInterval(bindIfNeeded, 700);
})();
</script>

<script>
(function () {
  // Auto-bind to the top-left-most SVG <rect> (your HUD square)
  function findTopLeftRect() {
    const rects = Array.from(document.querySelectorAll("svg rect"));
    if (!rects.length) {
      console.warn("[RS] No inline SVG <rect> elements found.");
      return null;
    }
    let best = null;
    let bestScore = Infinity;
    rects.forEach((r) => {
      const bb = r.getBoundingClientRect();
      if (!bb || !isFinite(bb.left) || !isFinite(bb.top) || bb.width === 0 || bb.height === 0) return;
      // score prefers closer to top-left and a reasonable size (ignore huge backgrounds)
      const area = bb.width * bb.height;
      const score = bb.left + bb.top + Math.min(area / 5000, 500); // area penalty bounded
      if (score < bestScore) {
        bestScore = score;
        best = r;
      }
    });
    return best;
  }

  function attachHoldWithPin(target) {
    const HOLD_TIME = 5000; // 5 seconds
    const PIN_CODE = "1945";
    let pressTimer = null;
    let tickTimer = null;
    let startAt = 0, lastSec = -1;

    // Visual debug halo
    const svgNS = "http://www.w3.org/2000/svg";
    const halo = document.createElementNS(svgNS, "rect");
    try {
      // clone bbox to halo
      const b = target.getBBox();
      halo.setAttribute("x", b.x);
      halo.setAttribute("y", b.y);
      halo.setAttribute("width", b.width);
      halo.setAttribute("height", b.height);
      halo.setAttribute("fill", "rgba(0,255,0,0.18)");
      halo.setAttribute("stroke", "lime");
      halo.setAttribute("stroke-width", "2");
      halo.setAttribute("vector-effect", "non-scaling-stroke");
      target.parentNode.insertBefore(halo, target.nextSibling);
    } catch (e) {}

    const startHold = () => {
      clearTimers();
      startAt = Date.now();
      lastSec = -1;
      tickTimer = setInterval(() => {
        const ms = Date.now() - startAt;
        const sec = Math.floor(ms / 1000);
        if (sec !== lastSec) {
          lastSec = sec;
          console.log("[RS] hold:", sec + "s");
        }
      }, 100);
      pressTimer = setTimeout(() => {
        clearInterval(tickTimer);
        const pin = prompt("Enter configuration PIN:");
        if (pin === PIN_CODE) {
          window.location.href = "file:///android_asset/www/index.html";
        } else {
          console.warn("[RS] wrong/canceled PIN");
        }
      }, HOLD_TIME);
    };
    const cancelHold = () => {
      clearTimers();
    };
    function clearTimers() {
      if (pressTimer) clearTimeout(pressTimer);
      if (tickTimer) clearInterval(tickTimer);
      pressTimer = null; tickTimer = null;
    }

    target.style.cursor = "pointer";
    target.setAttribute("pointer-events", "all");
    target.addEventListener("mousedown", startHold);
    target.addEventListener("mouseup", cancelHold);
    target.addEventListener("mouseleave", cancelHold);
    target.addEventListener("touchstart", startHold, { passive: true });
    target.addEventListener("touchend", cancelHold);
    target.addEventListener("touchcancel", cancelHold);
  }

  function init() {
    const target = findTopLeftRect();
    if (!target) {
      // visible fallback hot-corner for testing
      const corner = document.createElement("div");
      Object.assign(corner.style, {
        position: "fixed", left: "0", top: "0", width: "60px", height: "60px",
        background: "rgba(255,0,0,0.3)", border: "2px solid red", zIndex: 999999,
        cursor: "pointer"
      });
      document.body.appendChild(corner);
      attachHoldWithPin(corner);
      console.warn("[RS] Fallback hot-corner added (no SVG rects found).");
      return;
    }
    console.log("[RS] Auto-bound hotspot:", target);
    attachHoldWithPin(target);
  }

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init);
  } else {
    init();
  }
})();
</script>

<!-- R2R PATCH: robust splash video + single-tap + idle/title policy -->
<script>
(function(){
  // Tuning knobs
  const RARE_TITLE_PROB = 1 / 12;      // "more rarely"
  const RESET_IDLE_MS   = 120000;      // 2 minutes of no input -> reset
  const FALLBACK_SRC    = 'videos/0.mp4';
  const TITLE_CANDIDATES = ['videos/r2r-title.mp4', 'videos/r2r-title-r.mp4'];

  let __r2r_firstLaunch = true;
  let __r2r_idleTimer = null;

  function __r2r_shouldPlayTitle({ onFirst=false, onReset=false } = {}) {
    if (onFirst || onReset) return true;
    return Math.random() < RARE_TITLE_PROB;
  }

  // Use an existing global pool if present
  async function __r2r_getSplashList(){
    try { return Array.isArray(window.SPLASH_VIDEOS) ? window.SPLASH_VIDEOS : []; }
    catch(e){ return []; }
  }

  function __r2r_pickRandom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

  async function __r2r_pickSplashSource(opts = {}){
    const { requireTitle=false, preferTitle=false, onFirst=false, onReset=false } = opts;
    const pool = await __r2r_getSplashList();

    if (requireTitle) return __r2r_pickRandom(TITLE_CANDIDATES);
    if (preferTitle && Math.random() < 0.8) return __r2r_pickRandom(TITLE_CANDIDATES);
    if (__r2r_shouldPlayTitle({ onFirst, onReset })) return __r2r_pickRandom(TITLE_CANDIDATES);
    if (pool && pool.length) return __r2r_pickRandom(pool);
    return FALLBACK_SRC;
  }

  function __r2r_armSplashOneTapContinue(){
    const overlay = document.getElementById('splashOverlay');
    if (!overlay) return;
    // Replace node to nuke any stacked listeners that cause "double-tap" feel
    const clone = overlay.cloneNode(true);
    if (overlay.parentNode) overlay.parentNode.replaceChild(clone, overlay);
    const fresh = document.getElementById('splashOverlay') || clone;

    const onTap = function(ev){
      ev.preventDefault();
      ev.stopPropagation();
      try { window.hideSplashAndStartQuiz && window.hideSplashAndStartQuiz(); } catch(_){}
    };
    fresh.addEventListener('pointerup', onTap, { once: true, capture: true });
  }

  function __r2r_wireIdleReset(){
    const resetIdle = () => {
      clearTimeout(__r2r_idleTimer);
      __r2r_idleTimer = setTimeout(() => {
        // Next splash uses a title
        __r2r_prepareSplashVideo({ requireTitle: true, onReset: true }).then(()=>{
          try { window.showSplash && window.showSplash(); } catch(_){}
        });
      }, RESET_IDLE_MS);
    };
    ['pointerdown','keydown','touchstart','mousemove'].forEach(evt => {
      window.addEventListener(evt, resetIdle, { passive: true });
    });
    resetIdle();
  }

  function __r2r_setVideoSourceWithFallback(videoEl, primarySrc){
    return new Promise((resolve) => {
      const tryLoad = (src, isFallback=false) => {
        // clear sources
        Array.from(videoEl.querySelectorAll('source')).forEach(s => s.remove());
        videoEl.removeAttribute('src'); videoEl.load();

        const s = document.createElement('source');
        s.src = src;
        s.type = src.toLowerCase().endsWith('.webm') ? 'video/webm' : 'video/mp4';
        s.addEventListener('error', () => {
          if (!isFallback) {
            tryLoad(FALLBACK_SRC, true);
          } else {
            resolve();
          }
        }, { once:true });
        videoEl.appendChild(s);

        const onCanPlay = () => { videoEl.removeEventListener('canplay', onCanPlay); resolve(); };
        videoEl.addEventListener('canplay', onCanPlay, { once:true });
        videoEl.load();
      };
      tryLoad(primarySrc, false);
    });
  }

  async function __r2r_prepareSplashVideo({ requireTitle=false, preferTitle=false, onFirst=false, onReset=false } = {}){
    const v = document.querySelector('#splashOverlay .bgvid');
    if (!v) return;

    // autoplay-friendly defaults
    v.muted = true;
    v.loop  = false;                 // manual loop so we can change source at end
    v.preload = 'auto';
    v.playsInline = true;
    v.setAttribute('webkit-playsinline','');
    v.disableRemotePlayback = true;

    const chosen = await __r2r_pickSplashSource({ requireTitle, preferTitle, onFirst, onReset });
    await __r2r_setVideoSourceWithFallback(v, chosen);

    const start = async () => {
      try {
        if (isFinite(v.duration) && v.duration > 3) {
          v.currentTime = Math.min(Math.max(0.5, Math.random() * (v.duration - 1.5)), v.duration - 0.5);
        }
      } catch(_){}
      try { await v.play(); } catch(_){}
    };

    const onCPT = () => { v.removeEventListener('canplaythrough', onCPT); start(); };
    v.addEventListener('canplaythrough', onCPT, { once:true });
    v.addEventListener('loadedmetadata', () => setTimeout(() => { if (v.paused) start(); }, 120), { once:true });

    v.addEventListener('ended', async () => {
      await __r2r_prepareSplashVideo({}); // pick a fresh random (title rarely)
    }, { passive: true });

    const kick = () => { if (v.paused) v.play().catch(()=>{}); };
    v.addEventListener('waiting', () => setTimeout(kick, 150));
    v.addEventListener('stalled', () => setTimeout(kick, 150));
  }

  function __r2r_patchShowSplash(){
    // If the app already defines showSplash, wrap it so our logic runs AFTER
    const orig = window.showSplash;
    window.showSplash = async function(){
      try { orig && orig(); } catch(_){}
      const forceTitle = __r2r_firstLaunch === true;
      await __r2r_prepareSplashVideo({ requireTitle: forceTitle, onFirst: forceTitle });
      __r2r_armSplashOneTapContinue();
      __r2r_firstLaunch = false;
    };
  }

  document.addEventListener('DOMContentLoaded', function(){
    __r2r_patchShowSplash();
    __r2r_wireIdleReset();
    // If page already shows splash immediately, ensure our wrapper runs:
    // (If not auto-showing, nothing breaks.)
  });
})();
</script>
